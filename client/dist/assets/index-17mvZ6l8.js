function t_(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lm={exports:{}},za={},um={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ms=Symbol.for("react.element"),r_=Symbol.for("react.portal"),n_=Symbol.for("react.fragment"),i_=Symbol.for("react.strict_mode"),s_=Symbol.for("react.profiler"),o_=Symbol.for("react.provider"),a_=Symbol.for("react.context"),c_=Symbol.for("react.forward_ref"),l_=Symbol.for("react.suspense"),u_=Symbol.for("react.memo"),d_=Symbol.for("react.lazy"),Ep=Symbol.iterator;function p_(t){return t===null||typeof t!="object"?null:(t=Ep&&t[Ep]||t["@@iterator"],typeof t=="function"?t:null)}var dm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pm=Object.assign,fm={};function Ci(t,e,r){this.props=t,this.context=e,this.refs=fm,this.updater=r||dm}Ci.prototype.isReactComponent={};Ci.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ci.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hm(){}hm.prototype=Ci.prototype;function qu(t,e,r){this.props=t,this.context=e,this.refs=fm,this.updater=r||dm}var Qu=qu.prototype=new hm;Qu.constructor=qu;pm(Qu,Ci.prototype);Qu.isPureReactComponent=!0;var Tp=Array.isArray,mm=Object.prototype.hasOwnProperty,Hu={current:null},gm={key:!0,ref:!0,__self:!0,__source:!0};function vm(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)mm.call(e,n)&&!gm.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Ms,type:t,key:s,ref:o,props:i,_owner:Hu.current}}function f_(t,e){return{$$typeof:Ms,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ms}function h_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Pp=/\/+/g;function Nc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?h_(""+t.key):e.toString(36)}function Bo(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ms:case r_:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Nc(o,0):n,Tp(i)?(r="",t!=null&&(r=t.replace(Pp,"$&/")+"/"),Bo(i,e,r,"",function(l){return l})):i!=null&&(Vu(i)&&(i=f_(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Pp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Tp(t))for(var a=0;a<t.length;a++){s=t[a];var c=n+Nc(s,a);o+=Bo(s,e,r,c,i)}else if(c=p_(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=n+Nc(s,a++),o+=Bo(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function no(t,e,r){if(t==null)return t;var n=[],i=0;return Bo(t,n,"","",function(s){return e.call(r,s,i++)}),n}function m_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nt={current:null},Uo={transition:null},g_={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:Uo,ReactCurrentOwner:Hu};K.Children={map:no,forEach:function(t,e,r){no(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return no(t,function(){e++}),e},toArray:function(t){return no(t,function(e){return e})||[]},only:function(t){if(!Vu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=Ci;K.Fragment=n_;K.Profiler=s_;K.PureComponent=qu;K.StrictMode=i_;K.Suspense=l_;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g_;K.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=pm({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Hu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)mm.call(e,c)&&!gm.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:Ms,type:t.type,key:i,ref:s,props:n,_owner:o}};K.createContext=function(t){return t={$$typeof:a_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o_,_context:t},t.Consumer=t};K.createElement=vm;K.createFactory=function(t){var e=vm.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:c_,render:t}};K.isValidElement=Vu;K.lazy=function(t){return{$$typeof:d_,_payload:{_status:-1,_result:t},_init:m_}};K.memo=function(t,e){return{$$typeof:u_,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=Uo.transition;Uo.transition={};try{t()}finally{Uo.transition=e}};K.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};K.useCallback=function(t,e){return nt.current.useCallback(t,e)};K.useContext=function(t){return nt.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return nt.current.useDeferredValue(t)};K.useEffect=function(t,e){return nt.current.useEffect(t,e)};K.useId=function(){return nt.current.useId()};K.useImperativeHandle=function(t,e,r){return nt.current.useImperativeHandle(t,e,r)};K.useInsertionEffect=function(t,e){return nt.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return nt.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return nt.current.useMemo(t,e)};K.useReducer=function(t,e,r){return nt.current.useReducer(t,e,r)};K.useRef=function(t){return nt.current.useRef(t)};K.useState=function(t){return nt.current.useState(t)};K.useSyncExternalStore=function(t,e,r){return nt.current.useSyncExternalStore(t,e,r)};K.useTransition=function(){return nt.current.useTransition()};K.version="18.2.0";um.exports=K;var T=um.exports;const tt=cm(T),v_=t_({__proto__:null,default:tt},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_=T,__=Symbol.for("react.element"),w_=Symbol.for("react.fragment"),S_=Object.prototype.hasOwnProperty,R_=y_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b_={key:!0,ref:!0,__self:!0,__source:!0};function ym(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)S_.call(e,n)&&!b_.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:__,type:t,key:s,ref:o,props:i,_owner:R_.current}}za.Fragment=w_;za.jsx=ym;za.jsxs=ym;lm.exports=za;var te=lm.exports,xl={},_m={exports:{}},gt={},wm={exports:{}},Sm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,L){var $=P.length;P.push(L);e:for(;0<$;){var ae=$-1>>>1,fe=P[ae];if(0<i(fe,L))P[ae]=L,P[$]=fe,$=ae;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var L=P[0],$=P.pop();if($!==L){P[0]=$;e:for(var ae=0,fe=P.length,lr=fe>>>1;ae<lr;){var Ut=2*(ae+1)-1,Tr=P[Ut],Dt=Ut+1,Pr=P[Dt];if(0>i(Tr,$))Dt<fe&&0>i(Pr,Tr)?(P[ae]=Pr,P[Dt]=$,ae=Dt):(P[ae]=Tr,P[Ut]=$,ae=Ut);else if(Dt<fe&&0>i(Pr,$))P[ae]=Pr,P[Dt]=$,ae=Dt;else break e}}return L}function i(P,L){var $=P.sortIndex-L.sortIndex;return $!==0?$:P.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,p=3,h=!1,f=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(P){for(var L=r(l);L!==null;){if(L.callback===null)n(l);else if(L.startTime<=P)n(l),L.sortIndex=L.expirationTime,e(c,L);else break;L=r(l)}}function w(P){if(m=!1,_(P),!f)if(r(c)!==null)f=!0,je(b);else{var L=r(l);L!==null&&st(w,L.startTime-P)}}function b(P,L){f=!1,m&&(m=!1,v(x),x=-1),h=!0;var $=p;try{for(_(L),d=r(c);d!==null&&(!(d.expirationTime>L)||P&&!ue());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,p=d.priorityLevel;var fe=ae(d.expirationTime<=L);L=t.unstable_now(),typeof fe=="function"?d.callback=fe:d===r(c)&&n(c),_(L)}else n(c);d=r(c)}if(d!==null)var lr=!0;else{var Ut=r(l);Ut!==null&&st(w,Ut.startTime-L),lr=!1}return lr}finally{d=null,p=$,h=!1}}var C=!1,D=null,x=-1,H=5,O=-1;function ue(){return!(t.unstable_now()-O<H)}function ge(){if(D!==null){var P=t.unstable_now();O=P;var L=!0;try{L=D(!0,P)}finally{L?Pe():(C=!1,D=null)}}else C=!1}var Pe;if(typeof y=="function")Pe=function(){y(ge)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,Bt=Ke.port2;Ke.port1.onmessage=ge,Pe=function(){Bt.postMessage(null)}}else Pe=function(){g(ge,0)};function je(P){D=P,C||(C=!0,Pe())}function st(P,L){x=g(function(){P(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){f||h||(f=!0,je(b))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var L=3;break;default:L=p}var $=p;p=L;try{return P()}finally{p=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,L){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var $=p;p=P;try{return L()}finally{p=$}},t.unstable_scheduleCallback=function(P,L,$){var ae=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ae+$:ae):$=ae,P){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=$+fe,P={id:u++,callback:L,priorityLevel:P,startTime:$,expirationTime:fe,sortIndex:-1},$>ae?(P.sortIndex=$,e(l,P),r(c)===null&&P===r(l)&&(m?(v(x),x=-1):m=!0,st(w,$-ae))):(P.sortIndex=fe,e(c,P),f||h||(f=!0,je(b))),P},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(P){var L=p;return function(){var $=p;p=L;try{return P.apply(this,arguments)}finally{p=$}}}})(Sm);wm.exports=Sm;var C_=wm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm=T,mt=C_;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bm=new Set,ps={};function bn(t,e){mi(t,e),mi(t+"Capture",e)}function mi(t,e){for(ps[t]=e,t=0;t<e.length;t++)bm.add(e[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kl=Object.prototype.hasOwnProperty,E_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dp={},xp={};function T_(t){return kl.call(xp,t)?!0:kl.call(Dp,t)?!1:E_.test(t)?xp[t]=!0:(Dp[t]=!0,!1)}function P_(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D_(t,e,r,n){if(e===null||typeof e>"u"||P_(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function it(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ve[t]=new it(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ve[e]=new it(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ve[t]=new it(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ve[t]=new it(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ve[t]=new it(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ve[t]=new it(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ve[t]=new it(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ve[t]=new it(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ve[t]=new it(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ku=/[\-:]([a-z])/g;function Wu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ku,Wu);Ve[e]=new it(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ku,Wu);Ve[e]=new it(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ku,Wu);Ve[e]=new it(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ve[t]=new it(t,1,!1,t.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ve[t]=new it(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gu(t,e,r,n){var i=Ve.hasOwnProperty(e)?Ve[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(D_(e,r,i,n)&&(r=null),n||i===null?T_(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Cr=Rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,io=Symbol.for("react.element"),Jn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),Ju=Symbol.for("react.strict_mode"),Ol=Symbol.for("react.profiler"),Cm=Symbol.for("react.provider"),Em=Symbol.for("react.context"),Yu=Symbol.for("react.forward_ref"),Ll=Symbol.for("react.suspense"),Ml=Symbol.for("react.suspense_list"),Xu=Symbol.for("react.memo"),jr=Symbol.for("react.lazy"),Tm=Symbol.for("react.offscreen"),kp=Symbol.iterator;function ji(t){return t===null||typeof t!="object"?null:(t=kp&&t[kp]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,jc;function Ji(t){if(jc===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);jc=e&&e[1]||""}return`
`+jc+t}var Ac=!1;function Fc(t,e){if(!t||Ac)return"";Ac=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Ac=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ji(t):""}function x_(t){switch(t.tag){case 5:return Ji(t.type);case 16:return Ji("Lazy");case 13:return Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 2:case 15:return t=Fc(t.type,!1),t;case 11:return t=Fc(t.type.render,!1),t;case 1:return t=Fc(t.type,!0),t;default:return""}}function Il(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yn:return"Fragment";case Jn:return"Portal";case Ol:return"Profiler";case Ju:return"StrictMode";case Ll:return"Suspense";case Ml:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Em:return(t.displayName||"Context")+".Consumer";case Cm:return(t._context.displayName||"Context")+".Provider";case Yu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xu:return e=t.displayName||null,e!==null?e:Il(t.type)||"Memo";case jr:e=t._payload,t=t._init;try{return Il(t(e))}catch{}}return null}function k_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Il(e);case 8:return e===Ju?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function O_(t){var e=Pm(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function so(t){t._valueTracker||(t._valueTracker=O_(t))}function Dm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Pm(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function la(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nl(t,e){var r=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Op(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=tn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xm(t,e){e=e.checked,e!=null&&Gu(t,"checked",e,!1)}function jl(t,e){xm(t,e);var r=tn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Al(t,e.type,r):e.hasOwnProperty("defaultValue")&&Al(t,e.type,tn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Lp(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Al(t,e,r){(e!=="number"||la(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Yi=Array.isArray;function ci(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+tn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Fl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mp(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(E(92));if(Yi(r)){if(1<r.length)throw Error(E(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:tn(r)}}function km(t,e){var r=tn(e.value),n=tn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Ip(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Om(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $l(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Om(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var oo,Lm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(oo=oo||document.createElement("div"),oo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=oo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fs(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L_=["Webkit","ms","Moz","O"];Object.keys(ts).forEach(function(t){L_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ts[e]=ts[t]})});function Mm(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ts.hasOwnProperty(t)&&ts[t]?(""+e).trim():e+"px"}function Im(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Mm(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var M_=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bl(t,e){if(e){if(M_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Ul(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zl=null;function Zu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ql=null,li=null,ui=null;function Np(t){if(t=js(t)){if(typeof ql!="function")throw Error(E(280));var e=t.stateNode;e&&(e=Ka(e),ql(t.stateNode,t.type,e))}}function Nm(t){li?ui?ui.push(t):ui=[t]:li=t}function jm(){if(li){var t=li,e=ui;if(ui=li=null,Np(t),e)for(t=0;t<e.length;t++)Np(e[t])}}function Am(t,e){return t(e)}function Fm(){}var $c=!1;function $m(t,e,r){if($c)return t(e,r);$c=!0;try{return Am(t,e,r)}finally{$c=!1,(li!==null||ui!==null)&&(Fm(),jm())}}function hs(t,e){var r=t.stateNode;if(r===null)return null;var n=Ka(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(E(231,e,typeof r));return r}var Ql=!1;if(_r)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){Ql=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{Ql=!1}function I_(t,e,r,n,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(u){this.onError(u)}}var rs=!1,ua=null,da=!1,Hl=null,N_={onError:function(t){rs=!0,ua=t}};function j_(t,e,r,n,i,s,o,a,c){rs=!1,ua=null,I_.apply(N_,arguments)}function A_(t,e,r,n,i,s,o,a,c){if(j_.apply(this,arguments),rs){if(rs){var l=ua;rs=!1,ua=null}else throw Error(E(198));da||(da=!0,Hl=l)}}function Cn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Bm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jp(t){if(Cn(t)!==t)throw Error(E(188))}function F_(t){var e=t.alternate;if(!e){if(e=Cn(t),e===null)throw Error(E(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return jp(i),t;if(s===n)return jp(i),e;s=s.sibling}throw Error(E(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(E(189))}}if(r.alternate!==n)throw Error(E(190))}if(r.tag!==3)throw Error(E(188));return r.stateNode.current===r?t:e}function Um(t){return t=F_(t),t!==null?zm(t):null}function zm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zm(t);if(e!==null)return e;t=t.sibling}return null}var qm=mt.unstable_scheduleCallback,Ap=mt.unstable_cancelCallback,$_=mt.unstable_shouldYield,B_=mt.unstable_requestPaint,De=mt.unstable_now,U_=mt.unstable_getCurrentPriorityLevel,ed=mt.unstable_ImmediatePriority,Qm=mt.unstable_UserBlockingPriority,pa=mt.unstable_NormalPriority,z_=mt.unstable_LowPriority,Hm=mt.unstable_IdlePriority,qa=null,nr=null;function q_(t){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(qa,t,void 0,(t.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:V_,Q_=Math.log,H_=Math.LN2;function V_(t){return t>>>=0,t===0?32:31-(Q_(t)/H_|0)|0}var ao=64,co=4194304;function Xi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fa(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Xi(a):(s&=o,s!==0&&(n=Xi(s)))}else o=r&~i,o!==0?n=Xi(o):s!==0&&(n=Xi(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-jt(e),i=1<<r,n|=t[r],e&=~i;return n}function K_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W_(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-jt(s),a=1<<o,c=i[o];c===-1?(!(a&r)||a&n)&&(i[o]=K_(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Vl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vm(){var t=ao;return ao<<=1,!(ao&4194240)&&(ao=64),t}function Bc(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Is(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jt(e),t[e]=r}function G_(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-jt(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function td(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-jt(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var oe=0;function Km(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wm,rd,Gm,Jm,Ym,Kl=!1,lo=[],Qr=null,Hr=null,Vr=null,ms=new Map,gs=new Map,$r=[],J_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fp(t,e){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":ms.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gs.delete(e.pointerId)}}function Fi(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=js(e),e!==null&&rd(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Y_(t,e,r,n,i){switch(e){case"focusin":return Qr=Fi(Qr,t,e,r,n,i),!0;case"dragenter":return Hr=Fi(Hr,t,e,r,n,i),!0;case"mouseover":return Vr=Fi(Vr,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return ms.set(s,Fi(ms.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,gs.set(s,Fi(gs.get(s)||null,t,e,r,n,i)),!0}return!1}function Xm(t){var e=dn(t.target);if(e!==null){var r=Cn(e);if(r!==null){if(e=r.tag,e===13){if(e=Bm(r),e!==null){t.blockedOn=e,Ym(t.priority,function(){Gm(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Wl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);zl=n,r.target.dispatchEvent(n),zl=null}else return e=js(r),e!==null&&rd(e),t.blockedOn=r,!1;e.shift()}return!0}function $p(t,e,r){zo(t)&&r.delete(e)}function X_(){Kl=!1,Qr!==null&&zo(Qr)&&(Qr=null),Hr!==null&&zo(Hr)&&(Hr=null),Vr!==null&&zo(Vr)&&(Vr=null),ms.forEach($p),gs.forEach($p)}function $i(t,e){t.blockedOn===e&&(t.blockedOn=null,Kl||(Kl=!0,mt.unstable_scheduleCallback(mt.unstable_NormalPriority,X_)))}function vs(t){function e(i){return $i(i,t)}if(0<lo.length){$i(lo[0],t);for(var r=1;r<lo.length;r++){var n=lo[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Qr!==null&&$i(Qr,t),Hr!==null&&$i(Hr,t),Vr!==null&&$i(Vr,t),ms.forEach(e),gs.forEach(e),r=0;r<$r.length;r++)n=$r[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<$r.length&&(r=$r[0],r.blockedOn===null);)Xm(r),r.blockedOn===null&&$r.shift()}var di=Cr.ReactCurrentBatchConfig,ha=!0;function Z_(t,e,r,n){var i=oe,s=di.transition;di.transition=null;try{oe=1,nd(t,e,r,n)}finally{oe=i,di.transition=s}}function ew(t,e,r,n){var i=oe,s=di.transition;di.transition=null;try{oe=4,nd(t,e,r,n)}finally{oe=i,di.transition=s}}function nd(t,e,r,n){if(ha){var i=Wl(t,e,r,n);if(i===null)Jc(t,e,n,ma,r),Fp(t,n);else if(Y_(i,t,e,r,n))n.stopPropagation();else if(Fp(t,n),e&4&&-1<J_.indexOf(t)){for(;i!==null;){var s=js(i);if(s!==null&&Wm(s),s=Wl(t,e,r,n),s===null&&Jc(t,e,n,ma,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Jc(t,e,n,null,r)}}var ma=null;function Wl(t,e,r,n){if(ma=null,t=Zu(n),t=dn(t),t!==null)if(e=Cn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Bm(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ma=t,null}function Zm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U_()){case ed:return 1;case Qm:return 4;case pa:case z_:return 16;case Hm:return 536870912;default:return 16}default:return 16}}var Ur=null,id=null,qo=null;function eg(){if(qo)return qo;var t,e=id,r=e.length,n,i="value"in Ur?Ur.value:Ur.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return qo=i.slice(t,1<n?1-n:void 0)}function Qo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function uo(){return!0}function Bp(){return!1}function vt(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?uo:Bp,this.isPropagationStopped=Bp,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=uo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=uo)},persist:function(){},isPersistent:uo}),e}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sd=vt(Ei),Ns=we({},Ei,{view:0,detail:0}),tw=vt(Ns),Uc,zc,Bi,Qa=we({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:od,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bi&&(Bi&&t.type==="mousemove"?(Uc=t.screenX-Bi.screenX,zc=t.screenY-Bi.screenY):zc=Uc=0,Bi=t),Uc)},movementY:function(t){return"movementY"in t?t.movementY:zc}}),Up=vt(Qa),rw=we({},Qa,{dataTransfer:0}),nw=vt(rw),iw=we({},Ns,{relatedTarget:0}),qc=vt(iw),sw=we({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),ow=vt(sw),aw=we({},Ei,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cw=vt(aw),lw=we({},Ei,{data:0}),zp=vt(lw),uw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pw[t])?!!e[t]:!1}function od(){return fw}var hw=we({},Ns,{key:function(t){if(t.key){var e=uw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:od,charCode:function(t){return t.type==="keypress"?Qo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mw=vt(hw),gw=we({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qp=vt(gw),vw=we({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:od}),yw=vt(vw),_w=we({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),ww=vt(_w),Sw=we({},Qa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rw=vt(Sw),bw=[9,13,27,32],ad=_r&&"CompositionEvent"in window,ns=null;_r&&"documentMode"in document&&(ns=document.documentMode);var Cw=_r&&"TextEvent"in window&&!ns,tg=_r&&(!ad||ns&&8<ns&&11>=ns),Qp=" ",Hp=!1;function rg(t,e){switch(t){case"keyup":return bw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ng(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xn=!1;function Ew(t,e){switch(t){case"compositionend":return ng(e);case"keypress":return e.which!==32?null:(Hp=!0,Qp);case"textInput":return t=e.data,t===Qp&&Hp?null:t;default:return null}}function Tw(t,e){if(Xn)return t==="compositionend"||!ad&&rg(t,e)?(t=eg(),qo=id=Ur=null,Xn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tg&&e.locale!=="ko"?null:e.data;default:return null}}var Pw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Pw[t.type]:e==="textarea"}function ig(t,e,r,n){Nm(n),e=ga(e,"onChange"),0<e.length&&(r=new sd("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var is=null,ys=null;function Dw(t){mg(t,0)}function Ha(t){var e=ti(t);if(Dm(e))return t}function xw(t,e){if(t==="change")return e}var sg=!1;if(_r){var Qc;if(_r){var Hc="oninput"in document;if(!Hc){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),Hc=typeof Kp.oninput=="function"}Qc=Hc}else Qc=!1;sg=Qc&&(!document.documentMode||9<document.documentMode)}function Wp(){is&&(is.detachEvent("onpropertychange",og),ys=is=null)}function og(t){if(t.propertyName==="value"&&Ha(ys)){var e=[];ig(e,ys,t,Zu(t)),$m(Dw,e)}}function kw(t,e,r){t==="focusin"?(Wp(),is=e,ys=r,is.attachEvent("onpropertychange",og)):t==="focusout"&&Wp()}function Ow(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ha(ys)}function Lw(t,e){if(t==="click")return Ha(e)}function Mw(t,e){if(t==="input"||t==="change")return Ha(e)}function Iw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ft=typeof Object.is=="function"?Object.is:Iw;function _s(t,e){if(Ft(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!kl.call(e,i)||!Ft(t[i],e[i]))return!1}return!0}function Gp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jp(t,e){var r=Gp(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Gp(r)}}function ag(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ag(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cg(){for(var t=window,e=la();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=la(t.document)}return e}function cd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Nw(t){var e=cg(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&ag(r.ownerDocument.documentElement,r)){if(n!==null&&cd(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Jp(r,s);var o=Jp(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jw=_r&&"documentMode"in document&&11>=document.documentMode,Zn=null,Gl=null,ss=null,Jl=!1;function Yp(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jl||Zn==null||Zn!==la(n)||(n=Zn,"selectionStart"in n&&cd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ss&&_s(ss,n)||(ss=n,n=ga(Gl,"onSelect"),0<n.length&&(e=new sd("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Zn)))}function po(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ei={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionend:po("Transition","TransitionEnd")},Vc={},lg={};_r&&(lg=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function Va(t){if(Vc[t])return Vc[t];if(!ei[t])return t;var e=ei[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in lg)return Vc[t]=e[r];return t}var ug=Va("animationend"),dg=Va("animationiteration"),pg=Va("animationstart"),fg=Va("transitionend"),hg=new Map,Xp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sn(t,e){hg.set(t,e),bn(e,[t])}for(var Kc=0;Kc<Xp.length;Kc++){var Wc=Xp[Kc],Aw=Wc.toLowerCase(),Fw=Wc[0].toUpperCase()+Wc.slice(1);sn(Aw,"on"+Fw)}sn(ug,"onAnimationEnd");sn(dg,"onAnimationIteration");sn(pg,"onAnimationStart");sn("dblclick","onDoubleClick");sn("focusin","onFocus");sn("focusout","onBlur");sn(fg,"onTransitionEnd");mi("onMouseEnter",["mouseout","mouseover"]);mi("onMouseLeave",["mouseout","mouseover"]);mi("onPointerEnter",["pointerout","pointerover"]);mi("onPointerLeave",["pointerout","pointerover"]);bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$w=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zi));function Zp(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,A_(n,e,void 0,t),t.currentTarget=null}function mg(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Zp(i,a,l),s=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Zp(i,a,l),s=c}}}if(da)throw t=Hl,da=!1,Hl=null,t}function he(t,e){var r=e[tu];r===void 0&&(r=e[tu]=new Set);var n=t+"__bubble";r.has(n)||(gg(e,t,2,!1),r.add(n))}function Gc(t,e,r){var n=0;e&&(n|=4),gg(r,t,n,e)}var fo="_reactListening"+Math.random().toString(36).slice(2);function ws(t){if(!t[fo]){t[fo]=!0,bm.forEach(function(r){r!=="selectionchange"&&($w.has(r)||Gc(r,!1,t),Gc(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fo]||(e[fo]=!0,Gc("selectionchange",!1,e))}}function gg(t,e,r,n){switch(Zm(e)){case 1:var i=Z_;break;case 4:i=ew;break;default:i=nd}r=i.bind(null,e,r,t),i=void 0,!Ql||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Jc(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=dn(a),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}a=a.parentNode}}n=n.return}$m(function(){var l=s,u=Zu(r),d=[];e:{var p=hg.get(t);if(p!==void 0){var h=sd,f=t;switch(t){case"keypress":if(Qo(r)===0)break e;case"keydown":case"keyup":h=mw;break;case"focusin":f="focus",h=qc;break;case"focusout":f="blur",h=qc;break;case"beforeblur":case"afterblur":h=qc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Up;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=nw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=yw;break;case ug:case dg:case pg:h=ow;break;case fg:h=ww;break;case"scroll":h=tw;break;case"wheel":h=Rw;break;case"copy":case"cut":case"paste":h=cw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=qp}var m=(e&4)!==0,g=!m&&t==="scroll",v=m?p!==null?p+"Capture":null:p;m=[];for(var y=l,_;y!==null;){_=y;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,v!==null&&(w=hs(y,v),w!=null&&m.push(Ss(y,w,_)))),g)break;y=y.return}0<m.length&&(p=new h(p,f,null,r,u),d.push({event:p,listeners:m}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&r!==zl&&(f=r.relatedTarget||r.fromElement)&&(dn(f)||f[wr]))break e;if((h||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,h?(f=r.relatedTarget||r.toElement,h=l,f=f?dn(f):null,f!==null&&(g=Cn(f),f!==g||f.tag!==5&&f.tag!==6)&&(f=null)):(h=null,f=l),h!==f)){if(m=Up,w="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=qp,w="onPointerLeave",v="onPointerEnter",y="pointer"),g=h==null?p:ti(h),_=f==null?p:ti(f),p=new m(w,y+"leave",h,r,u),p.target=g,p.relatedTarget=_,w=null,dn(u)===l&&(m=new m(v,y+"enter",f,r,u),m.target=_,m.relatedTarget=g,w=m),g=w,h&&f)t:{for(m=h,v=f,y=0,_=m;_;_=xn(_))y++;for(_=0,w=v;w;w=xn(w))_++;for(;0<y-_;)m=xn(m),y--;for(;0<_-y;)v=xn(v),_--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=xn(m),v=xn(v)}m=null}else m=null;h!==null&&ef(d,p,h,m,!1),f!==null&&g!==null&&ef(d,g,f,m,!0)}}e:{if(p=l?ti(l):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var b=xw;else if(Vp(p))if(sg)b=Mw;else{b=Ow;var C=kw}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=Lw);if(b&&(b=b(t,l))){ig(d,b,r,u);break e}C&&C(t,p,l),t==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&Al(p,"number",p.value)}switch(C=l?ti(l):window,t){case"focusin":(Vp(C)||C.contentEditable==="true")&&(Zn=C,Gl=l,ss=null);break;case"focusout":ss=Gl=Zn=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,Yp(d,r,u);break;case"selectionchange":if(jw)break;case"keydown":case"keyup":Yp(d,r,u)}var D;if(ad)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Xn?rg(t,r)&&(x="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(x="onCompositionStart");x&&(tg&&r.locale!=="ko"&&(Xn||x!=="onCompositionStart"?x==="onCompositionEnd"&&Xn&&(D=eg()):(Ur=u,id="value"in Ur?Ur.value:Ur.textContent,Xn=!0)),C=ga(l,x),0<C.length&&(x=new zp(x,t,null,r,u),d.push({event:x,listeners:C}),D?x.data=D:(D=ng(r),D!==null&&(x.data=D)))),(D=Cw?Ew(t,r):Tw(t,r))&&(l=ga(l,"onBeforeInput"),0<l.length&&(u=new zp("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:l}),u.data=D))}mg(d,e)})}function Ss(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ga(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=hs(t,r),s!=null&&n.unshift(Ss(t,s,i)),s=hs(t,e),s!=null&&n.push(Ss(t,s,i))),t=t.return}return n}function xn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ef(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,c=a.alternate,l=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&l!==null&&(a=l,i?(c=hs(r,s),c!=null&&o.unshift(Ss(r,c,a))):i||(c=hs(r,s),c!=null&&o.push(Ss(r,c,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Bw=/\r\n?/g,Uw=/\u0000|\uFFFD/g;function tf(t){return(typeof t=="string"?t:""+t).replace(Bw,`
`).replace(Uw,"")}function ho(t,e,r){if(e=tf(e),tf(t)!==e&&r)throw Error(E(425))}function va(){}var Yl=null,Xl=null;function Zl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eu=typeof setTimeout=="function"?setTimeout:void 0,zw=typeof clearTimeout=="function"?clearTimeout:void 0,rf=typeof Promise=="function"?Promise:void 0,qw=typeof queueMicrotask=="function"?queueMicrotask:typeof rf<"u"?function(t){return rf.resolve(null).then(t).catch(Qw)}:eu;function Qw(t){setTimeout(function(){throw t})}function Yc(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),vs(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);vs(e)}function Kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ti=Math.random().toString(36).slice(2),tr="__reactFiber$"+Ti,Rs="__reactProps$"+Ti,wr="__reactContainer$"+Ti,tu="__reactEvents$"+Ti,Hw="__reactListeners$"+Ti,Vw="__reactHandles$"+Ti;function dn(t){var e=t[tr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[wr]||r[tr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=nf(t);t!==null;){if(r=t[tr])return r;t=nf(t)}return e}t=r,r=t.parentNode}return null}function js(t){return t=t[tr]||t[wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function Ka(t){return t[Rs]||null}var ru=[],ri=-1;function on(t){return{current:t}}function me(t){0>ri||(t.current=ru[ri],ru[ri]=null,ri--)}function pe(t,e){ri++,ru[ri]=t.current,t.current=e}var rn={},Xe=on(rn),ct=on(!1),vn=rn;function gi(t,e){var r=t.type.contextTypes;if(!r)return rn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function lt(t){return t=t.childContextTypes,t!=null}function ya(){me(ct),me(Xe)}function sf(t,e,r){if(Xe.current!==rn)throw Error(E(168));pe(Xe,e),pe(ct,r)}function vg(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(E(108,k_(t)||"Unknown",i));return we({},r,n)}function _a(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rn,vn=Xe.current,pe(Xe,t),pe(ct,ct.current),!0}function of(t,e,r){var n=t.stateNode;if(!n)throw Error(E(169));r?(t=vg(t,e,vn),n.__reactInternalMemoizedMergedChildContext=t,me(ct),me(Xe),pe(Xe,t)):me(ct),pe(ct,r)}var hr=null,Wa=!1,Xc=!1;function yg(t){hr===null?hr=[t]:hr.push(t)}function Kw(t){Wa=!0,yg(t)}function an(){if(!Xc&&hr!==null){Xc=!0;var t=0,e=oe;try{var r=hr;for(oe=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}hr=null,Wa=!1}catch(i){throw hr!==null&&(hr=hr.slice(t+1)),qm(ed,an),i}finally{oe=e,Xc=!1}}return null}var ni=[],ii=0,wa=null,Sa=0,_t=[],wt=0,yn=null,mr=1,gr="";function ln(t,e){ni[ii++]=Sa,ni[ii++]=wa,wa=t,Sa=e}function _g(t,e,r){_t[wt++]=mr,_t[wt++]=gr,_t[wt++]=yn,yn=t;var n=mr;t=gr;var i=32-jt(n)-1;n&=~(1<<i),r+=1;var s=32-jt(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,mr=1<<32-jt(e)+i|r<<i|n,gr=s+t}else mr=1<<s|r<<i|n,gr=t}function ld(t){t.return!==null&&(ln(t,1),_g(t,1,0))}function ud(t){for(;t===wa;)wa=ni[--ii],ni[ii]=null,Sa=ni[--ii],ni[ii]=null;for(;t===yn;)yn=_t[--wt],_t[wt]=null,gr=_t[--wt],_t[wt]=null,mr=_t[--wt],_t[wt]=null}var ht=null,ft=null,ve=!1,Nt=null;function wg(t,e){var r=Rt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function af(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ht=t,ft=Kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ht=t,ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=yn!==null?{id:mr,overflow:gr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Rt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ht=t,ft=null,!0):!1;default:return!1}}function nu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iu(t){if(ve){var e=ft;if(e){var r=e;if(!af(t,e)){if(nu(t))throw Error(E(418));e=Kr(r.nextSibling);var n=ht;e&&af(t,e)?wg(n,r):(t.flags=t.flags&-4097|2,ve=!1,ht=t)}}else{if(nu(t))throw Error(E(418));t.flags=t.flags&-4097|2,ve=!1,ht=t}}}function cf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ht=t}function mo(t){if(t!==ht)return!1;if(!ve)return cf(t),ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zl(t.type,t.memoizedProps)),e&&(e=ft)){if(nu(t))throw Sg(),Error(E(418));for(;e;)wg(t,e),e=Kr(e.nextSibling)}if(cf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ft=Kr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ft=null}}else ft=ht?Kr(t.stateNode.nextSibling):null;return!0}function Sg(){for(var t=ft;t;)t=Kr(t.nextSibling)}function vi(){ft=ht=null,ve=!1}function dd(t){Nt===null?Nt=[t]:Nt.push(t)}var Ww=Cr.ReactCurrentBatchConfig;function Lt(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Ra=on(null),ba=null,si=null,pd=null;function fd(){pd=si=ba=null}function hd(t){var e=Ra.current;me(Ra),t._currentValue=e}function su(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function pi(t,e){ba=t,pd=si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(at=!0),t.firstContext=null)}function Et(t){var e=t._currentValue;if(pd!==t)if(t={context:t,memoizedValue:e,next:null},si===null){if(ba===null)throw Error(E(308));si=t,ba.dependencies={lanes:0,firstContext:t}}else si=si.next=t;return e}var pn=null;function md(t){pn===null?pn=[t]:pn.push(t)}function Rg(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,md(e)):(r.next=i.next,i.next=r),e.interleaved=r,Sr(t,n)}function Sr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ar=!1;function gd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Z&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Sr(t,r)}return i=n.interleaved,i===null?(e.next=e,md(n)):(e.next=i.next,i.next=e),n.interleaved=e,Sr(t,r)}function Ho(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,td(t,r)}}function lf(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ca(t,e,r,n){var i=t.updateQueue;Ar=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=l=c=null,a=s;do{var p=a.lane,h=a.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=t,m=a;switch(p=e,h=r,m.tag){case 1:if(f=m.payload,typeof f=="function"){d=f.call(h,d,p);break e}d=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,p=typeof f=="function"?f.call(h,d,p):f,p==null)break e;d=we({},d,p);break e;case 2:Ar=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else h={eventTime:h,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=d):u=u.next=h,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wn|=o,t.lanes=o,t.memoizedState=d}}function uf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(E(191,i));i.call(n)}}}var Cg=new Rm.Component().refs;function ou(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:we({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ga={isMounted:function(t){return(t=t._reactInternals)?Cn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=rt(),i=Jr(t),s=vr(n,i);s.payload=e,r!=null&&(s.callback=r),e=Wr(t,s,i),e!==null&&(At(e,t,i,n),Ho(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=rt(),i=Jr(t),s=vr(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Wr(t,s,i),e!==null&&(At(e,t,i,n),Ho(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=rt(),n=Jr(t),i=vr(r,n);i.tag=2,e!=null&&(i.callback=e),e=Wr(t,i,n),e!==null&&(At(e,t,n,r),Ho(e,t,n))}};function df(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!_s(r,n)||!_s(i,s):!0}function Eg(t,e,r){var n=!1,i=rn,s=e.contextType;return typeof s=="object"&&s!==null?s=Et(s):(i=lt(e)?vn:Xe.current,n=e.contextTypes,s=(n=n!=null)?gi(t,i):rn),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ga,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pf(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ga.enqueueReplaceState(e,e.state,null)}function au(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=Cg,gd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Et(s):(s=lt(e)?vn:Xe.current,i.context=gi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ou(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ga.enqueueReplaceState(i,i.state,null),Ca(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ui(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(E(309));var n=r.stateNode}if(!n)throw Error(E(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Cg&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!r._owner)throw Error(E(290,t))}return t}function go(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ff(t){var e=t._init;return e(t._payload)}function Tg(t){function e(v,y){if(t){var _=v.deletions;_===null?(v.deletions=[y],v.flags|=16):_.push(y)}}function r(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=Yr(v,y),v.index=0,v.sibling=null,v}function s(v,y,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<y?(v.flags|=2,y):_):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,_,w){return y===null||y.tag!==6?(y=sl(_,v.mode,w),y.return=v,y):(y=i(y,_),y.return=v,y)}function c(v,y,_,w){var b=_.type;return b===Yn?u(v,y,_.props.children,w,_.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===jr&&ff(b)===y.type)?(w=i(y,_.props),w.ref=Ui(v,y,_),w.return=v,w):(w=Yo(_.type,_.key,_.props,null,v.mode,w),w.ref=Ui(v,y,_),w.return=v,w)}function l(v,y,_,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=ol(_,v.mode,w),y.return=v,y):(y=i(y,_.children||[]),y.return=v,y)}function u(v,y,_,w,b){return y===null||y.tag!==7?(y=gn(_,v.mode,w,b),y.return=v,y):(y=i(y,_),y.return=v,y)}function d(v,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=sl(""+y,v.mode,_),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case io:return _=Yo(y.type,y.key,y.props,null,v.mode,_),_.ref=Ui(v,null,y),_.return=v,_;case Jn:return y=ol(y,v.mode,_),y.return=v,y;case jr:var w=y._init;return d(v,w(y._payload),_)}if(Yi(y)||ji(y))return y=gn(y,v.mode,_,null),y.return=v,y;go(v,y)}return null}function p(v,y,_,w){var b=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return b!==null?null:a(v,y,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case io:return _.key===b?c(v,y,_,w):null;case Jn:return _.key===b?l(v,y,_,w):null;case jr:return b=_._init,p(v,y,b(_._payload),w)}if(Yi(_)||ji(_))return b!==null?null:u(v,y,_,w,null);go(v,_)}return null}function h(v,y,_,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(_)||null,a(y,v,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case io:return v=v.get(w.key===null?_:w.key)||null,c(y,v,w,b);case Jn:return v=v.get(w.key===null?_:w.key)||null,l(y,v,w,b);case jr:var C=w._init;return h(v,y,_,C(w._payload),b)}if(Yi(w)||ji(w))return v=v.get(_)||null,u(y,v,w,b,null);go(y,w)}return null}function f(v,y,_,w){for(var b=null,C=null,D=y,x=y=0,H=null;D!==null&&x<_.length;x++){D.index>x?(H=D,D=null):H=D.sibling;var O=p(v,D,_[x],w);if(O===null){D===null&&(D=H);break}t&&D&&O.alternate===null&&e(v,D),y=s(O,y,x),C===null?b=O:C.sibling=O,C=O,D=H}if(x===_.length)return r(v,D),ve&&ln(v,x),b;if(D===null){for(;x<_.length;x++)D=d(v,_[x],w),D!==null&&(y=s(D,y,x),C===null?b=D:C.sibling=D,C=D);return ve&&ln(v,x),b}for(D=n(v,D);x<_.length;x++)H=h(D,v,x,_[x],w),H!==null&&(t&&H.alternate!==null&&D.delete(H.key===null?x:H.key),y=s(H,y,x),C===null?b=H:C.sibling=H,C=H);return t&&D.forEach(function(ue){return e(v,ue)}),ve&&ln(v,x),b}function m(v,y,_,w){var b=ji(_);if(typeof b!="function")throw Error(E(150));if(_=b.call(_),_==null)throw Error(E(151));for(var C=b=null,D=y,x=y=0,H=null,O=_.next();D!==null&&!O.done;x++,O=_.next()){D.index>x?(H=D,D=null):H=D.sibling;var ue=p(v,D,O.value,w);if(ue===null){D===null&&(D=H);break}t&&D&&ue.alternate===null&&e(v,D),y=s(ue,y,x),C===null?b=ue:C.sibling=ue,C=ue,D=H}if(O.done)return r(v,D),ve&&ln(v,x),b;if(D===null){for(;!O.done;x++,O=_.next())O=d(v,O.value,w),O!==null&&(y=s(O,y,x),C===null?b=O:C.sibling=O,C=O);return ve&&ln(v,x),b}for(D=n(v,D);!O.done;x++,O=_.next())O=h(D,v,x,O.value,w),O!==null&&(t&&O.alternate!==null&&D.delete(O.key===null?x:O.key),y=s(O,y,x),C===null?b=O:C.sibling=O,C=O);return t&&D.forEach(function(ge){return e(v,ge)}),ve&&ln(v,x),b}function g(v,y,_,w){if(typeof _=="object"&&_!==null&&_.type===Yn&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case io:e:{for(var b=_.key,C=y;C!==null;){if(C.key===b){if(b=_.type,b===Yn){if(C.tag===7){r(v,C.sibling),y=i(C,_.props.children),y.return=v,v=y;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===jr&&ff(b)===C.type){r(v,C.sibling),y=i(C,_.props),y.ref=Ui(v,C,_),y.return=v,v=y;break e}r(v,C);break}else e(v,C);C=C.sibling}_.type===Yn?(y=gn(_.props.children,v.mode,w,_.key),y.return=v,v=y):(w=Yo(_.type,_.key,_.props,null,v.mode,w),w.ref=Ui(v,y,_),w.return=v,v=w)}return o(v);case Jn:e:{for(C=_.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){r(v,y.sibling),y=i(y,_.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else e(v,y);y=y.sibling}y=ol(_,v.mode,w),y.return=v,v=y}return o(v);case jr:return C=_._init,g(v,y,C(_._payload),w)}if(Yi(_))return f(v,y,_,w);if(ji(_))return m(v,y,_,w);go(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(r(v,y.sibling),y=i(y,_),y.return=v,v=y):(r(v,y),y=sl(_,v.mode,w),y.return=v,v=y),o(v)):r(v,y)}return g}var yi=Tg(!0),Pg=Tg(!1),As={},ir=on(As),bs=on(As),Cs=on(As);function fn(t){if(t===As)throw Error(E(174));return t}function vd(t,e){switch(pe(Cs,e),pe(bs,t),pe(ir,As),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$l(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$l(e,t)}me(ir),pe(ir,e)}function _i(){me(ir),me(bs),me(Cs)}function Dg(t){fn(Cs.current);var e=fn(ir.current),r=$l(e,t.type);e!==r&&(pe(bs,t),pe(ir,r))}function yd(t){bs.current===t&&(me(ir),me(bs))}var ye=on(0);function Ea(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zc=[];function _d(){for(var t=0;t<Zc.length;t++)Zc[t]._workInProgressVersionPrimary=null;Zc.length=0}var Vo=Cr.ReactCurrentDispatcher,el=Cr.ReactCurrentBatchConfig,_n=0,_e=null,Be=null,ze=null,Ta=!1,os=!1,Es=0,Gw=0;function We(){throw Error(E(321))}function wd(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ft(t[r],e[r]))return!1;return!0}function Sd(t,e,r,n,i,s){if(_n=s,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vo.current=t===null||t.memoizedState===null?Zw:eS,t=r(n,i),os){s=0;do{if(os=!1,Es=0,25<=s)throw Error(E(301));s+=1,ze=Be=null,e.updateQueue=null,Vo.current=tS,t=r(n,i)}while(os)}if(Vo.current=Pa,e=Be!==null&&Be.next!==null,_n=0,ze=Be=_e=null,Ta=!1,e)throw Error(E(300));return t}function Rd(){var t=Es!==0;return Es=0,t}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?_e.memoizedState=ze=t:ze=ze.next=t,ze}function Tt(){if(Be===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=ze===null?_e.memoizedState:ze.next;if(e!==null)ze=e,Be=t;else{if(t===null)throw Error(E(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},ze===null?_e.memoizedState=ze=t:ze=ze.next=t}return ze}function Ts(t,e){return typeof e=="function"?e(t):e}function tl(t){var e=Tt(),r=e.queue;if(r===null)throw Error(E(311));r.lastRenderedReducer=t;var n=Be,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((_n&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=n):c=c.next=d,_e.lanes|=u,wn|=u}l=l.next}while(l!==null&&l!==s);c===null?o=n:c.next=a,Ft(n,e.memoizedState)||(at=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,_e.lanes|=s,wn|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function rl(t){var e=Tt(),r=e.queue;if(r===null)throw Error(E(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ft(s,e.memoizedState)||(at=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function xg(){}function kg(t,e){var r=_e,n=Tt(),i=e(),s=!Ft(n.memoizedState,i);if(s&&(n.memoizedState=i,at=!0),n=n.queue,bd(Mg.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||ze!==null&&ze.memoizedState.tag&1){if(r.flags|=2048,Ps(9,Lg.bind(null,r,n,i,e),void 0,null),qe===null)throw Error(E(349));_n&30||Og(r,e,i)}return i}function Og(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Lg(t,e,r,n){e.value=r,e.getSnapshot=n,Ig(e)&&Ng(t)}function Mg(t,e,r){return r(function(){Ig(e)&&Ng(t)})}function Ig(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ft(t,r)}catch{return!0}}function Ng(t){var e=Sr(t,1);e!==null&&At(e,t,1,-1)}function hf(t){var e=er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:t},e.queue=t,t=t.dispatch=Xw.bind(null,_e,t),[e.memoizedState,t]}function Ps(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function jg(){return Tt().memoizedState}function Ko(t,e,r,n){var i=er();_e.flags|=t,i.memoizedState=Ps(1|e,r,void 0,n===void 0?null:n)}function Ja(t,e,r,n){var i=Tt();n=n===void 0?null:n;var s=void 0;if(Be!==null){var o=Be.memoizedState;if(s=o.destroy,n!==null&&wd(n,o.deps)){i.memoizedState=Ps(e,r,s,n);return}}_e.flags|=t,i.memoizedState=Ps(1|e,r,s,n)}function mf(t,e){return Ko(8390656,8,t,e)}function bd(t,e){return Ja(2048,8,t,e)}function Ag(t,e){return Ja(4,2,t,e)}function Fg(t,e){return Ja(4,4,t,e)}function $g(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bg(t,e,r){return r=r!=null?r.concat([t]):null,Ja(4,4,$g.bind(null,e,t),r)}function Cd(){}function Ug(t,e){var r=Tt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&wd(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function zg(t,e){var r=Tt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&wd(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function qg(t,e,r){return _n&21?(Ft(r,e)||(r=Vm(),_e.lanes|=r,wn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,at=!0),t.memoizedState=r)}function Jw(t,e){var r=oe;oe=r!==0&&4>r?r:4,t(!0);var n=el.transition;el.transition={};try{t(!1),e()}finally{oe=r,el.transition=n}}function Qg(){return Tt().memoizedState}function Yw(t,e,r){var n=Jr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Hg(t))Vg(e,r);else if(r=Rg(t,e,r,n),r!==null){var i=rt();At(r,t,n,i),Kg(r,e,n)}}function Xw(t,e,r){var n=Jr(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Hg(t))Vg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Ft(a,o)){var c=e.interleaved;c===null?(i.next=i,md(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=Rg(t,e,i,n),r!==null&&(i=rt(),At(r,t,n,i),Kg(r,e,n))}}function Hg(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function Vg(t,e){os=Ta=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Kg(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,td(t,r)}}var Pa={readContext:Et,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},Zw={readContext:Et,useCallback:function(t,e){return er().memoizedState=[t,e===void 0?null:e],t},useContext:Et,useEffect:mf,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ko(4194308,4,$g.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ko(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ko(4,2,t,e)},useMemo:function(t,e){var r=er();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=er();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Yw.bind(null,_e,t),[n.memoizedState,t]},useRef:function(t){var e=er();return t={current:t},e.memoizedState=t},useState:hf,useDebugValue:Cd,useDeferredValue:function(t){return er().memoizedState=t},useTransition:function(){var t=hf(!1),e=t[0];return t=Jw.bind(null,t[1]),er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=_e,i=er();if(ve){if(r===void 0)throw Error(E(407));r=r()}else{if(r=e(),qe===null)throw Error(E(349));_n&30||Og(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,mf(Mg.bind(null,n,s,t),[t]),n.flags|=2048,Ps(9,Lg.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=er(),e=qe.identifierPrefix;if(ve){var r=gr,n=mr;r=(n&~(1<<32-jt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Es++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Gw++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eS={readContext:Et,useCallback:Ug,useContext:Et,useEffect:bd,useImperativeHandle:Bg,useInsertionEffect:Ag,useLayoutEffect:Fg,useMemo:zg,useReducer:tl,useRef:jg,useState:function(){return tl(Ts)},useDebugValue:Cd,useDeferredValue:function(t){var e=Tt();return qg(e,Be.memoizedState,t)},useTransition:function(){var t=tl(Ts)[0],e=Tt().memoizedState;return[t,e]},useMutableSource:xg,useSyncExternalStore:kg,useId:Qg,unstable_isNewReconciler:!1},tS={readContext:Et,useCallback:Ug,useContext:Et,useEffect:bd,useImperativeHandle:Bg,useInsertionEffect:Ag,useLayoutEffect:Fg,useMemo:zg,useReducer:rl,useRef:jg,useState:function(){return rl(Ts)},useDebugValue:Cd,useDeferredValue:function(t){var e=Tt();return Be===null?e.memoizedState=t:qg(e,Be.memoizedState,t)},useTransition:function(){var t=rl(Ts)[0],e=Tt().memoizedState;return[t,e]},useMutableSource:xg,useSyncExternalStore:kg,useId:Qg,unstable_isNewReconciler:!1};function wi(t,e){try{var r="",n=e;do r+=x_(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function nl(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function cu(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var rS=typeof WeakMap=="function"?WeakMap:Map;function Wg(t,e,r){r=vr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){xa||(xa=!0,yu=n),cu(t,e)},r}function Gg(t,e,r){r=vr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){cu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){cu(t,e),typeof n!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function gf(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new rS;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=gS.bind(null,t,e,r),e.then(t,t))}function vf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yf(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=vr(-1,1),e.tag=2,Wr(r,e,1))),r.lanes|=1),t)}var nS=Cr.ReactCurrentOwner,at=!1;function et(t,e,r,n){e.child=t===null?Pg(e,null,r,n):yi(e,t.child,r,n)}function _f(t,e,r,n,i){r=r.render;var s=e.ref;return pi(e,i),n=Sd(t,e,r,n,s,i),r=Rd(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Rr(t,e,i)):(ve&&r&&ld(e),e.flags|=1,et(t,e,n,i),e.child)}function wf(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!Ld(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Jg(t,e,s,n,i)):(t=Yo(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:_s,r(o,n)&&t.ref===e.ref)return Rr(t,e,i)}return e.flags|=1,t=Yr(s,n),t.ref=e.ref,t.return=e,e.child=t}function Jg(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(_s(s,n)&&t.ref===e.ref)if(at=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(at=!0);else return e.lanes=t.lanes,Rr(t,e,i)}return lu(t,e,r,n,i)}function Yg(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(ai,pt),pt|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(ai,pt),pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,pe(ai,pt),pt|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,pe(ai,pt),pt|=n;return et(t,e,i,r),e.child}function Xg(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function lu(t,e,r,n,i){var s=lt(r)?vn:Xe.current;return s=gi(e,s),pi(e,i),r=Sd(t,e,r,n,s,i),n=Rd(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Rr(t,e,i)):(ve&&n&&ld(e),e.flags|=1,et(t,e,r,i),e.child)}function Sf(t,e,r,n,i){if(lt(r)){var s=!0;_a(e)}else s=!1;if(pi(e,i),e.stateNode===null)Wo(t,e),Eg(e,r,n),au(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=r.contextType;typeof l=="object"&&l!==null?l=Et(l):(l=lt(r)?vn:Xe.current,l=gi(e,l));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==l)&&pf(e,o,n,l),Ar=!1;var p=e.memoizedState;o.state=p,Ca(e,n,o,i),c=e.memoizedState,a!==n||p!==c||ct.current||Ar?(typeof u=="function"&&(ou(e,r,u,n),c=e.memoizedState),(a=Ar||df(e,r,a,n,p,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=l,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,bg(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Lt(e.type,a),o.props=l,d=e.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Et(c):(c=lt(r)?vn:Xe.current,c=gi(e,c));var h=r.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==c)&&pf(e,o,n,c),Ar=!1,p=e.memoizedState,o.state=p,Ca(e,n,o,i);var f=e.memoizedState;a!==d||p!==f||ct.current||Ar?(typeof h=="function"&&(ou(e,r,h,n),f=e.memoizedState),(l=Ar||df(e,r,l,n,p,f,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,f,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,f,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=f),o.props=n,o.state=f,o.context=c,n=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return uu(t,e,r,n,s,i)}function uu(t,e,r,n,i,s){Xg(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&of(e,r,!1),Rr(t,e,s);n=e.stateNode,nS.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=yi(e,t.child,null,s),e.child=yi(e,null,a,s)):et(t,e,a,s),e.memoizedState=n.state,i&&of(e,r,!0),e.child}function Zg(t){var e=t.stateNode;e.pendingContext?sf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sf(t,e.context,!1),vd(t,e.containerInfo)}function Rf(t,e,r,n,i){return vi(),dd(i),e.flags|=256,et(t,e,r,n),e.child}var du={dehydrated:null,treeContext:null,retryLane:0};function pu(t){return{baseLanes:t,cachePool:null,transitions:null}}function ev(t,e,r){var n=e.pendingProps,i=ye.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),pe(ye,i&1),t===null)return iu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Za(o,n,0,null),t=gn(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pu(r),e.memoizedState=du,t):Ed(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return iS(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Yr(i,c),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Yr(a,s):(s=gn(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?pu(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=du,n}return s=t.child,t=s.sibling,n=Yr(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Ed(t,e){return e=Za({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vo(t,e,r,n){return n!==null&&dd(n),yi(e,t.child,null,r),t=Ed(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iS(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=nl(Error(E(422))),vo(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Za({mode:"visible",children:n.children},i,0,null),s=gn(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&yi(e,t.child,null,o),e.child.memoizedState=pu(o),e.memoizedState=du,s);if(!(e.mode&1))return vo(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(E(419)),n=nl(s,n,void 0),vo(t,e,o,n)}if(a=(o&t.childLanes)!==0,at||a){if(n=qe,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Sr(t,i),At(n,t,i,-1))}return Od(),n=nl(Error(E(421))),vo(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ft=Kr(i.nextSibling),ht=e,ve=!0,Nt=null,t!==null&&(_t[wt++]=mr,_t[wt++]=gr,_t[wt++]=yn,mr=t.id,gr=t.overflow,yn=e),e=Ed(e,n.children),e.flags|=4096,e)}function bf(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),su(t.return,e,r)}function il(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function tv(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(et(t,e,n.children,r),n=ye.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bf(t,r,e);else if(t.tag===19)bf(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(pe(ye,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Ea(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),il(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ea(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}il(e,!0,r,null,s);break;case"together":il(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),wn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,r=Yr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Yr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function sS(t,e,r){switch(e.tag){case 3:Zg(e),vi();break;case 5:Dg(e);break;case 1:lt(e.type)&&_a(e);break;case 4:vd(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;pe(Ra,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(pe(ye,ye.current&1),e.flags|=128,null):r&e.child.childLanes?ev(t,e,r):(pe(ye,ye.current&1),t=Rr(t,e,r),t!==null?t.sibling:null);pe(ye,ye.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return tv(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pe(ye,ye.current),n)break;return null;case 22:case 23:return e.lanes=0,Yg(t,e,r)}return Rr(t,e,r)}var rv,fu,nv,iv;rv=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};fu=function(){};nv=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,fn(ir.current);var s=null;switch(r){case"input":i=Nl(t,i),n=Nl(t,n),s=[];break;case"select":i=we({},i,{value:void 0}),n=we({},n,{value:void 0}),s=[];break;case"textarea":i=Fl(t,i),n=Fl(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=va)}Bl(r,n);var o;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ps.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var c=n[l];if(a=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ps.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&he("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}r&&(s=s||[]).push("style",r);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};iv=function(t,e,r,n){r!==n&&(e.flags|=4)};function zi(t,e){if(!ve)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function oS(t,e,r){var n=e.pendingProps;switch(ud(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(e),null;case 1:return lt(e.type)&&ya(),Ge(e),null;case 3:return n=e.stateNode,_i(),me(ct),me(Xe),_d(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(mo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nt!==null&&(Su(Nt),Nt=null))),fu(t,e),Ge(e),null;case 5:yd(e);var i=fn(Cs.current);if(r=e.type,t!==null&&e.stateNode!=null)nv(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(E(166));return Ge(e),null}if(t=fn(ir.current),mo(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[tr]=e,n[Rs]=s,t=(e.mode&1)!==0,r){case"dialog":he("cancel",n),he("close",n);break;case"iframe":case"object":case"embed":he("load",n);break;case"video":case"audio":for(i=0;i<Zi.length;i++)he(Zi[i],n);break;case"source":he("error",n);break;case"img":case"image":case"link":he("error",n),he("load",n);break;case"details":he("toggle",n);break;case"input":Op(n,s),he("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},he("invalid",n);break;case"textarea":Mp(n,s),he("invalid",n)}Bl(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&ho(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ho(n.textContent,a,t),i=["children",""+a]):ps.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&he("scroll",n)}switch(r){case"input":so(n),Lp(n,s,!0);break;case"textarea":so(n),Ip(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=va)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Om(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[tr]=e,t[Rs]=n,rv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ul(r,n),r){case"dialog":he("cancel",t),he("close",t),i=n;break;case"iframe":case"object":case"embed":he("load",t),i=n;break;case"video":case"audio":for(i=0;i<Zi.length;i++)he(Zi[i],t);i=n;break;case"source":he("error",t),i=n;break;case"img":case"image":case"link":he("error",t),he("load",t),i=n;break;case"details":he("toggle",t),i=n;break;case"input":Op(t,n),i=Nl(t,n),he("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=we({},n,{value:void 0}),he("invalid",t);break;case"textarea":Mp(t,n),i=Fl(t,n),he("invalid",t);break;default:i=n}Bl(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Im(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Lm(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&fs(t,c):typeof c=="number"&&fs(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ps.hasOwnProperty(s)?c!=null&&s==="onScroll"&&he("scroll",t):c!=null&&Gu(t,s,c,o))}switch(r){case"input":so(t),Lp(t,n,!1);break;case"textarea":so(t),Ip(t);break;case"option":n.value!=null&&t.setAttribute("value",""+tn(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?ci(t,!!n.multiple,s,!1):n.defaultValue!=null&&ci(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=va)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ge(e),null;case 6:if(t&&e.stateNode!=null)iv(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(E(166));if(r=fn(Cs.current),fn(ir.current),mo(e)){if(n=e.stateNode,r=e.memoizedProps,n[tr]=e,(s=n.nodeValue!==r)&&(t=ht,t!==null))switch(t.tag){case 3:ho(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ho(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[tr]=e,e.stateNode=n}return Ge(e),null;case 13:if(me(ye),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ve&&ft!==null&&e.mode&1&&!(e.flags&128))Sg(),vi(),e.flags|=98560,s=!1;else if(s=mo(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[tr]=e}else vi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),s=!1}else Nt!==null&&(Su(Nt),Nt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?Ue===0&&(Ue=3):Od())),e.updateQueue!==null&&(e.flags|=4),Ge(e),null);case 4:return _i(),fu(t,e),t===null&&ws(e.stateNode.containerInfo),Ge(e),null;case 10:return hd(e.type._context),Ge(e),null;case 17:return lt(e.type)&&ya(),Ge(e),null;case 19:if(me(ye),s=e.memoizedState,s===null)return Ge(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)zi(s,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ea(t),o!==null){for(e.flags|=128,zi(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return pe(ye,ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&De()>Si&&(e.flags|=128,n=!0,zi(s,!1),e.lanes=4194304)}else{if(!n)if(t=Ea(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),zi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ve)return Ge(e),null}else 2*De()-s.renderingStartTime>Si&&r!==1073741824&&(e.flags|=128,n=!0,zi(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=De(),e.sibling=null,r=ye.current,pe(ye,n?r&1|2:r&1),e):(Ge(e),null);case 22:case 23:return kd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?pt&1073741824&&(Ge(e),e.subtreeFlags&6&&(e.flags|=8192)):Ge(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function aS(t,e){switch(ud(e),e.tag){case 1:return lt(e.type)&&ya(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _i(),me(ct),me(Xe),_d(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yd(e),null;case 13:if(me(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));vi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(ye),null;case 4:return _i(),null;case 10:return hd(e.type._context),null;case 22:case 23:return kd(),null;case 24:return null;default:return null}}var yo=!1,Ye=!1,cS=typeof WeakSet=="function"?WeakSet:Set,k=null;function oi(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){be(t,e,n)}else r.current=null}function hu(t,e,r){try{r()}catch(n){be(t,e,n)}}var Cf=!1;function lS(t,e){if(Yl=ha,t=cg(),cd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,p=null;t:for(;;){for(var h;d!==r||i!==0&&d.nodeType!==3||(a=o+i),d!==s||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)p=d,d=h;for(;;){if(d===t)break t;if(p===r&&++l===i&&(a=o),p===s&&++u===n&&(c=o),(h=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=h}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xl={focusedElem:t,selectionRange:r},ha=!1,k=e;k!==null;)if(e=k,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,k=t;else for(;k!==null;){e=k;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,g=f.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Lt(e.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(w){be(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,k=t;break}k=e.return}return f=Cf,Cf=!1,f}function as(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&hu(e,r,s)}i=i.next}while(i!==n)}}function Ya(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function mu(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function sv(t){var e=t.alternate;e!==null&&(t.alternate=null,sv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tr],delete e[Rs],delete e[tu],delete e[Hw],delete e[Vw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ov(t){return t.tag===5||t.tag===3||t.tag===4}function Ef(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ov(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gu(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=va));else if(n!==4&&(t=t.child,t!==null))for(gu(t,e,r),t=t.sibling;t!==null;)gu(t,e,r),t=t.sibling}function vu(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(vu(t,e,r),t=t.sibling;t!==null;)vu(t,e,r),t=t.sibling}var Qe=null,Mt=!1;function xr(t,e,r){for(r=r.child;r!==null;)av(t,e,r),r=r.sibling}function av(t,e,r){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(qa,r)}catch{}switch(r.tag){case 5:Ye||oi(r,e);case 6:var n=Qe,i=Mt;Qe=null,xr(t,e,r),Qe=n,Mt=i,Qe!==null&&(Mt?(t=Qe,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Qe.removeChild(r.stateNode));break;case 18:Qe!==null&&(Mt?(t=Qe,r=r.stateNode,t.nodeType===8?Yc(t.parentNode,r):t.nodeType===1&&Yc(t,r),vs(t)):Yc(Qe,r.stateNode));break;case 4:n=Qe,i=Mt,Qe=r.stateNode.containerInfo,Mt=!0,xr(t,e,r),Qe=n,Mt=i;break;case 0:case 11:case 14:case 15:if(!Ye&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&hu(r,e,o),i=i.next}while(i!==n)}xr(t,e,r);break;case 1:if(!Ye&&(oi(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){be(r,e,a)}xr(t,e,r);break;case 21:xr(t,e,r);break;case 22:r.mode&1?(Ye=(n=Ye)||r.memoizedState!==null,xr(t,e,r),Ye=n):xr(t,e,r);break;default:xr(t,e,r)}}function Tf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new cS),e.forEach(function(n){var i=yS.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function kt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qe=a.stateNode,Mt=!1;break e;case 3:Qe=a.stateNode.containerInfo,Mt=!0;break e;case 4:Qe=a.stateNode.containerInfo,Mt=!0;break e}a=a.return}if(Qe===null)throw Error(E(160));av(s,o,i),Qe=null,Mt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){be(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cv(e,t),e=e.sibling}function cv(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kt(e,t),Qt(t),n&4){try{as(3,t,t.return),Ya(3,t)}catch(m){be(t,t.return,m)}try{as(5,t,t.return)}catch(m){be(t,t.return,m)}}break;case 1:kt(e,t),Qt(t),n&512&&r!==null&&oi(r,r.return);break;case 5:if(kt(e,t),Qt(t),n&512&&r!==null&&oi(r,r.return),t.flags&32){var i=t.stateNode;try{fs(i,"")}catch(m){be(t,t.return,m)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&xm(i,s),Ul(a,o);var l=Ul(a,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?Im(i,d):u==="dangerouslySetInnerHTML"?Lm(i,d):u==="children"?fs(i,d):Gu(i,u,d,l)}switch(a){case"input":jl(i,s);break;case"textarea":km(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ci(i,!!s.multiple,h,!1):p!==!!s.multiple&&(s.defaultValue!=null?ci(i,!!s.multiple,s.defaultValue,!0):ci(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rs]=s}catch(m){be(t,t.return,m)}}break;case 6:if(kt(e,t),Qt(t),n&4){if(t.stateNode===null)throw Error(E(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){be(t,t.return,m)}}break;case 3:if(kt(e,t),Qt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{vs(e.containerInfo)}catch(m){be(t,t.return,m)}break;case 4:kt(e,t),Qt(t);break;case 13:kt(e,t),Qt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Dd=De())),n&4&&Tf(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Ye=(l=Ye)||u,kt(e,t),Ye=l):kt(e,t),Qt(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(k=t,u=t.child;u!==null;){for(d=k=u;k!==null;){switch(p=k,h=p.child,p.tag){case 0:case 11:case 14:case 15:as(4,p,p.return);break;case 1:oi(p,p.return);var f=p.stateNode;if(typeof f.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(m){be(n,r,m)}}break;case 5:oi(p,p.return);break;case 22:if(p.memoizedState!==null){Df(d);continue}}h!==null?(h.return=p,k=h):Df(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Mm("display",o))}catch(m){be(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){be(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:kt(e,t),Qt(t),n&4&&Tf(t);break;case 21:break;default:kt(e,t),Qt(t)}}function Qt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ov(r)){var n=r;break e}r=r.return}throw Error(E(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(fs(i,""),n.flags&=-33);var s=Ef(t);vu(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Ef(t);gu(t,a,o);break;default:throw Error(E(161))}}catch(c){be(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uS(t,e,r){k=t,lv(t)}function lv(t,e,r){for(var n=(t.mode&1)!==0;k!==null;){var i=k,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||yo;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Ye;a=yo;var l=Ye;if(yo=o,(Ye=c)&&!l)for(k=i;k!==null;)o=k,c=o.child,o.tag===22&&o.memoizedState!==null?xf(i):c!==null?(c.return=o,k=c):xf(i);for(;s!==null;)k=s,lv(s),s=s.sibling;k=i,yo=a,Ye=l}Pf(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,k=s):Pf(t)}}function Pf(t){for(;k!==null;){var e=k;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ye||Ya(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ye)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Lt(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&uf(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}uf(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&vs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Ye||e.flags&512&&mu(e)}catch(p){be(e,e.return,p)}}if(e===t){k=null;break}if(r=e.sibling,r!==null){r.return=e.return,k=r;break}k=e.return}}function Df(t){for(;k!==null;){var e=k;if(e===t){k=null;break}var r=e.sibling;if(r!==null){r.return=e.return,k=r;break}k=e.return}}function xf(t){for(;k!==null;){var e=k;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ya(4,e)}catch(c){be(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){be(e,i,c)}}var s=e.return;try{mu(e)}catch(c){be(e,s,c)}break;case 5:var o=e.return;try{mu(e)}catch(c){be(e,o,c)}}}catch(c){be(e,e.return,c)}if(e===t){k=null;break}var a=e.sibling;if(a!==null){a.return=e.return,k=a;break}k=e.return}}var dS=Math.ceil,Da=Cr.ReactCurrentDispatcher,Td=Cr.ReactCurrentOwner,bt=Cr.ReactCurrentBatchConfig,Z=0,qe=null,ke=null,He=0,pt=0,ai=on(0),Ue=0,Ds=null,wn=0,Xa=0,Pd=0,cs=null,ot=null,Dd=0,Si=1/0,fr=null,xa=!1,yu=null,Gr=null,_o=!1,zr=null,ka=0,ls=0,_u=null,Go=-1,Jo=0;function rt(){return Z&6?De():Go!==-1?Go:Go=De()}function Jr(t){return t.mode&1?Z&2&&He!==0?He&-He:Ww.transition!==null?(Jo===0&&(Jo=Vm()),Jo):(t=oe,t!==0||(t=window.event,t=t===void 0?16:Zm(t.type)),t):1}function At(t,e,r,n){if(50<ls)throw ls=0,_u=null,Error(E(185));Is(t,r,n),(!(Z&2)||t!==qe)&&(t===qe&&(!(Z&2)&&(Xa|=r),Ue===4&&Br(t,He)),ut(t,n),r===1&&Z===0&&!(e.mode&1)&&(Si=De()+500,Wa&&an()))}function ut(t,e){var r=t.callbackNode;W_(t,e);var n=fa(t,t===qe?He:0);if(n===0)r!==null&&Ap(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Ap(r),e===1)t.tag===0?Kw(kf.bind(null,t)):yg(kf.bind(null,t)),qw(function(){!(Z&6)&&an()}),r=null;else{switch(Km(n)){case 1:r=ed;break;case 4:r=Qm;break;case 16:r=pa;break;case 536870912:r=Hm;break;default:r=pa}r=vv(r,uv.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function uv(t,e){if(Go=-1,Jo=0,Z&6)throw Error(E(327));var r=t.callbackNode;if(fi()&&t.callbackNode!==r)return null;var n=fa(t,t===qe?He:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Oa(t,n);else{e=n;var i=Z;Z|=2;var s=pv();(qe!==t||He!==e)&&(fr=null,Si=De()+500,mn(t,e));do try{hS();break}catch(a){dv(t,a)}while(!0);fd(),Da.current=s,Z=i,ke!==null?e=0:(qe=null,He=0,e=Ue)}if(e!==0){if(e===2&&(i=Vl(t),i!==0&&(n=i,e=wu(t,i))),e===1)throw r=Ds,mn(t,0),Br(t,n),ut(t,De()),r;if(e===6)Br(t,n);else{if(i=t.current.alternate,!(n&30)&&!pS(i)&&(e=Oa(t,n),e===2&&(s=Vl(t),s!==0&&(n=s,e=wu(t,s))),e===1))throw r=Ds,mn(t,0),Br(t,n),ut(t,De()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(E(345));case 2:un(t,ot,fr);break;case 3:if(Br(t,n),(n&130023424)===n&&(e=Dd+500-De(),10<e)){if(fa(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=eu(un.bind(null,t,ot,fr),e);break}un(t,ot,fr);break;case 4:if(Br(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-jt(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=De()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dS(n/1960))-n,10<n){t.timeoutHandle=eu(un.bind(null,t,ot,fr),n);break}un(t,ot,fr);break;case 5:un(t,ot,fr);break;default:throw Error(E(329))}}}return ut(t,De()),t.callbackNode===r?uv.bind(null,t):null}function wu(t,e){var r=cs;return t.current.memoizedState.isDehydrated&&(mn(t,e).flags|=256),t=Oa(t,e),t!==2&&(e=ot,ot=r,e!==null&&Su(e)),t}function Su(t){ot===null?ot=t:ot.push.apply(ot,t)}function pS(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Ft(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Br(t,e){for(e&=~Pd,e&=~Xa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-jt(e),n=1<<r;t[r]=-1,e&=~n}}function kf(t){if(Z&6)throw Error(E(327));fi();var e=fa(t,0);if(!(e&1))return ut(t,De()),null;var r=Oa(t,e);if(t.tag!==0&&r===2){var n=Vl(t);n!==0&&(e=n,r=wu(t,n))}if(r===1)throw r=Ds,mn(t,0),Br(t,e),ut(t,De()),r;if(r===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,un(t,ot,fr),ut(t,De()),null}function xd(t,e){var r=Z;Z|=1;try{return t(e)}finally{Z=r,Z===0&&(Si=De()+500,Wa&&an())}}function Sn(t){zr!==null&&zr.tag===0&&!(Z&6)&&fi();var e=Z;Z|=1;var r=bt.transition,n=oe;try{if(bt.transition=null,oe=1,t)return t()}finally{oe=n,bt.transition=r,Z=e,!(Z&6)&&an()}}function kd(){pt=ai.current,me(ai)}function mn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,zw(r)),ke!==null)for(r=ke.return;r!==null;){var n=r;switch(ud(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ya();break;case 3:_i(),me(ct),me(Xe),_d();break;case 5:yd(n);break;case 4:_i();break;case 13:me(ye);break;case 19:me(ye);break;case 10:hd(n.type._context);break;case 22:case 23:kd()}r=r.return}if(qe=t,ke=t=Yr(t.current,null),He=pt=e,Ue=0,Ds=null,Pd=Xa=wn=0,ot=cs=null,pn!==null){for(e=0;e<pn.length;e++)if(r=pn[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}pn=null}return t}function dv(t,e){do{var r=ke;try{if(fd(),Vo.current=Pa,Ta){for(var n=_e.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ta=!1}if(_n=0,ze=Be=_e=null,os=!1,Es=0,Td.current=null,r===null||r.return===null){Ue=1,Ds=e,ke=null;break}e:{var s=t,o=r.return,a=r,c=e;if(e=He,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=vf(o);if(h!==null){h.flags&=-257,yf(h,o,a,s,e),h.mode&1&&gf(s,l,e),e=h,c=l;var f=e.updateQueue;if(f===null){var m=new Set;m.add(c),e.updateQueue=m}else f.add(c);break e}else{if(!(e&1)){gf(s,l,e),Od();break e}c=Error(E(426))}}else if(ve&&a.mode&1){var g=vf(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),yf(g,o,a,s,e),dd(wi(c,a));break e}}s=c=wi(c,a),Ue!==4&&(Ue=2),cs===null?cs=[s]:cs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=Wg(s,c,e);lf(s,v);break e;case 1:a=c;var y=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Gr===null||!Gr.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=Gg(s,a,e);lf(s,w);break e}}s=s.return}while(s!==null)}hv(r)}catch(b){e=b,ke===r&&r!==null&&(ke=r=r.return);continue}break}while(!0)}function pv(){var t=Da.current;return Da.current=Pa,t===null?Pa:t}function Od(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),qe===null||!(wn&268435455)&&!(Xa&268435455)||Br(qe,He)}function Oa(t,e){var r=Z;Z|=2;var n=pv();(qe!==t||He!==e)&&(fr=null,mn(t,e));do try{fS();break}catch(i){dv(t,i)}while(!0);if(fd(),Z=r,Da.current=n,ke!==null)throw Error(E(261));return qe=null,He=0,Ue}function fS(){for(;ke!==null;)fv(ke)}function hS(){for(;ke!==null&&!$_();)fv(ke)}function fv(t){var e=gv(t.alternate,t,pt);t.memoizedProps=t.pendingProps,e===null?hv(t):ke=e,Td.current=null}function hv(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=aS(r,e),r!==null){r.flags&=32767,ke=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,ke=null;return}}else if(r=oS(r,e,pt),r!==null){ke=r;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Ue===0&&(Ue=5)}function un(t,e,r){var n=oe,i=bt.transition;try{bt.transition=null,oe=1,mS(t,e,r,n)}finally{bt.transition=i,oe=n}return null}function mS(t,e,r,n){do fi();while(zr!==null);if(Z&6)throw Error(E(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(G_(t,s),t===qe&&(ke=qe=null,He=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||_o||(_o=!0,vv(pa,function(){return fi(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=bt.transition,bt.transition=null;var o=oe;oe=1;var a=Z;Z|=4,Td.current=null,lS(t,r),cv(r,t),Nw(Xl),ha=!!Yl,Xl=Yl=null,t.current=r,uS(r),B_(),Z=a,oe=o,bt.transition=s}else t.current=r;if(_o&&(_o=!1,zr=t,ka=i),s=t.pendingLanes,s===0&&(Gr=null),q_(r.stateNode),ut(t,De()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(xa)throw xa=!1,t=yu,yu=null,t;return ka&1&&t.tag!==0&&fi(),s=t.pendingLanes,s&1?t===_u?ls++:(ls=0,_u=t):ls=0,an(),null}function fi(){if(zr!==null){var t=Km(ka),e=bt.transition,r=oe;try{if(bt.transition=null,oe=16>t?16:t,zr===null)var n=!1;else{if(t=zr,zr=null,ka=0,Z&6)throw Error(E(331));var i=Z;for(Z|=4,k=t.current;k!==null;){var s=k,o=s.child;if(k.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(k=l;k!==null;){var u=k;switch(u.tag){case 0:case 11:case 15:as(8,u,s)}var d=u.child;if(d!==null)d.return=u,k=d;else for(;k!==null;){u=k;var p=u.sibling,h=u.return;if(sv(u),u===l){k=null;break}if(p!==null){p.return=h,k=p;break}k=h}}}var f=s.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}k=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,k=o;else e:for(;k!==null;){if(s=k,s.flags&2048)switch(s.tag){case 0:case 11:case 15:as(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,k=v;break e}k=s.return}}var y=t.current;for(k=y;k!==null;){o=k;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,k=_;else e:for(o=y;k!==null;){if(a=k,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ya(9,a)}}catch(b){be(a,a.return,b)}if(a===o){k=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,k=w;break e}k=a.return}}if(Z=i,an(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(qa,t)}catch{}n=!0}return n}finally{oe=r,bt.transition=e}}return!1}function Of(t,e,r){e=wi(r,e),e=Wg(t,e,1),t=Wr(t,e,1),e=rt(),t!==null&&(Is(t,1,e),ut(t,e))}function be(t,e,r){if(t.tag===3)Of(t,t,r);else for(;e!==null;){if(e.tag===3){Of(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Gr===null||!Gr.has(n))){t=wi(r,t),t=Gg(e,t,1),e=Wr(e,t,1),t=rt(),e!==null&&(Is(e,1,t),ut(e,t));break}}e=e.return}}function gS(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=rt(),t.pingedLanes|=t.suspendedLanes&r,qe===t&&(He&r)===r&&(Ue===4||Ue===3&&(He&130023424)===He&&500>De()-Dd?mn(t,0):Pd|=r),ut(t,e)}function mv(t,e){e===0&&(t.mode&1?(e=co,co<<=1,!(co&130023424)&&(co=4194304)):e=1);var r=rt();t=Sr(t,e),t!==null&&(Is(t,e,r),ut(t,r))}function vS(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),mv(t,r)}function yS(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(E(314))}n!==null&&n.delete(e),mv(t,r)}var gv;gv=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ct.current)at=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return at=!1,sS(t,e,r);at=!!(t.flags&131072)}else at=!1,ve&&e.flags&1048576&&_g(e,Sa,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Wo(t,e),t=e.pendingProps;var i=gi(e,Xe.current);pi(e,r),i=Sd(null,e,n,t,i,r);var s=Rd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(n)?(s=!0,_a(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gd(e),i.updater=Ga,e.stateNode=i,i._reactInternals=e,au(e,n,t,r),e=uu(null,e,n,!0,s,r)):(e.tag=0,ve&&s&&ld(e),et(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Wo(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=wS(n),t=Lt(n,t),i){case 0:e=lu(null,e,n,t,r);break e;case 1:e=Sf(null,e,n,t,r);break e;case 11:e=_f(null,e,n,t,r);break e;case 14:e=wf(null,e,n,Lt(n.type,t),r);break e}throw Error(E(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lt(n,i),lu(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lt(n,i),Sf(t,e,n,i,r);case 3:e:{if(Zg(e),t===null)throw Error(E(387));n=e.pendingProps,s=e.memoizedState,i=s.element,bg(t,e),Ca(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wi(Error(E(423)),e),e=Rf(t,e,n,r,i);break e}else if(n!==i){i=wi(Error(E(424)),e),e=Rf(t,e,n,r,i);break e}else for(ft=Kr(e.stateNode.containerInfo.firstChild),ht=e,ve=!0,Nt=null,r=Pg(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vi(),n===i){e=Rr(t,e,r);break e}et(t,e,n,r)}e=e.child}return e;case 5:return Dg(e),t===null&&iu(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Zl(n,i)?o=null:s!==null&&Zl(n,s)&&(e.flags|=32),Xg(t,e),et(t,e,o,r),e.child;case 6:return t===null&&iu(e),null;case 13:return ev(t,e,r);case 4:return vd(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=yi(e,null,n,r):et(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lt(n,i),_f(t,e,n,i,r);case 7:return et(t,e,e.pendingProps,r),e.child;case 8:return et(t,e,e.pendingProps.children,r),e.child;case 12:return et(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,pe(Ra,n._currentValue),n._currentValue=o,s!==null)if(Ft(s.value,o)){if(s.children===i.children&&!ct.current){e=Rr(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=vr(-1,r&-r),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),su(s.return,r,e),a.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),su(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}et(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,pi(e,r),i=Et(i),n=n(i),e.flags|=1,et(t,e,n,r),e.child;case 14:return n=e.type,i=Lt(n,e.pendingProps),i=Lt(n.type,i),wf(t,e,n,i,r);case 15:return Jg(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lt(n,i),Wo(t,e),e.tag=1,lt(n)?(t=!0,_a(e)):t=!1,pi(e,r),Eg(e,n,i),au(e,n,i,r),uu(null,e,n,!0,t,r);case 19:return tv(t,e,r);case 22:return Yg(t,e,r)}throw Error(E(156,e.tag))};function vv(t,e){return qm(t,e)}function _S(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,e,r,n){return new _S(t,e,r,n)}function Ld(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wS(t){if(typeof t=="function")return Ld(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yu)return 11;if(t===Xu)return 14}return 2}function Yr(t,e){var r=t.alternate;return r===null?(r=Rt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Yo(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")Ld(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yn:return gn(r.children,i,s,e);case Ju:o=8,i|=8;break;case Ol:return t=Rt(12,r,e,i|2),t.elementType=Ol,t.lanes=s,t;case Ll:return t=Rt(13,r,e,i),t.elementType=Ll,t.lanes=s,t;case Ml:return t=Rt(19,r,e,i),t.elementType=Ml,t.lanes=s,t;case Tm:return Za(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cm:o=10;break e;case Em:o=9;break e;case Yu:o=11;break e;case Xu:o=14;break e;case jr:o=16,n=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=Rt(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function gn(t,e,r,n){return t=Rt(7,t,n,e),t.lanes=r,t}function Za(t,e,r,n){return t=Rt(22,t,n,e),t.elementType=Tm,t.lanes=r,t.stateNode={isHidden:!1},t}function sl(t,e,r){return t=Rt(6,t,null,e),t.lanes=r,t}function ol(t,e,r){return e=Rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function SS(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bc(0),this.expirationTimes=Bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bc(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Md(t,e,r,n,i,s,o,a,c){return t=new SS(t,e,r,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},gd(s),t}function RS(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function yv(t){if(!t)return rn;t=t._reactInternals;e:{if(Cn(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var r=t.type;if(lt(r))return vg(t,r,e)}return e}function _v(t,e,r,n,i,s,o,a,c){return t=Md(r,n,!0,t,i,s,o,a,c),t.context=yv(null),r=t.current,n=rt(),i=Jr(r),s=vr(n,i),s.callback=e??null,Wr(r,s,i),t.current.lanes=i,Is(t,i,n),ut(t,n),t}function ec(t,e,r,n){var i=e.current,s=rt(),o=Jr(i);return r=yv(r),e.context===null?e.context=r:e.pendingContext=r,e=vr(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Wr(i,e,o),t!==null&&(At(t,i,o,s),Ho(t,i,o)),o}function La(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Id(t,e){Lf(t,e),(t=t.alternate)&&Lf(t,e)}function bS(){return null}var wv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nd(t){this._internalRoot=t}tc.prototype.render=Nd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));ec(t,e,null,null)};tc.prototype.unmount=Nd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sn(function(){ec(null,t,null,null)}),e[wr]=null}};function tc(t){this._internalRoot=t}tc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jm();t={blockedOn:null,target:t,priority:e};for(var r=0;r<$r.length&&e!==0&&e<$r[r].priority;r++);$r.splice(r,0,t),r===0&&Xm(t)}};function jd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mf(){}function CS(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var l=La(o);s.call(l)}}var o=_v(e,n,t,0,null,!1,!1,"",Mf);return t._reactRootContainer=o,t[wr]=o.current,ws(t.nodeType===8?t.parentNode:t),Sn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var l=La(c);a.call(l)}}var c=Md(t,0,!1,null,null,!1,!1,"",Mf);return t._reactRootContainer=c,t[wr]=c.current,ws(t.nodeType===8?t.parentNode:t),Sn(function(){ec(e,c,r,n)}),c}function nc(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=La(o);a.call(c)}}ec(e,o,t,i)}else o=CS(r,e,t,i,n);return La(o)}Wm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Xi(e.pendingLanes);r!==0&&(td(e,r|1),ut(e,De()),!(Z&6)&&(Si=De()+500,an()))}break;case 13:Sn(function(){var n=Sr(t,1);if(n!==null){var i=rt();At(n,t,1,i)}}),Id(t,1)}};rd=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var r=rt();At(e,t,134217728,r)}Id(t,134217728)}};Gm=function(t){if(t.tag===13){var e=Jr(t),r=Sr(t,e);if(r!==null){var n=rt();At(r,t,e,n)}Id(t,e)}};Jm=function(){return oe};Ym=function(t,e){var r=oe;try{return oe=t,e()}finally{oe=r}};ql=function(t,e,r){switch(e){case"input":if(jl(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Ka(n);if(!i)throw Error(E(90));Dm(n),jl(n,i)}}}break;case"textarea":km(t,r);break;case"select":e=r.value,e!=null&&ci(t,!!r.multiple,e,!1)}};Am=xd;Fm=Sn;var ES={usingClientEntryPoint:!1,Events:[js,ti,Ka,Nm,jm,xd]},qi={findFiberByHostInstance:dn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},TS={bundleType:qi.bundleType,version:qi.version,rendererPackageName:qi.rendererPackageName,rendererConfig:qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Um(t),t===null?null:t.stateNode},findFiberByHostInstance:qi.findFiberByHostInstance||bS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wo.isDisabled&&wo.supportsFiber)try{qa=wo.inject(TS),nr=wo}catch{}}gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ES;gt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jd(e))throw Error(E(200));return RS(t,e,null,r)};gt.createRoot=function(t,e){if(!jd(t))throw Error(E(299));var r=!1,n="",i=wv;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Md(t,1,!1,null,null,r,!1,n,i),t[wr]=e.current,ws(t.nodeType===8?t.parentNode:t),new Nd(e)};gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Um(e),t=t===null?null:t.stateNode,t};gt.flushSync=function(t){return Sn(t)};gt.hydrate=function(t,e,r){if(!rc(e))throw Error(E(200));return nc(null,t,e,!0,r)};gt.hydrateRoot=function(t,e,r){if(!jd(t))throw Error(E(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=wv;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=_v(e,null,t,1,r??null,i,!1,s,o),t[wr]=e.current,ws(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new tc(e)};gt.render=function(t,e,r){if(!rc(e))throw Error(E(200));return nc(null,t,e,!1,r)};gt.unmountComponentAtNode=function(t){if(!rc(t))throw Error(E(40));return t._reactRootContainer?(Sn(function(){nc(null,null,t,!1,function(){t._reactRootContainer=null,t[wr]=null})}),!0):!1};gt.unstable_batchedUpdates=xd;gt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!rc(r))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return nc(t,e,r,!1,n)};gt.version="18.2.0-next-9e3b772b8-20220608";function Sv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sv)}catch(t){console.error(t)}}Sv(),_m.exports=gt;var Rv=_m.exports;const PS=cm(Rv);var If=Rv;xl.createRoot=If.createRoot,xl.hydrateRoot=If.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xs(){return xs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xs.apply(this,arguments)}var qr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qr||(qr={}));const Nf="popstate";function DS(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return Ru("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Ma(i)}return kS(e,r,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xS(){return Math.random().toString(36).substr(2,8)}function jf(t,e){return{usr:t.state,key:t.key,idx:e}}function Ru(t,e,r,n){return r===void 0&&(r=null),xs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Pi(e):e,{state:r,key:e&&e.key||n||xS()})}function Ma(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Pi(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function kS(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=qr.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(xs({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=qr.Pop;let g=u(),v=g==null?null:g-l;l=g,c&&c({action:a,location:m.location,delta:v})}function p(g,v){a=qr.Push;let y=Ru(m.location,g,v);r&&r(y,g),l=u()+1;let _=jf(y,l),w=m.createHref(y);try{o.pushState(_,"",w)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(w)}s&&c&&c({action:a,location:m.location,delta:1})}function h(g,v){a=qr.Replace;let y=Ru(m.location,g,v);r&&r(y,g),l=u();let _=jf(y,l),w=m.createHref(y);o.replaceState(_,"",w),s&&c&&c({action:a,location:m.location,delta:0})}function f(g){let v=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof g=="string"?g:Ma(g);return y=y.replace(/ $/,"%20"),Me(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let m={get action(){return a},get location(){return t(i,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Nf,d),c=g,()=>{i.removeEventListener(Nf,d),c=null}},createHref(g){return e(i,g)},createURL:f,encodeLocation(g){let v=f(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:h,go(g){return o.go(g)}};return m}var Af;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Af||(Af={}));function OS(t,e,r){r===void 0&&(r="/");let n=typeof e=="string"?Pi(e):e,i=Ad(n.pathname||"/",r);if(i==null)return null;let s=Cv(t);LS(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let c=QS(i);o=US(s[a],c)}return o}function Cv(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Me(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let l=Xr([n,c.relativePath]),u=r.concat(c);s.children&&s.children.length>0&&(Me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Cv(s.children,e,u,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:$S(l,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of Ev(s.path))i(s,o,c)}),e}function Ev(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=Ev(n.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function LS(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:BS(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const MS=/^:[\w-]+$/,IS=3,NS=2,jS=1,AS=10,FS=-2,Ff=t=>t==="*";function $S(t,e){let r=t.split("/"),n=r.length;return r.some(Ff)&&(n+=FS),e&&(n+=NS),r.filter(i=>!Ff(i)).reduce((i,s)=>i+(MS.test(s)?IS:s===""?jS:AS),n)}function BS(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function US(t,e){let{routesMeta:r}=t,n={},i="/",s=[];for(let o=0;o<r.length;++o){let a=r[o],c=o===r.length-1,l=i==="/"?e:e.slice(i.length)||"/",u=zS({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},l);if(!u)return null;Object.assign(n,u.params);let d=a.route;s.push({params:n,pathname:Xr([i,u.pathname]),pathnameBase:WS(Xr([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Xr([i,u.pathnameBase]))}return s}function zS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=qS(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((l,u,d)=>{let{paramName:p,isOptional:h}=u;if(p==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const f=a[d];return h&&!f?l[p]=void 0:l[p]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:t}}function qS(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),bv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(n.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function QS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ad(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function HS(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Pi(t):t;return{pathname:r?r.startsWith("/")?r:VS(r,e):e,search:GS(n),hash:JS(i)}}function VS(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function al(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KS(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Tv(t,e){let r=KS(t);return e?r.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Pv(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Pi(t):(i=xs({},t),Me(!i.pathname||!i.pathname.includes("?"),al("?","pathname","search",i)),Me(!i.pathname||!i.pathname.includes("#"),al("#","pathname","hash",i)),Me(!i.search||!i.search.includes("#"),al("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let d=e.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let c=HS(i,a),l=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Xr=t=>t.join("/").replace(/\/\/+/g,"/"),WS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function YS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Dv=["post","put","patch","delete"];new Set(Dv);const XS=["get",...Dv];new Set(XS);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ks(){return ks=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ks.apply(this,arguments)}const Fd=T.createContext(null),ZS=T.createContext(null),En=T.createContext(null),ic=T.createContext(null),Er=T.createContext({outlet:null,matches:[],isDataRoute:!1}),xv=T.createContext(null);function e0(t,e){let{relative:r}=e===void 0?{}:e;Fs()||Me(!1);let{basename:n,navigator:i}=T.useContext(En),{hash:s,pathname:o,search:a}=Ov(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Xr([n,o])),i.createHref({pathname:c,search:a,hash:s})}function Fs(){return T.useContext(ic)!=null}function sc(){return Fs()||Me(!1),T.useContext(ic).location}function kv(t){T.useContext(En).static||T.useLayoutEffect(t)}function $d(){let{isDataRoute:t}=T.useContext(Er);return t?g0():t0()}function t0(){Fs()||Me(!1);let t=T.useContext(Fd),{basename:e,future:r,navigator:n}=T.useContext(En),{matches:i}=T.useContext(Er),{pathname:s}=sc(),o=JSON.stringify(Tv(i,r.v7_relativeSplatPath)),a=T.useRef(!1);return kv(()=>{a.current=!0}),T.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){n.go(l);return}let d=Pv(l,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Xr([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,o,s,t])}const r0=T.createContext(null);function n0(t){let e=T.useContext(Er).outlet;return e&&T.createElement(r0.Provider,{value:t},e)}function i0(){let{matches:t}=T.useContext(Er),e=t[t.length-1];return e?e.params:{}}function Ov(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=T.useContext(En),{matches:i}=T.useContext(Er),{pathname:s}=sc(),o=JSON.stringify(Tv(i,n.v7_relativeSplatPath));return T.useMemo(()=>Pv(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function s0(t,e){return o0(t,e)}function o0(t,e,r,n){Fs()||Me(!1);let{navigator:i}=T.useContext(En),{matches:s}=T.useContext(Er),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=sc(),u;if(e){var d;let g=typeof e=="string"?Pi(e):e;c==="/"||(d=g.pathname)!=null&&d.startsWith(c)||Me(!1),u=g}else u=l;let p=u.pathname||"/",h=p;if(c!=="/"){let g=c.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(g.length).join("/")}let f=OS(t,{pathname:h}),m=d0(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Xr([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Xr([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,r,n);return e&&m?T.createElement(ic.Provider,{value:{location:ks({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:qr.Pop}},m):m}function a0(){let t=m0(),e=YS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:i},r):null,null)}const c0=T.createElement(a0,null);class l0 extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement(Er.Provider,{value:this.props.routeContext},T.createElement(xv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u0(t){let{routeContext:e,match:r,children:n}=t,i=T.useContext(Fd);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Er.Provider,{value:e},n)}function d0(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if((s=r)!=null&&s.errors)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||Me(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:p,errors:h}=r,f=d.route.loader&&p[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||f){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,p)=>{let h,f=!1,m=null,g=null;r&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||c0,c&&(l<0&&p===0?(v0("route-fallback",!1),f=!0,g=null):l===p&&(f=!0,g=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),y=()=>{let _;return h?_=m:f?_=g:d.route.Component?_=T.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=u,T.createElement(u0,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:_})};return r&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?T.createElement(l0,{location:r.location,revalidation:r.revalidation,component:m,error:h,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var Lv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Lv||{}),Ia=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ia||{});function p0(t){let e=T.useContext(Fd);return e||Me(!1),e}function f0(t){let e=T.useContext(ZS);return e||Me(!1),e}function h0(t){let e=T.useContext(Er);return e||Me(!1),e}function Mv(t){let e=h0(),r=e.matches[e.matches.length-1];return r.route.id||Me(!1),r.route.id}function m0(){var t;let e=T.useContext(xv),r=f0(Ia.UseRouteError),n=Mv(Ia.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function g0(){let{router:t}=p0(Lv.UseNavigateStable),e=Mv(Ia.UseNavigateStable),r=T.useRef(!1);return kv(()=>{r.current=!0}),T.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ks({fromRouteId:e},s)))},[t,e])}const $f={};function v0(t,e,r){!e&&!$f[t]&&($f[t]=!0)}function y0(t){return n0(t.context)}function Xo(t){Me(!1)}function _0(t){let{basename:e="/",children:r=null,location:n,navigationType:i=qr.Pop,navigator:s,static:o=!1,future:a}=t;Fs()&&Me(!1);let c=e.replace(/^\/*/,"/"),l=T.useMemo(()=>({basename:c,navigator:s,static:o,future:ks({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof n=="string"&&(n=Pi(n));let{pathname:u="/",search:d="",hash:p="",state:h=null,key:f="default"}=n,m=T.useMemo(()=>{let g=Ad(u,c);return g==null?null:{location:{pathname:g,search:d,hash:p,state:h,key:f},navigationType:i}},[c,u,d,p,h,f,i]);return m==null?null:T.createElement(En.Provider,{value:l},T.createElement(ic.Provider,{children:r,value:m}))}function w0(t){let{children:e,location:r}=t;return s0(bu(e),r)}new Promise(()=>{});function bu(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,i)=>{if(!T.isValidElement(n))return;let s=[...e,i];if(n.type===T.Fragment){r.push.apply(r,bu(n.props.children,s));return}n.type!==Xo&&Me(!1),!n.props.index||!n.props.children||Me(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=bu(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cu(){return Cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cu.apply(this,arguments)}function S0(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function R0(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function b0(t,e){return t.button===0&&(!e||e==="_self")&&!R0(t)}const C0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],E0="6";try{window.__reactRouterVersion=E0}catch{}const T0="startTransition",Bf=v_[T0];function P0(t){let{basename:e,children:r,future:n,window:i}=t,s=T.useRef();s.current==null&&(s.current=DS({window:i,v5Compat:!0}));let o=s.current,[a,c]=T.useState({action:o.action,location:o.location}),{v7_startTransition:l}=n||{},u=T.useCallback(d=>{l&&Bf?Bf(()=>c(d)):c(d)},[c,l]);return T.useLayoutEffect(()=>o.listen(u),[o,u]),T.createElement(_0,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const D0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",x0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k0=T.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:l,preventScrollReset:u,unstable_viewTransition:d}=e,p=S0(e,C0),{basename:h}=T.useContext(En),f,m=!1;if(typeof l=="string"&&x0.test(l)&&(f=l,D0))try{let _=new URL(window.location.href),w=l.startsWith("//")?new URL(_.protocol+l):new URL(l),b=Ad(w.pathname,h);w.origin===_.origin&&b!=null?l=b+w.search+w.hash:m=!0}catch{}let g=e0(l,{relative:i}),v=O0(l,{replace:o,state:a,target:c,preventScrollReset:u,relative:i,unstable_viewTransition:d});function y(_){n&&n(_),_.defaultPrevented||v(_)}return T.createElement("a",Cu({},p,{href:f||g,onClick:m||s?n:y,ref:r,target:c}))});var Uf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Uf||(Uf={}));var zf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zf||(zf={}));function O0(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,c=$d(),l=sc(),u=Ov(t,{relative:o});return T.useCallback(d=>{if(b0(d,r)){d.preventDefault();let p=n!==void 0?n:Ma(l)===Ma(u);c(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[l,c,u,n,i,r,t,s,o,a])}function Eu(t,e){return Eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Eu(t,e)}function $s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Eu(t,e)}var Bs=function(){function t(){this.listeners=[]}var e=t.prototype;return e.subscribe=function(n){var i=this,s=n||function(){};return this.listeners.push(s),this.onSubscribe(),function(){i.listeners=i.listeners.filter(function(o){return o!==s}),i.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},t}();function re(){return re=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},re.apply(this,arguments)}var Na=typeof window>"u";function Je(){}function L0(t,e){return typeof t=="function"?t(e):t}function Tu(t){return typeof t=="number"&&t>=0&&t!==1/0}function ja(t){return Array.isArray(t)?t:[t]}function Iv(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Zo(t,e,r){return oc(t)?typeof e=="function"?re({},r,{queryKey:t,queryFn:e}):re({},e,{queryKey:t}):t}function Fr(t,e,r){return oc(t)?[re({},e,{queryKey:t}),r]:[t||{},e]}function M0(t,e){if(t===!0&&e===!0||t==null&&e==null)return"all";if(t===!1&&e===!1)return"none";var r=t??!e;return r?"active":"inactive"}function qf(t,e){var r=t.active,n=t.exact,i=t.fetching,s=t.inactive,o=t.predicate,a=t.queryKey,c=t.stale;if(oc(a)){if(n){if(e.queryHash!==Bd(a,e.options))return!1}else if(!Aa(e.queryKey,a))return!1}var l=M0(r,s);if(l==="none")return!1;if(l!=="all"){var u=e.isActive();if(l==="active"&&!u||l==="inactive"&&u)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||typeof i=="boolean"&&e.isFetching()!==i||o&&!o(e))}function Qf(t,e){var r=t.exact,n=t.fetching,i=t.predicate,s=t.mutationKey;if(oc(s)){if(!e.options.mutationKey)return!1;if(r){if(hn(e.options.mutationKey)!==hn(s))return!1}else if(!Aa(e.options.mutationKey,s))return!1}return!(typeof n=="boolean"&&e.state.status==="loading"!==n||i&&!i(e))}function Bd(t,e){var r=(e==null?void 0:e.queryKeyHashFn)||hn;return r(t)}function hn(t){var e=ja(t);return I0(e)}function I0(t){return JSON.stringify(t,function(e,r){return Pu(r)?Object.keys(r).sort().reduce(function(n,i){return n[i]=r[i],n},{}):r})}function Aa(t,e){return Nv(ja(t),ja(e))}function Nv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(function(r){return!Nv(t[r],e[r])}):!1}function Fa(t,e){if(t===e)return t;var r=Array.isArray(t)&&Array.isArray(e);if(r||Pu(t)&&Pu(e)){for(var n=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),s=i.length,o=r?[]:{},a=0,c=0;c<s;c++){var l=r?c:i[c];o[l]=Fa(t[l],e[l]),o[l]===t[l]&&a++}return n===s&&a===n?t:o}return e}function N0(t,e){if(t&&!e||e&&!t)return!1;for(var r in t)if(t[r]!==e[r])return!1;return!0}function Pu(t){if(!Hf(t))return!1;var e=t.constructor;if(typeof e>"u")return!0;var r=e.prototype;return!(!Hf(r)||!r.hasOwnProperty("isPrototypeOf"))}function Hf(t){return Object.prototype.toString.call(t)==="[object Object]"}function oc(t){return typeof t=="string"||Array.isArray(t)}function j0(t){return new Promise(function(e){setTimeout(e,t)})}function Vf(t){Promise.resolve().then(t).catch(function(e){return setTimeout(function(){throw e})})}function jv(){if(typeof AbortController=="function")return new AbortController}var A0=function(t){$s(e,t);function e(){var n;return n=t.call(this)||this,n.setup=function(i){var s;if(!Na&&((s=window)!=null&&s.addEventListener)){var o=function(){return i()};return window.addEventListener("visibilitychange",o,!1),window.addEventListener("focus",o,!1),function(){window.removeEventListener("visibilitychange",o),window.removeEventListener("focus",o)}}},n}var r=e.prototype;return r.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},r.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},r.setEventListener=function(i){var s,o=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(a){typeof a=="boolean"?o.setFocused(a):o.onFocus()})},r.setFocused=function(i){this.focused=i,i&&this.onFocus()},r.onFocus=function(){this.listeners.forEach(function(i){i()})},r.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},e}(Bs),us=new A0,F0=function(t){$s(e,t);function e(){var n;return n=t.call(this)||this,n.setup=function(i){var s;if(!Na&&((s=window)!=null&&s.addEventListener)){var o=function(){return i()};return window.addEventListener("online",o,!1),window.addEventListener("offline",o,!1),function(){window.removeEventListener("online",o),window.removeEventListener("offline",o)}}},n}var r=e.prototype;return r.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},r.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},r.setEventListener=function(i){var s,o=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(a){typeof a=="boolean"?o.setOnline(a):o.onOnline()})},r.setOnline=function(i){this.online=i,i&&this.onOnline()},r.onOnline=function(){this.listeners.forEach(function(i){i()})},r.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},e}(Bs),ea=new F0;function $0(t){return Math.min(1e3*Math.pow(2,t),3e4)}function $a(t){return typeof(t==null?void 0:t.cancel)=="function"}var Av=function(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent};function ta(t){return t instanceof Av}var Fv=function(e){var r=this,n=!1,i,s,o,a;this.abort=e.abort,this.cancel=function(p){return i==null?void 0:i(p)},this.cancelRetry=function(){n=!0},this.continueRetry=function(){n=!1},this.continue=function(){return s==null?void 0:s()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(p,h){o=p,a=h});var c=function(h){r.isResolved||(r.isResolved=!0,e.onSuccess==null||e.onSuccess(h),s==null||s(),o(h))},l=function(h){r.isResolved||(r.isResolved=!0,e.onError==null||e.onError(h),s==null||s(),a(h))},u=function(){return new Promise(function(h){s=h,r.isPaused=!0,e.onPause==null||e.onPause()}).then(function(){s=void 0,r.isPaused=!1,e.onContinue==null||e.onContinue()})},d=function p(){if(!r.isResolved){var h;try{h=e.fn()}catch(f){h=Promise.reject(f)}i=function(m){if(!r.isResolved&&(l(new Av(m)),r.abort==null||r.abort(),$a(h)))try{h.cancel()}catch{}},r.isTransportCancelable=$a(h),Promise.resolve(h).then(c).catch(function(f){var m,g;if(!r.isResolved){var v=(m=e.retry)!=null?m:3,y=(g=e.retryDelay)!=null?g:$0,_=typeof y=="function"?y(r.failureCount,f):y,w=v===!0||typeof v=="number"&&r.failureCount<v||typeof v=="function"&&v(r.failureCount,f);if(n||!w){l(f);return}r.failureCount++,e.onFail==null||e.onFail(r.failureCount,f),j0(_).then(function(){if(!us.isFocused()||!ea.isOnline())return u()}).then(function(){n?l(f):p()})}})}};d()},B0=function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(r){r()},this.batchNotifyFn=function(r){r()}}var e=t.prototype;return e.batch=function(n){var i;this.transactions++;try{i=n()}finally{this.transactions--,this.transactions||this.flush()}return i},e.schedule=function(n){var i=this;this.transactions?this.queue.push(n):Vf(function(){i.notifyFn(n)})},e.batchCalls=function(n){var i=this;return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];i.schedule(function(){n.apply(void 0,o)})}},e.flush=function(){var n=this,i=this.queue;this.queue=[],i.length&&Vf(function(){n.batchNotifyFn(function(){i.forEach(function(s){n.notifyFn(s)})})})},e.setNotifyFunction=function(n){this.notifyFn=n},e.setBatchNotifyFunction=function(n){this.batchNotifyFn=n},t}(),Ce=new B0,$v=console;function Ba(){return $v}function U0(t){$v=t}var z0=function(){function t(r){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.cache=r.cache,this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.initialState=r.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=r.meta,this.scheduleGc()}var e=t.prototype;return e.setOptions=function(n){var i;this.options=re({},this.defaultOptions,n),this.meta=n==null?void 0:n.meta,this.cacheTime=Math.max(this.cacheTime||0,(i=this.options.cacheTime)!=null?i:5*60*1e3)},e.setDefaultOptions=function(n){this.defaultOptions=n},e.scheduleGc=function(){var n=this;this.clearGcTimeout(),Tu(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){n.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(n,i){var s,o,a=this.state.data,c=L0(n,a);return(s=(o=this.options).isDataEqual)!=null&&s.call(o,a,c)?c=a:this.options.structuralSharing!==!1&&(c=Fa(a,c)),this.dispatch({data:c,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt}),c},e.setState=function(n,i){this.dispatch({type:"setState",state:n,setStateOptions:i})},e.cancel=function(n){var i,s=this.promise;return(i=this.retryer)==null||i.cancel(n),s?s.then(Je).catch(Je):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(n){return n.options.enabled!==!1})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(n){return n.getCurrentResult().isStale})},e.isStaleByTime=function(n){return n===void 0&&(n=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Iv(this.state.dataUpdatedAt,n)},e.onFocus=function(){var n,i=this.observers.find(function(s){return s.shouldFetchOnWindowFocus()});i&&i.refetch(),(n=this.retryer)==null||n.continue()},e.onOnline=function(){var n,i=this.observers.find(function(s){return s.shouldFetchOnReconnect()});i&&i.refetch(),(n=this.retryer)==null||n.continue()},e.addObserver=function(n){this.observers.indexOf(n)===-1&&(this.observers.push(n),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:n}))},e.removeObserver=function(n){this.observers.indexOf(n)!==-1&&(this.observers=this.observers.filter(function(i){return i!==n}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:n}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(n,i){var s=this,o,a,c;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var l;return(l=this.retryer)==null||l.continueRetry(),this.promise}}if(n&&this.setOptions(n),!this.options.queryFn){var u=this.observers.find(function(y){return y.options.queryFn});u&&this.setOptions(u.options)}var d=ja(this.queryKey),p=jv(),h={queryKey:d,pageParam:void 0,meta:this.meta};Object.defineProperty(h,"signal",{enumerable:!0,get:function(){if(p)return s.abortSignalConsumed=!0,p.signal}});var f=function(){return s.options.queryFn?(s.abortSignalConsumed=!1,s.options.queryFn(h)):Promise.reject("Missing queryFn")},m={fetchOptions:i,options:this.options,queryKey:d,state:this.state,fetchFn:f,meta:this.meta};if((o=this.options.behavior)!=null&&o.onFetch){var g;(g=this.options.behavior)==null||g.onFetch(m)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((a=m.fetchOptions)==null?void 0:a.meta)){var v;this.dispatch({type:"fetch",meta:(v=m.fetchOptions)==null?void 0:v.meta})}return this.retryer=new Fv({fn:m.fetchFn,abort:p==null||(c=p.abort)==null?void 0:c.bind(p),onSuccess:function(_){s.setData(_),s.cache.config.onSuccess==null||s.cache.config.onSuccess(_,s),s.cacheTime===0&&s.optionalRemove()},onError:function(_){ta(_)&&_.silent||s.dispatch({type:"error",error:_}),ta(_)||(s.cache.config.onError==null||s.cache.config.onError(_,s),Ba().error(_)),s.cacheTime===0&&s.optionalRemove()},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(n){var i=this;this.state=this.reducer(this.state,n),Ce.batch(function(){i.observers.forEach(function(s){s.onQueryUpdate(n)}),i.cache.notify({query:i,type:"queryUpdated",action:n})})},e.getDefaultState=function(n){var i=typeof n.initialData=="function"?n.initialData():n.initialData,s=typeof n.initialData<"u",o=s?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0,a=typeof i<"u";return{data:i,dataUpdateCount:0,dataUpdatedAt:a?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:a?"success":"idle"}},e.reducer=function(n,i){var s,o;switch(i.type){case"failed":return re({},n,{fetchFailureCount:n.fetchFailureCount+1});case"pause":return re({},n,{isPaused:!0});case"continue":return re({},n,{isPaused:!1});case"fetch":return re({},n,{fetchFailureCount:0,fetchMeta:(s=i.meta)!=null?s:null,isFetching:!0,isPaused:!1},!n.dataUpdatedAt&&{error:null,status:"loading"});case"success":return re({},n,{data:i.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(o=i.dataUpdatedAt)!=null?o:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var a=i.error;return ta(a)&&a.revert&&this.revertState?re({},this.revertState):re({},n,{error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return re({},n,{isInvalidated:!0});case"setState":return re({},n,i.state);default:return n}},t}(),q0=function(t){$s(e,t);function e(n){var i;return i=t.call(this)||this,i.config=n||{},i.queries=[],i.queriesMap={},i}var r=e.prototype;return r.build=function(i,s,o){var a,c=s.queryKey,l=(a=s.queryHash)!=null?a:Bd(c,s),u=this.get(l);return u||(u=new z0({cache:this,queryKey:c,queryHash:l,options:i.defaultQueryOptions(s),state:o,defaultOptions:i.getQueryDefaults(c),meta:s.meta}),this.add(u)),u},r.add=function(i){this.queriesMap[i.queryHash]||(this.queriesMap[i.queryHash]=i,this.queries.push(i),this.notify({type:"queryAdded",query:i}))},r.remove=function(i){var s=this.queriesMap[i.queryHash];s&&(i.destroy(),this.queries=this.queries.filter(function(o){return o!==i}),s===i&&delete this.queriesMap[i.queryHash],this.notify({type:"queryRemoved",query:i}))},r.clear=function(){var i=this;Ce.batch(function(){i.queries.forEach(function(s){i.remove(s)})})},r.get=function(i){return this.queriesMap[i]},r.getAll=function(){return this.queries},r.find=function(i,s){var o=Fr(i,s),a=o[0];return typeof a.exact>"u"&&(a.exact=!0),this.queries.find(function(c){return qf(a,c)})},r.findAll=function(i,s){var o=Fr(i,s),a=o[0];return Object.keys(a).length>0?this.queries.filter(function(c){return qf(a,c)}):this.queries},r.notify=function(i){var s=this;Ce.batch(function(){s.listeners.forEach(function(o){o(i)})})},r.onFocus=function(){var i=this;Ce.batch(function(){i.queries.forEach(function(s){s.onFocus()})})},r.onOnline=function(){var i=this;Ce.batch(function(){i.queries.forEach(function(s){s.onOnline()})})},e}(Bs),Q0=function(){function t(r){this.options=re({},r.defaultOptions,r.options),this.mutationId=r.mutationId,this.mutationCache=r.mutationCache,this.observers=[],this.state=r.state||H0(),this.meta=r.meta}var e=t.prototype;return e.setState=function(n){this.dispatch({type:"setState",state:n})},e.addObserver=function(n){this.observers.indexOf(n)===-1&&this.observers.push(n)},e.removeObserver=function(n){this.observers=this.observers.filter(function(i){return i!==n})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Je).catch(Je)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var n=this,i,s=this.state.status==="loading",o=Promise.resolve();return s||(this.dispatch({type:"loading",variables:this.options.variables}),o=o.then(function(){n.mutationCache.config.onMutate==null||n.mutationCache.config.onMutate(n.state.variables,n)}).then(function(){return n.options.onMutate==null?void 0:n.options.onMutate(n.state.variables)}).then(function(a){a!==n.state.context&&n.dispatch({type:"loading",context:a,variables:n.state.variables})})),o.then(function(){return n.executeMutation()}).then(function(a){i=a,n.mutationCache.config.onSuccess==null||n.mutationCache.config.onSuccess(i,n.state.variables,n.state.context,n)}).then(function(){return n.options.onSuccess==null?void 0:n.options.onSuccess(i,n.state.variables,n.state.context)}).then(function(){return n.options.onSettled==null?void 0:n.options.onSettled(i,null,n.state.variables,n.state.context)}).then(function(){return n.dispatch({type:"success",data:i}),i}).catch(function(a){return n.mutationCache.config.onError==null||n.mutationCache.config.onError(a,n.state.variables,n.state.context,n),Ba().error(a),Promise.resolve().then(function(){return n.options.onError==null?void 0:n.options.onError(a,n.state.variables,n.state.context)}).then(function(){return n.options.onSettled==null?void 0:n.options.onSettled(void 0,a,n.state.variables,n.state.context)}).then(function(){throw n.dispatch({type:"error",error:a}),a})})},e.executeMutation=function(){var n=this,i;return this.retryer=new Fv({fn:function(){return n.options.mutationFn?n.options.mutationFn(n.state.variables):Promise.reject("No mutationFn found")},onFail:function(){n.dispatch({type:"failed"})},onPause:function(){n.dispatch({type:"pause"})},onContinue:function(){n.dispatch({type:"continue"})},retry:(i=this.options.retry)!=null?i:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(n){var i=this;this.state=V0(this.state,n),Ce.batch(function(){i.observers.forEach(function(s){s.onMutationUpdate(n)}),i.mutationCache.notify(i)})},t}();function H0(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function V0(t,e){switch(e.type){case"failed":return re({},t,{failureCount:t.failureCount+1});case"pause":return re({},t,{isPaused:!0});case"continue":return re({},t,{isPaused:!1});case"loading":return re({},t,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return re({},t,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return re({},t,{data:void 0,error:e.error,failureCount:t.failureCount+1,isPaused:!1,status:"error"});case"setState":return re({},t,e.state);default:return t}}var K0=function(t){$s(e,t);function e(n){var i;return i=t.call(this)||this,i.config=n||{},i.mutations=[],i.mutationId=0,i}var r=e.prototype;return r.build=function(i,s,o){var a=new Q0({mutationCache:this,mutationId:++this.mutationId,options:i.defaultMutationOptions(s),state:o,defaultOptions:s.mutationKey?i.getMutationDefaults(s.mutationKey):void 0,meta:s.meta});return this.add(a),a},r.add=function(i){this.mutations.push(i),this.notify(i)},r.remove=function(i){this.mutations=this.mutations.filter(function(s){return s!==i}),i.cancel(),this.notify(i)},r.clear=function(){var i=this;Ce.batch(function(){i.mutations.forEach(function(s){i.remove(s)})})},r.getAll=function(){return this.mutations},r.find=function(i){return typeof i.exact>"u"&&(i.exact=!0),this.mutations.find(function(s){return Qf(i,s)})},r.findAll=function(i){return this.mutations.filter(function(s){return Qf(i,s)})},r.notify=function(i){var s=this;Ce.batch(function(){s.listeners.forEach(function(o){o(i)})})},r.onFocus=function(){this.resumePausedMutations()},r.onOnline=function(){this.resumePausedMutations()},r.resumePausedMutations=function(){var i=this.mutations.filter(function(s){return s.state.isPaused});return Ce.batch(function(){return i.reduce(function(s,o){return s.then(function(){return o.continue().catch(Je)})},Promise.resolve())})},e}(Bs);function W0(){return{onFetch:function(e){e.fetchFn=function(){var r,n,i,s,o,a,c=(r=e.fetchOptions)==null||(n=r.meta)==null?void 0:n.refetchPage,l=(i=e.fetchOptions)==null||(s=i.meta)==null?void 0:s.fetchMore,u=l==null?void 0:l.pageParam,d=(l==null?void 0:l.direction)==="forward",p=(l==null?void 0:l.direction)==="backward",h=((o=e.state.data)==null?void 0:o.pages)||[],f=((a=e.state.data)==null?void 0:a.pageParams)||[],m=jv(),g=m==null?void 0:m.signal,v=f,y=!1,_=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},w=function(Ke,Bt,je,st){return v=st?[Bt].concat(v):[].concat(v,[Bt]),st?[je].concat(Ke):[].concat(Ke,[je])},b=function(Ke,Bt,je,st){if(y)return Promise.reject("Cancelled");if(typeof je>"u"&&!Bt&&Ke.length)return Promise.resolve(Ke);var P={queryKey:e.queryKey,signal:g,pageParam:je,meta:e.meta},L=_(P),$=Promise.resolve(L).then(function(fe){return w(Ke,je,fe,st)});if($a(L)){var ae=$;ae.cancel=L.cancel}return $},C;if(!h.length)C=b([]);else if(d){var D=typeof u<"u",x=D?u:Kf(e.options,h);C=b(h,D,x)}else if(p){var H=typeof u<"u",O=H?u:G0(e.options,h);C=b(h,H,O,!0)}else(function(){v=[];var Pe=typeof e.options.getNextPageParam>"u",Ke=c&&h[0]?c(h[0],0,h):!0;C=Ke?b([],Pe,f[0]):Promise.resolve(w([],f[0],h[0]));for(var Bt=function(P){C=C.then(function(L){var $=c&&h[P]?c(h[P],P,h):!0;if($){var ae=Pe?f[P]:Kf(e.options,L);return b(L,Pe,ae)}return Promise.resolve(w(L,f[P],h[P]))})},je=1;je<h.length;je++)Bt(je)})();var ue=C.then(function(Pe){return{pages:Pe,pageParams:v}}),ge=ue;return ge.cancel=function(){y=!0,m==null||m.abort(),$a(C)&&C.cancel()},ue}}}}function Kf(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function G0(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}var J0=function(){function t(r){r===void 0&&(r={}),this.queryCache=r.queryCache||new q0,this.mutationCache=r.mutationCache||new K0,this.defaultOptions=r.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=t.prototype;return e.mount=function(){var n=this;this.unsubscribeFocus=us.subscribe(function(){us.isFocused()&&ea.isOnline()&&(n.mutationCache.onFocus(),n.queryCache.onFocus())}),this.unsubscribeOnline=ea.subscribe(function(){us.isFocused()&&ea.isOnline()&&(n.mutationCache.onOnline(),n.queryCache.onOnline())})},e.unmount=function(){var n,i;(n=this.unsubscribeFocus)==null||n.call(this),(i=this.unsubscribeOnline)==null||i.call(this)},e.isFetching=function(n,i){var s=Fr(n,i),o=s[0];return o.fetching=!0,this.queryCache.findAll(o).length},e.isMutating=function(n){return this.mutationCache.findAll(re({},n,{fetching:!0})).length},e.getQueryData=function(n,i){var s;return(s=this.queryCache.find(n,i))==null?void 0:s.state.data},e.getQueriesData=function(n){return this.getQueryCache().findAll(n).map(function(i){var s=i.queryKey,o=i.state,a=o.data;return[s,a]})},e.setQueryData=function(n,i,s){var o=Zo(n),a=this.defaultQueryOptions(o);return this.queryCache.build(this,a).setData(i,s)},e.setQueriesData=function(n,i,s){var o=this;return Ce.batch(function(){return o.getQueryCache().findAll(n).map(function(a){var c=a.queryKey;return[c,o.setQueryData(c,i,s)]})})},e.getQueryState=function(n,i){var s;return(s=this.queryCache.find(n,i))==null?void 0:s.state},e.removeQueries=function(n,i){var s=Fr(n,i),o=s[0],a=this.queryCache;Ce.batch(function(){a.findAll(o).forEach(function(c){a.remove(c)})})},e.resetQueries=function(n,i,s){var o=this,a=Fr(n,i,s),c=a[0],l=a[1],u=this.queryCache,d=re({},c,{active:!0});return Ce.batch(function(){return u.findAll(c).forEach(function(p){p.reset()}),o.refetchQueries(d,l)})},e.cancelQueries=function(n,i,s){var o=this,a=Fr(n,i,s),c=a[0],l=a[1],u=l===void 0?{}:l;typeof u.revert>"u"&&(u.revert=!0);var d=Ce.batch(function(){return o.queryCache.findAll(c).map(function(p){return p.cancel(u)})});return Promise.all(d).then(Je).catch(Je)},e.invalidateQueries=function(n,i,s){var o,a,c,l=this,u=Fr(n,i,s),d=u[0],p=u[1],h=re({},d,{active:(o=(a=d.refetchActive)!=null?a:d.active)!=null?o:!0,inactive:(c=d.refetchInactive)!=null?c:!1});return Ce.batch(function(){return l.queryCache.findAll(d).forEach(function(f){f.invalidate()}),l.refetchQueries(h,p)})},e.refetchQueries=function(n,i,s){var o=this,a=Fr(n,i,s),c=a[0],l=a[1],u=Ce.batch(function(){return o.queryCache.findAll(c).map(function(p){return p.fetch(void 0,re({},l,{meta:{refetchPage:c==null?void 0:c.refetchPage}}))})}),d=Promise.all(u).then(Je);return l!=null&&l.throwOnError||(d=d.catch(Je)),d},e.fetchQuery=function(n,i,s){var o=Zo(n,i,s),a=this.defaultQueryOptions(o);typeof a.retry>"u"&&(a.retry=!1);var c=this.queryCache.build(this,a);return c.isStaleByTime(a.staleTime)?c.fetch(a):Promise.resolve(c.state.data)},e.prefetchQuery=function(n,i,s){return this.fetchQuery(n,i,s).then(Je).catch(Je)},e.fetchInfiniteQuery=function(n,i,s){var o=Zo(n,i,s);return o.behavior=W0(),this.fetchQuery(o)},e.prefetchInfiniteQuery=function(n,i,s){return this.fetchInfiniteQuery(n,i,s).then(Je).catch(Je)},e.cancelMutations=function(){var n=this,i=Ce.batch(function(){return n.mutationCache.getAll().map(function(s){return s.cancel()})});return Promise.all(i).then(Je).catch(Je)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(n){return this.mutationCache.build(this,n).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(n){this.defaultOptions=n},e.setQueryDefaults=function(n,i){var s=this.queryDefaults.find(function(o){return hn(n)===hn(o.queryKey)});s?s.defaultOptions=i:this.queryDefaults.push({queryKey:n,defaultOptions:i})},e.getQueryDefaults=function(n){var i;return n?(i=this.queryDefaults.find(function(s){return Aa(n,s.queryKey)}))==null?void 0:i.defaultOptions:void 0},e.setMutationDefaults=function(n,i){var s=this.mutationDefaults.find(function(o){return hn(n)===hn(o.mutationKey)});s?s.defaultOptions=i:this.mutationDefaults.push({mutationKey:n,defaultOptions:i})},e.getMutationDefaults=function(n){var i;return n?(i=this.mutationDefaults.find(function(s){return Aa(n,s.mutationKey)}))==null?void 0:i.defaultOptions:void 0},e.defaultQueryOptions=function(n){if(n!=null&&n._defaulted)return n;var i=re({},this.defaultOptions.queries,this.getQueryDefaults(n==null?void 0:n.queryKey),n,{_defaulted:!0});return!i.queryHash&&i.queryKey&&(i.queryHash=Bd(i.queryKey,i)),i},e.defaultQueryObserverOptions=function(n){return this.defaultQueryOptions(n)},e.defaultMutationOptions=function(n){return n!=null&&n._defaulted?n:re({},this.defaultOptions.mutations,this.getMutationDefaults(n==null?void 0:n.mutationKey),n,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},t}(),Y0=function(t){$s(e,t);function e(n,i){var s;return s=t.call(this)||this,s.client=n,s.options=i,s.trackedProps=[],s.selectError=null,s.bindMethods(),s.setOptions(i),s}var r=e.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),Wf(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return Du(this.currentQuery,this.options,this.options.refetchOnReconnect)},r.shouldFetchOnWindowFocus=function(){return Du(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(i,s){var o=this.options,a=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(i),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery();var c=this.hasListeners();c&&Gf(this.currentQuery,a,this.options,o)&&this.executeFetch(),this.updateResult(s),c&&(this.currentQuery!==a||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout();var l=this.computeRefetchInterval();c&&(this.currentQuery!==a||this.options.enabled!==o.enabled||l!==this.currentRefetchInterval)&&this.updateRefetchInterval(l)},r.getOptimisticResult=function(i){var s=this.client.defaultQueryObserverOptions(i),o=this.client.getQueryCache().build(this.client,s);return this.createResult(o,s)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(i,s){var o=this,a={},c=function(u){o.trackedProps.includes(u)||o.trackedProps.push(u)};return Object.keys(i).forEach(function(l){Object.defineProperty(a,l,{configurable:!1,enumerable:!0,get:function(){return c(l),i[l]}})}),(s.useErrorBoundary||s.suspense)&&c("error"),a},r.getNextResult=function(i){var s=this;return new Promise(function(o,a){var c=s.subscribe(function(l){l.isFetching||(c(),l.isError&&(i!=null&&i.throwOnError)?a(l.error):o(l))})})},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(i){return this.fetch(re({},i,{meta:{refetchPage:i==null?void 0:i.refetchPage}}))},r.fetchOptimistic=function(i){var s=this,o=this.client.defaultQueryObserverOptions(i),a=this.client.getQueryCache().build(this.client,o);return a.fetch().then(function(){return s.createResult(a,o)})},r.fetch=function(i){var s=this;return this.executeFetch(i).then(function(){return s.updateResult(),s.currentResult})},r.executeFetch=function(i){this.updateQuery();var s=this.currentQuery.fetch(this.options,i);return i!=null&&i.throwOnError||(s=s.catch(Je)),s},r.updateStaleTimeout=function(){var i=this;if(this.clearStaleTimeout(),!(Na||this.currentResult.isStale||!Tu(this.options.staleTime))){var s=Iv(this.currentResult.dataUpdatedAt,this.options.staleTime),o=s+1;this.staleTimeoutId=setTimeout(function(){i.currentResult.isStale||i.updateResult()},o)}},r.computeRefetchInterval=function(){var i;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(i=this.options.refetchInterval)!=null?i:!1},r.updateRefetchInterval=function(i){var s=this;this.clearRefetchInterval(),this.currentRefetchInterval=i,!(Na||this.options.enabled===!1||!Tu(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(s.options.refetchIntervalInBackground||us.isFocused())&&s.executeFetch()},this.currentRefetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},r.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},r.createResult=function(i,s){var o=this.currentQuery,a=this.options,c=this.currentResult,l=this.currentResultState,u=this.currentResultOptions,d=i!==o,p=d?i.state:this.currentQueryInitialState,h=d?this.currentResult:this.previousQueryResult,f=i.state,m=f.dataUpdatedAt,g=f.error,v=f.errorUpdatedAt,y=f.isFetching,_=f.status,w=!1,b=!1,C;if(s.optimisticResults){var D=this.hasListeners(),x=!D&&Wf(i,s),H=D&&Gf(i,o,s,a);(x||H)&&(y=!0,m||(_="loading"))}if(s.keepPreviousData&&!f.dataUpdateCount&&(h!=null&&h.isSuccess)&&_!=="error")C=h.data,m=h.dataUpdatedAt,_=h.status,w=!0;else if(s.select&&typeof f.data<"u")if(c&&f.data===(l==null?void 0:l.data)&&s.select===this.selectFn)C=this.selectResult;else try{this.selectFn=s.select,C=s.select(f.data),s.structuralSharing!==!1&&(C=Fa(c==null?void 0:c.data,C)),this.selectResult=C,this.selectError=null}catch(ge){Ba().error(ge),this.selectError=ge}else C=f.data;if(typeof s.placeholderData<"u"&&typeof C>"u"&&(_==="loading"||_==="idle")){var O;if(c!=null&&c.isPlaceholderData&&s.placeholderData===(u==null?void 0:u.placeholderData))O=c.data;else if(O=typeof s.placeholderData=="function"?s.placeholderData():s.placeholderData,s.select&&typeof O<"u")try{O=s.select(O),s.structuralSharing!==!1&&(O=Fa(c==null?void 0:c.data,O)),this.selectError=null}catch(ge){Ba().error(ge),this.selectError=ge}typeof O<"u"&&(_="success",C=O,b=!0)}this.selectError&&(g=this.selectError,C=this.selectResult,v=Date.now(),_="error");var ue={status:_,isLoading:_==="loading",isSuccess:_==="success",isError:_==="error",isIdle:_==="idle",data:C,dataUpdatedAt:m,error:g,errorUpdatedAt:v,failureCount:f.fetchFailureCount,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>p.dataUpdateCount||f.errorUpdateCount>p.errorUpdateCount,isFetching:y,isRefetching:y&&_!=="loading",isLoadingError:_==="error"&&f.dataUpdatedAt===0,isPlaceholderData:b,isPreviousData:w,isRefetchError:_==="error"&&f.dataUpdatedAt!==0,isStale:Ud(i,s),refetch:this.refetch,remove:this.remove};return ue},r.shouldNotifyListeners=function(i,s){if(!s)return!0;var o=this.options,a=o.notifyOnChangeProps,c=o.notifyOnChangePropsExclusions;if(!a&&!c||a==="tracked"&&!this.trackedProps.length)return!0;var l=a==="tracked"?this.trackedProps:a;return Object.keys(i).some(function(u){var d=u,p=i[d]!==s[d],h=l==null?void 0:l.some(function(m){return m===u}),f=c==null?void 0:c.some(function(m){return m===u});return p&&!f&&(!l||h)})},r.updateResult=function(i){var s=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!N0(this.currentResult,s)){var o={cache:!0};(i==null?void 0:i.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,s)&&(o.listeners=!0),this.notify(re({},o,i))}},r.updateQuery=function(){var i=this.client.getQueryCache().build(this.client,this.options);if(i!==this.currentQuery){var s=this.currentQuery;this.currentQuery=i,this.currentQueryInitialState=i.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(s==null||s.removeObserver(this),i.addObserver(this))}},r.onQueryUpdate=function(i){var s={};i.type==="success"?s.onSuccess=!0:i.type==="error"&&!ta(i.error)&&(s.onError=!0),this.updateResult(s),this.hasListeners()&&this.updateTimers()},r.notify=function(i){var s=this;Ce.batch(function(){i.onSuccess?(s.options.onSuccess==null||s.options.onSuccess(s.currentResult.data),s.options.onSettled==null||s.options.onSettled(s.currentResult.data,null)):i.onError&&(s.options.onError==null||s.options.onError(s.currentResult.error),s.options.onSettled==null||s.options.onSettled(void 0,s.currentResult.error)),i.listeners&&s.listeners.forEach(function(o){o(s.currentResult)}),i.cache&&s.client.getQueryCache().notify({query:s.currentQuery,type:"observerResultsUpdated"})})},e}(Bs);function X0(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Wf(t,e){return X0(t,e)||t.state.dataUpdatedAt>0&&Du(t,e,e.refetchOnMount)}function Du(t,e,r){if(e.enabled!==!1){var n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&Ud(t,e)}return!1}function Gf(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&Ud(t,r)}function Ud(t,e){return t.isStaleByTime(e.staleTime)}var Z0=PS.unstable_batchedUpdates;Ce.setBatchNotifyFunction(Z0);var eR=console;U0(eR);var Jf=tt.createContext(void 0),Bv=tt.createContext(!1);function Uv(t){return t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Jf),window.ReactQueryClientContext):Jf}var tR=function(){var e=tt.useContext(Uv(tt.useContext(Bv)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},rR=function(e){var r=e.client,n=e.contextSharing,i=n===void 0?!1:n,s=e.children;tt.useEffect(function(){return r.mount(),function(){r.unmount()}},[r]);var o=Uv(i);return tt.createElement(Bv.Provider,{value:i},tt.createElement(o.Provider,{value:r},s))};function nR(){var t=!1;return{clearReset:function(){t=!1},reset:function(){t=!0},isReset:function(){return t}}}var iR=tt.createContext(nR()),sR=function(){return tt.useContext(iR)};function oR(t,e,r){return typeof e=="function"?e.apply(void 0,r):typeof e=="boolean"?e:!!t}function aR(t,e){var r=tt.useRef(!1),n=tt.useState(0),i=n[1],s=tR(),o=sR(),a=s.defaultQueryObserverOptions(t);a.optimisticResults=!0,a.onError&&(a.onError=Ce.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=Ce.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=Ce.batchCalls(a.onSettled)),a.suspense&&(typeof a.staleTime!="number"&&(a.staleTime=1e3),a.cacheTime===0&&(a.cacheTime=1)),(a.suspense||a.useErrorBoundary)&&(o.isReset()||(a.retryOnMount=!1));var c=tt.useState(function(){return new e(s,a)}),l=c[0],u=l.getOptimisticResult(a);if(tt.useEffect(function(){r.current=!0,o.clearReset();var d=l.subscribe(Ce.batchCalls(function(){r.current&&i(function(p){return p+1})}));return l.updateResult(),function(){r.current=!1,d()}},[o,l]),tt.useEffect(function(){l.setOptions(a,{listeners:!1})},[a,l]),a.suspense&&u.isLoading)throw l.fetchOptimistic(a).then(function(d){var p=d.data;a.onSuccess==null||a.onSuccess(p),a.onSettled==null||a.onSettled(p,null)}).catch(function(d){o.clearReset(),a.onError==null||a.onError(d),a.onSettled==null||a.onSettled(void 0,d)});if(u.isError&&!o.isReset()&&!u.isFetching&&oR(a.suspense,a.useErrorBoundary,[u.error,l.getCurrentQuery()]))throw u.error;return a.notifyOnChangeProps==="tracked"&&(u=l.trackResult(u,a)),u}function zv(t,e,r){var n=Zo(t,e,r);return aR(n,Y0)}const qv=({room:t})=>{const e=$d();return te.jsxs("div",{onClick:()=>e(`/room/${t.roomId}`),className:"cursor-pointer bg-slate-600 w-52 overflow-hidden rounded-md shadow-lg flex items-center p-4 justify-between gap-5",children:[te.jsx("h1",{className:"font-bold truncate",children:cR(t.roomId)}),te.jsx("p",{className:"bg-sky-600 rounded-full p-1 px-3",children:t.length})]},t.roomId)};function cR(t){return t.length===0?t:t.charAt(0).toUpperCase()+t.slice(1)}function Qv(t,e){return function(){return t.apply(e,arguments)}}const{toString:lR}=Object.prototype,{getPrototypeOf:zd}=Object,ac=(t=>e=>{const r=lR.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ar=t=>(t=t.toLowerCase(),e=>ac(e)===t),cc=t=>e=>typeof e===t,{isArray:Di}=Array,Os=cc("undefined");function uR(t){return t!==null&&!Os(t)&&t.constructor!==null&&!Os(t.constructor)&&Ct(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Hv=ar("ArrayBuffer");function dR(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Hv(t.buffer),e}const pR=cc("string"),Ct=cc("function"),Vv=cc("number"),lc=t=>t!==null&&typeof t=="object",fR=t=>t===!0||t===!1,ra=t=>{if(ac(t)!=="object")return!1;const e=zd(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},hR=ar("Date"),mR=ar("File"),gR=ar("Blob"),vR=ar("FileList"),yR=t=>lc(t)&&Ct(t.pipe),_R=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ct(t.append)&&((e=ac(t))==="formdata"||e==="object"&&Ct(t.toString)&&t.toString()==="[object FormData]"))},wR=ar("URLSearchParams"),SR=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Us(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Di(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function Kv(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Wv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Gv=t=>!Os(t)&&t!==Wv;function xu(){const{caseless:t}=Gv(this)&&this||{},e={},r=(n,i)=>{const s=t&&Kv(e,i)||i;ra(e[s])&&ra(n)?e[s]=xu(e[s],n):ra(n)?e[s]=xu({},n):Di(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Us(arguments[n],r);return e}const RR=(t,e,r,{allOwnKeys:n}={})=>(Us(e,(i,s)=>{r&&Ct(i)?t[s]=Qv(i,r):t[s]=i},{allOwnKeys:n}),t),bR=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),CR=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},ER=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&zd(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},TR=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},PR=t=>{if(!t)return null;if(Di(t))return t;let e=t.length;if(!Vv(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},DR=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&zd(Uint8Array)),xR=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},kR=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},OR=ar("HTMLFormElement"),LR=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),Yf=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),MR=ar("RegExp"),Jv=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Us(r,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(n[s]=o||i)}),Object.defineProperties(t,n)},IR=t=>{Jv(t,(e,r)=>{if(Ct(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Ct(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},NR=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Di(t)?n(t):n(String(t).split(e)),r},jR=()=>{},AR=(t,e)=>(t=+t,Number.isFinite(t)?t:e),cl="abcdefghijklmnopqrstuvwxyz",Xf="0123456789",Yv={DIGIT:Xf,ALPHA:cl,ALPHA_DIGIT:cl+cl.toUpperCase()+Xf},FR=(t=16,e=Yv.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function $R(t){return!!(t&&Ct(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const BR=t=>{const e=new Array(10),r=(n,i)=>{if(lc(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Di(n)?[]:{};return Us(n,(o,a)=>{const c=r(o,i+1);!Os(c)&&(s[a]=c)}),e[i]=void 0,s}}return n};return r(t,0)},UR=ar("AsyncFunction"),zR=t=>t&&(lc(t)||Ct(t))&&Ct(t.then)&&Ct(t.catch),R={isArray:Di,isArrayBuffer:Hv,isBuffer:uR,isFormData:_R,isArrayBufferView:dR,isString:pR,isNumber:Vv,isBoolean:fR,isObject:lc,isPlainObject:ra,isUndefined:Os,isDate:hR,isFile:mR,isBlob:gR,isRegExp:MR,isFunction:Ct,isStream:yR,isURLSearchParams:wR,isTypedArray:DR,isFileList:vR,forEach:Us,merge:xu,extend:RR,trim:SR,stripBOM:bR,inherits:CR,toFlatObject:ER,kindOf:ac,kindOfTest:ar,endsWith:TR,toArray:PR,forEachEntry:xR,matchAll:kR,isHTMLForm:OR,hasOwnProperty:Yf,hasOwnProp:Yf,reduceDescriptors:Jv,freezeMethods:IR,toObjectSet:NR,toCamelCase:LR,noop:jR,toFiniteNumber:AR,findKey:Kv,global:Wv,isContextDefined:Gv,ALPHABET:Yv,generateString:FR,isSpecCompliantForm:$R,toJSONObject:BR,isAsyncFn:UR,isThenable:zR};function Y(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}R.inherits(Y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Xv=Y.prototype,Zv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Zv[t]={value:t}});Object.defineProperties(Y,Zv);Object.defineProperty(Xv,"isAxiosError",{value:!0});Y.from=(t,e,r,n,i,s)=>{const o=Object.create(Xv);return R.toFlatObject(t,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Y.call(o,t.message,e,r,n,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const qR=null;function ku(t){return R.isPlainObject(t)||R.isArray(t)}function ey(t){return R.endsWith(t,"[]")?t.slice(0,-2):t}function Zf(t,e,r){return t?t.concat(e).map(function(i,s){return i=ey(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function QR(t){return R.isArray(t)&&!t.some(ku)}const HR=R.toFlatObject(R,{},null,function(e){return/^is[A-Z]/.test(e)});function uc(t,e,r){if(!R.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=R.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!R.isUndefined(g[m])});const n=r.metaTokens,i=r.visitor||u,s=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(e);if(!R.isFunction(i))throw new TypeError("visitor must be a function");function l(f){if(f===null)return"";if(R.isDate(f))return f.toISOString();if(!c&&R.isBlob(f))throw new Y("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(f)||R.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,m,g){let v=f;if(f&&!g&&typeof f=="object"){if(R.endsWith(m,"{}"))m=n?m:m.slice(0,-2),f=JSON.stringify(f);else if(R.isArray(f)&&QR(f)||(R.isFileList(f)||R.endsWith(m,"[]"))&&(v=R.toArray(f)))return m=ey(m),v.forEach(function(_,w){!(R.isUndefined(_)||_===null)&&e.append(o===!0?Zf([m],w,s):o===null?m:m+"[]",l(_))}),!1}return ku(f)?!0:(e.append(Zf(g,m,s),l(f)),!1)}const d=[],p=Object.assign(HR,{defaultVisitor:u,convertValue:l,isVisitable:ku});function h(f,m){if(!R.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(f),R.forEach(f,function(v,y){(!(R.isUndefined(v)||v===null)&&i.call(e,v,R.isString(y)?y.trim():y,m,p))===!0&&h(v,m?m.concat(y):[y])}),d.pop()}}if(!R.isObject(t))throw new TypeError("data must be an object");return h(t),e}function eh(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function qd(t,e){this._pairs=[],t&&uc(t,this,e)}const ty=qd.prototype;ty.append=function(e,r){this._pairs.push([e,r])};ty.toString=function(e){const r=e?function(n){return e.call(this,n,eh)}:eh;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function VR(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ry(t,e,r){if(!e)return t;const n=r&&r.encode||VR,i=r&&r.serialize;let s;if(i?s=i(e,r):s=R.isURLSearchParams(e)?e.toString():new qd(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class th{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){R.forEach(this.handlers,function(n){n!==null&&e(n)})}}const ny={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},KR=typeof URLSearchParams<"u"?URLSearchParams:qd,WR=typeof FormData<"u"?FormData:null,GR=typeof Blob<"u"?Blob:null,JR={isBrowser:!0,classes:{URLSearchParams:KR,FormData:WR,Blob:GR},protocols:["http","https","file","blob","url","data"]},iy=typeof window<"u"&&typeof document<"u",YR=(t=>iy&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),XR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ZR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:iy,hasStandardBrowserEnv:YR,hasStandardBrowserWebWorkerEnv:XR},Symbol.toStringTag,{value:"Module"})),rr={...ZR,...JR};function eb(t,e){return uc(t,new rr.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return rr.isNode&&R.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function tb(t){return R.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rb(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function sy(t){function e(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=r.length;return o=!o&&R.isArray(i)?i.length:o,c?(R.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!R.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&R.isArray(i[o])&&(i[o]=rb(i[o])),!a)}if(R.isFormData(t)&&R.isFunction(t.entries)){const r={};return R.forEachEntry(t,(n,i)=>{e(tb(n),i,r,0)}),r}return null}function nb(t,e,r){if(R.isString(t))try{return(e||JSON.parse)(t),R.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Qd={transitional:ny,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=R.isObject(e);if(s&&R.isHTMLForm(e)&&(e=new FormData(e)),R.isFormData(e))return i?JSON.stringify(sy(e)):e;if(R.isArrayBuffer(e)||R.isBuffer(e)||R.isStream(e)||R.isFile(e)||R.isBlob(e))return e;if(R.isArrayBufferView(e))return e.buffer;if(R.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return eb(e,this.formSerializer).toString();if((a=R.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return uc(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),nb(e)):e}],transformResponse:[function(e){const r=this.transitional||Qd.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&R.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Y.from(a,Y.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rr.classes.FormData,Blob:rr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],t=>{Qd.headers[t]={}});const Hd=Qd,ib=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sb=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&ib[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},rh=Symbol("internals");function Qi(t){return t&&String(t).trim().toLowerCase()}function na(t){return t===!1||t==null?t:R.isArray(t)?t.map(na):String(t)}function ob(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const ab=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ll(t,e,r,n,i){if(R.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!R.isString(e)){if(R.isString(n))return e.indexOf(n)!==-1;if(R.isRegExp(n))return n.test(e)}}function cb(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function lb(t,e){const r=R.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}class dc{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,c,l){const u=Qi(c);if(!u)throw new Error("header name must be a non-empty string");const d=R.findKey(i,u);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=na(a))}const o=(a,c)=>R.forEach(a,(l,u)=>s(l,u,c));return R.isPlainObject(e)||e instanceof this.constructor?o(e,r):R.isString(e)&&(e=e.trim())&&!ab(e)?o(sb(e),r):e!=null&&s(r,e,n),this}get(e,r){if(e=Qi(e),e){const n=R.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return ob(i);if(R.isFunction(r))return r.call(this,i,n);if(R.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Qi(e),e){const n=R.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||ll(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=Qi(o),o){const a=R.findKey(n,o);a&&(!r||ll(n,n[a],a,r))&&(delete n[a],i=!0)}}return R.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||ll(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return R.forEach(this,(i,s)=>{const o=R.findKey(n,s);if(o){r[o]=na(i),delete r[s];return}const a=e?cb(s):String(s).trim();a!==s&&delete r[s],r[a]=na(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return R.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&R.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[rh]=this[rh]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Qi(o);n[a]||(lb(i,o),n[a]=!0)}return R.isArray(e)?e.forEach(s):s(e),this}}dc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(dc.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});R.freezeMethods(dc);const yr=dc;function ul(t,e){const r=this||Hd,n=e||r,i=yr.from(n.headers);let s=n.data;return R.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function oy(t){return!!(t&&t.__CANCEL__)}function zs(t,e,r){Y.call(this,t??"canceled",Y.ERR_CANCELED,e,r),this.name="CanceledError"}R.inherits(zs,Y,{__CANCEL__:!0});function ub(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Y("Request failed with status code "+r.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const db=rr.hasStandardBrowserEnv?{write(t,e,r,n,i,s){const o=[t+"="+encodeURIComponent(e)];R.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),R.isString(n)&&o.push("path="+n),R.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pb(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function fb(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ay(t,e){return t&&!pb(e)?fb(t,e):e}const hb=rr.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(s){let o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){const a=R.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function mb(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function gb(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=n[s];o||(o=l),r[i]=c,n[i]=l;let d=s,p=0;for(;d!==i;)p+=r[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),l-o<e)return;const h=u&&l-u;return h?Math.round(p*1e3/h):void 0}}function nh(t,e){let r=0;const n=gb(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-r,c=n(a),l=s<=o;r=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&l?(o-s)/c:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const vb=typeof XMLHttpRequest<"u",yb=vb&&function(t){return new Promise(function(r,n){let i=t.data;const s=yr.from(t.headers).normalize();let{responseType:o,withXSRFToken:a}=t,c;function l(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let u;if(R.isFormData(i)){if(rr.hasStandardBrowserEnv||rr.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((u=s.getContentType())!==!1){const[m,...g]=u?u.split(";").map(v=>v.trim()).filter(Boolean):[];s.setContentType([m||"multipart/form-data",...g].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(m+":"+g))}const p=ay(t.baseURL,t.url);d.open(t.method.toUpperCase(),ry(p,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function h(){if(!d)return;const m=yr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),v={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:m,config:t,request:d};ub(function(_){r(_),l()},function(_){n(_),l()},v),d=null}if("onloadend"in d?d.onloadend=h:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(h)},d.onabort=function(){d&&(n(new Y("Request aborted",Y.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new Y("Network Error",Y.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const v=t.transitional||ny;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),n(new Y(g,v.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,t,d)),d=null},rr.hasStandardBrowserEnv&&(a&&R.isFunction(a)&&(a=a(t)),a||a!==!1&&hb(p))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&db.read(t.xsrfCookieName);m&&s.set(t.xsrfHeaderName,m)}i===void 0&&s.setContentType(null),"setRequestHeader"in d&&R.forEach(s.toJSON(),function(g,v){d.setRequestHeader(v,g)}),R.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",nh(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",nh(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=m=>{d&&(n(!m||m.type?new zs(null,t,d):m),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const f=mb(p);if(f&&rr.protocols.indexOf(f)===-1){n(new Y("Unsupported protocol "+f+":",Y.ERR_BAD_REQUEST,t));return}d.send(i||null)})},Ou={http:qR,xhr:yb};R.forEach(Ou,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ih=t=>`- ${t}`,_b=t=>R.isFunction(t)||t===null||t===!1,cy={getAdapter:t=>{t=R.isArray(t)?t:[t];const{length:e}=t;let r,n;const i={};for(let s=0;s<e;s++){r=t[s];let o;if(n=r,!_b(r)&&(n=Ou[(o=String(r)).toLowerCase()],n===void 0))throw new Y(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+s]=n}if(!n){const s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(ih).join(`
`):" "+ih(s[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Ou};function dl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new zs(null,t)}function sh(t){return dl(t),t.headers=yr.from(t.headers),t.data=ul.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),cy.getAdapter(t.adapter||Hd.adapter)(t).then(function(n){return dl(t),n.data=ul.call(t,t.transformResponse,n),n.headers=yr.from(n.headers),n},function(n){return oy(n)||(dl(t),n&&n.response&&(n.response.data=ul.call(t,t.transformResponse,n.response),n.response.headers=yr.from(n.response.headers))),Promise.reject(n)})}const oh=t=>t instanceof yr?{...t}:t;function Ri(t,e){e=e||{};const r={};function n(l,u,d){return R.isPlainObject(l)&&R.isPlainObject(u)?R.merge.call({caseless:d},l,u):R.isPlainObject(u)?R.merge({},u):R.isArray(u)?u.slice():u}function i(l,u,d){if(R.isUndefined(u)){if(!R.isUndefined(l))return n(void 0,l,d)}else return n(l,u,d)}function s(l,u){if(!R.isUndefined(u))return n(void 0,u)}function o(l,u){if(R.isUndefined(u)){if(!R.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function a(l,u,d){if(d in e)return n(l,u);if(d in t)return n(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u)=>i(oh(l),oh(u),!0)};return R.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=c[u]||i,p=d(t[u],e[u],u);R.isUndefined(p)&&d!==a||(r[u]=p)}),r}const ly="1.6.8",Vd={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Vd[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const ah={};Vd.transitional=function(e,r,n){function i(s,o){return"[Axios v"+ly+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Y(i(o," has been removed"+(r?" in "+r:"")),Y.ERR_DEPRECATED);return r&&!ah[o]&&(ah[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function wb(t,e,r){if(typeof t!="object")throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new Y("option "+s+" must be "+c,Y.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Y("Unknown option "+s,Y.ERR_BAD_OPTION)}}const Lu={assertOptions:wb,validators:Vd},kr=Lu.validators;class Ua{constructor(e){this.defaults=e,this.interceptors={request:new th,response:new th}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Ri(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&Lu.assertOptions(n,{silentJSONParsing:kr.transitional(kr.boolean),forcedJSONParsing:kr.transitional(kr.boolean),clarifyTimeoutError:kr.transitional(kr.boolean)},!1),i!=null&&(R.isFunction(i)?r.paramsSerializer={serialize:i}:Lu.assertOptions(i,{encode:kr.function,serialize:kr.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&R.merge(s.common,s[r.method]);s&&R.forEach(["delete","get","head","post","put","patch","common"],f=>{delete s[f]}),r.headers=yr.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let u,d=0,p;if(!c){const f=[sh.bind(this),void 0];for(f.unshift.apply(f,a),f.push.apply(f,l),p=f.length,u=Promise.resolve(r);d<p;)u=u.then(f[d++],f[d++]);return u}p=a.length;let h=r;for(d=0;d<p;){const f=a[d++],m=a[d++];try{h=f(h)}catch(g){m.call(this,g);break}}try{u=sh.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,p=l.length;d<p;)u=u.then(l[d++],l[d++]);return u}getUri(e){e=Ri(this.defaults,e);const r=ay(e.baseURL,e.url);return ry(r,e.params,e.paramsSerializer)}}R.forEach(["delete","get","head","options"],function(e){Ua.prototype[e]=function(r,n){return this.request(Ri(n||{},{method:e,url:r,data:(n||{}).data}))}});R.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(Ri(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ua.prototype[e]=r(),Ua.prototype[e+"Form"]=r(!0)});const ia=Ua;class Kd{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new zs(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new Kd(function(i){e=i}),cancel:e}}}const Sb=Kd;function Rb(t){return function(r){return t.apply(null,r)}}function bb(t){return R.isObject(t)&&t.isAxiosError===!0}const Mu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mu).forEach(([t,e])=>{Mu[e]=t});const Cb=Mu;function uy(t){const e=new ia(t),r=Qv(ia.prototype.request,e);return R.extend(r,ia.prototype,e,{allOwnKeys:!0}),R.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return uy(Ri(t,i))},r}const Ie=uy(Hd);Ie.Axios=ia;Ie.CanceledError=zs;Ie.CancelToken=Sb;Ie.isCancel=oy;Ie.VERSION=ly;Ie.toFormData=uc;Ie.AxiosError=Y;Ie.Cancel=Ie.CanceledError;Ie.all=function(e){return Promise.all(e)};Ie.spread=Rb;Ie.isAxiosError=bb;Ie.mergeConfig=Ri;Ie.AxiosHeaders=yr;Ie.formToJSON=t=>sy(R.isHTMLForm(t)?new FormData(t):t);Ie.getAdapter=cy.getAdapter;Ie.HttpStatusCode=Cb;Ie.default=Ie;const dy=async()=>(await Ie.get("https://localhost:3000/rooms")).data,Eb=()=>{const{data:t}=zv({queryKey:["rooms"],queryFn:()=>dy(),refetchIntervalInBackground:2e4}),e=$d(),r=n=>{n.preventDefault();let s=new FormData(n.target).get("roomId");s&&(s=s.trim().toLowerCase(),e(`/room/${s}`))};return te.jsxs("div",{className:"flex items-center flex-col gap-3 justify-center p-10",children:[te.jsxs("form",{className:"bg-slate-600 px-6 py-3 rounded-md shadow-md",onSubmit:r,children:[te.jsx("input",{className:"p-2 text-lg outline-none bg-transparent",placeholder:"Enter room id here:",name:"roomId"}),te.jsx("button",{className:"bg-sky-600 px-3 py-2 rounded-md font-semibold uppercase",children:"Enter"})]}),te.jsx("div",{className:"flex gap-3 mt-3",children:t==null?void 0:t.map(n=>te.jsx(qv,{room:n},n.roomId))})]})},or=Object.create(null);or.open="0";or.close="1";or.ping="2";or.pong="3";or.message="4";or.upgrade="5";or.noop="6";const sa=Object.create(null);Object.keys(or).forEach(t=>{sa[or[t]]=t});const Iu={type:"error",data:"parser error"},py=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",fy=typeof ArrayBuffer=="function",hy=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Wd=({type:t,data:e},r,n)=>py&&e instanceof Blob?r?n(e):ch(e,n):fy&&(e instanceof ArrayBuffer||hy(e))?r?n(e):ch(new Blob([e]),n):n(or[t]+(e||"")),ch=(t,e)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];e("b"+(n||""))},r.readAsDataURL(t)};function lh(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let pl;function Tb(t,e){if(py&&t.data instanceof Blob)return t.data.arrayBuffer().then(lh).then(e);if(fy&&(t.data instanceof ArrayBuffer||hy(t.data)))return e(lh(t.data));Wd(t,!1,r=>{pl||(pl=new TextEncoder),e(pl.encode(r))})}const uh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",es=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<uh.length;t++)es[uh.charCodeAt(t)]=t;const Pb=t=>{let e=t.length*.75,r=t.length,n,i=0,s,o,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(n=0;n<r;n+=4)s=es[t.charCodeAt(n)],o=es[t.charCodeAt(n+1)],a=es[t.charCodeAt(n+2)],c=es[t.charCodeAt(n+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},Db=typeof ArrayBuffer=="function",Gd=(t,e)=>{if(typeof t!="string")return{type:"message",data:my(t,e)};const r=t.charAt(0);return r==="b"?{type:"message",data:xb(t.substring(1),e)}:sa[r]?t.length>1?{type:sa[r],data:t.substring(1)}:{type:sa[r]}:Iu},xb=(t,e)=>{if(Db){const r=Pb(t);return my(r,e)}else return{base64:!0,data:t}},my=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},gy="",kb=(t,e)=>{const r=t.length,n=new Array(r);let i=0;t.forEach((s,o)=>{Wd(s,!1,a=>{n[o]=a,++i===r&&e(n.join(gy))})})},Ob=(t,e)=>{const r=t.split(gy),n=[];for(let i=0;i<r.length;i++){const s=Gd(r[i],e);if(n.push(s),s.type==="error")break}return n};function Lb(){return new TransformStream({transform(t,e){Tb(t,r=>{const n=r.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(r)})}})}let fl;function So(t){return t.reduce((e,r)=>e+r.length,0)}function Ro(t,e){if(t[0].length===e)return t.shift();const r=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)r[i]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function Mb(t,e){fl||(fl=new TextDecoder);const r=[];let n=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(r.push(o);;){if(n===0){if(So(r)<1)break;const c=Ro(r,1);s=(c[0]&128)===128,i=c[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(So(r)<2)break;const c=Ro(r,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(So(r)<8)break;const c=Ro(r,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Iu);break}i=u*Math.pow(2,32)+l.getUint32(4),n=3}else{if(So(r)<i)break;const c=Ro(r,i);a.enqueue(Gd(s?c:fl.decode(c),e)),n=0}if(i===0||i>t){a.enqueue(Iu);break}}}})}const vy=4;function Oe(t){if(t)return Ib(t)}function Ib(t){for(var e in Oe.prototype)t[e]=Oe.prototype[e];return t}Oe.prototype.on=Oe.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Oe.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};Oe.prototype.off=Oe.prototype.removeListener=Oe.prototype.removeAllListeners=Oe.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+t],this};Oe.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,e)}return this};Oe.prototype.emitReserved=Oe.prototype.emit;Oe.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Oe.prototype.hasListeners=function(t){return!!this.listeners(t).length};const St=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function yy(t,...e){return e.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}const Nb=St.setTimeout,jb=St.clearTimeout;function pc(t,e){e.useNativeTimers?(t.setTimeoutFn=Nb.bind(St),t.clearTimeoutFn=jb.bind(St)):(t.setTimeoutFn=St.setTimeout.bind(St),t.clearTimeoutFn=St.clearTimeout.bind(St))}const Ab=1.33;function Fb(t){return typeof t=="string"?$b(t):Math.ceil((t.byteLength||t.size)*Ab)}function $b(t){let e=0,r=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}function Bb(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}function Ub(t){let e={},r=t.split("&");for(let n=0,i=r.length;n<i;n++){let s=r[n].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class zb extends Error{constructor(e,r,n){super(e),this.description=r,this.context=n,this.type="TransportError"}}let Jd=class extends Oe{constructor(e){super(),this.writable=!1,pc(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,r,n){return super.emitReserved("error",new zb(e,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const r=Gd(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,r={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const r=Bb(e);return r.length?"?"+r:""}};const _y="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Nu=64,qb={};let dh=0,bo=0,ph;function fh(t){let e="";do e=_y[t%Nu]+e,t=Math.floor(t/Nu);while(t>0);return e}function wy(){const t=fh(+new Date);return t!==ph?(dh=0,ph=t):t+"."+fh(dh++)}for(;bo<Nu;bo++)qb[_y[bo]]=bo;let Sy=!1;try{Sy=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Qb=Sy;function Ry(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Qb))return new XMLHttpRequest}catch{}if(!e)try{return new St[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Hb(){}const Vb=function(){return new Ry({xdomain:!1}).responseType!=null}();class Kb extends Jd{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const n=location.protocol==="https:";let i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const r=e&&e.forceBase64;this.supportsBinary=Vb&&!r,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const r=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Ob(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,kb(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=wy()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(e,r)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new sr(this.uri(),e)}doWrite(e,r){const n=this.request({method:"POST",data:e});n.on("success",r),n.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=e}}class sr extends Oe{constructor(e,r){super(),pc(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.data=r.data!==void 0?r.data:null,this.create()}create(){var e;const r=yy(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;const n=this.xhr=new Ry(r);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(n)),n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=sr.requestsCount++,sr.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Hb,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete sr.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}sr.requestsCount=0;sr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",hh);else if(typeof addEventListener=="function"){const t="onpagehide"in St?"pagehide":"unload";addEventListener(t,hh,!1)}}function hh(){for(let t in sr.requests)sr.requests.hasOwnProperty(t)&&sr.requests[t].abort()}const Yd=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0),Co=St.WebSocket||St.MozWebSocket,mh=!0,Wb="arraybuffer",gh=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Gb extends Jd{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),r=this.opts.protocols,n=gh?{}:yy(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=mh&&!gh?r?new Co(e,r):new Co(e):new Co(e,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],i=r===e.length-1;Wd(n,this.supportsBinary,s=>{const o={};try{mh&&this.ws.send(s)}catch{}i&&Yd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=wy()),this.supportsBinary||(r.b64=1),this.createUri(e,r)}check(){return!!Co}}class Jb extends Jd{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const r=Mb(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(r).getReader(),i=Lb();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const s=()=>{n.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],i=r===e.length-1;this.writer.write(n).then(()=>{i&&Yd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const Yb={websocket:Gb,webtransport:Jb,polling:Kb},Xb=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Zb=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ju(t){if(t.length>2e3)throw"URI too long";const e=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let i=Xb.exec(t||""),s={},o=14;for(;o--;)s[Zb[o]]=i[o]||"";return r!=-1&&n!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=eC(s,s.path),s.queryKey=tC(s,s.query),s}function eC(t,e){const r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function tC(t,e){const r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,s){i&&(r[i]=s)}),r}let by=class Gn extends Oe{constructor(e,r={}){super(),this.binaryType=Wb,this.writeBuffer=[],e&&typeof e=="object"&&(r=e,e=null),e?(e=ju(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=ju(r.host).host),pc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ub(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const r=Object.assign({},this.opts.query);r.EIO=vy,r.transport=e,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new Yb[e](n)}open(){let e;if(this.opts.rememberUpgrade&&Gn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(e){let r=this.createTransport(e),n=!1;Gn.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",d=>{if(!n)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Gn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=r.name,this.emitReserved("upgradeError",p)}}))};function s(){n||(n=!0,u(),r.close(),r=null)}const o=d=>{const p=new Error("probe error: "+d);p.transport=r.name,s(),this.emitReserved("upgradeError",p)};function a(){o("transport closed")}function c(){o("socket closed")}function l(d){r&&d.name!==r.name&&s()}const u=()=>{r.removeListener("open",i),r.removeListener("error",o),r.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};r.once("open",i),r.once("error",o),r.once("close",a),this.once("close",c),this.once("upgrading",l),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onOpen(){if(this.readyState="open",Gn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=Fb(i)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(e,r,n){return this.sendPacket("message",e,r,n),this}send(e,r,n){return this.sendPacket("message",e,r,n),this}sendPacket(e,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:e,data:r,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){Gn.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const r=[];let n=0;const i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&r.push(e[n]);return r}};by.protocol=vy;function rC(t,e="",r){let n=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),n=ju(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+e,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}const nC=typeof ArrayBuffer=="function",iC=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Cy=Object.prototype.toString,sC=typeof Blob=="function"||typeof Blob<"u"&&Cy.call(Blob)==="[object BlobConstructor]",oC=typeof File=="function"||typeof File<"u"&&Cy.call(File)==="[object FileConstructor]";function Xd(t){return nC&&(t instanceof ArrayBuffer||iC(t))||sC&&t instanceof Blob||oC&&t instanceof File}function oa(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(oa(t[r]))return!0;return!1}if(Xd(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return oa(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&oa(t[r]))return!0;return!1}function aC(t){const e=[],r=t.data,n=t;return n.data=Au(r,e),n.attachments=e.length,{packet:n,buffers:e}}function Au(t,e){if(!t)return t;if(Xd(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=Au(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Au(t[n],e));return r}return t}function cC(t,e){return t.data=Fu(t.data,e),delete t.attachments,t}function Fu(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Fu(t[r],e);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Fu(t[r],e));return t}const lC=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],uC=5;var J;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(J||(J={}));class dC{constructor(e){this.replacer=e}encode(e){return(e.type===J.EVENT||e.type===J.ACK)&&oa(e)?this.encodeAsBinary({type:e.type===J.EVENT?J.BINARY_EVENT:J.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===J.BINARY_EVENT||e.type===J.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){const r=aC(e),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}}function vh(t){return Object.prototype.toString.call(t)==="[object Object]"}class Zd extends Oe{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);const n=r.type===J.BINARY_EVENT;n||r.type===J.BINARY_ACK?(r.type=n?J.EVENT:J.ACK,this.reconstructor=new pC(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Xd(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0;const n={type:Number(e.charAt(0))};if(J[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===J.BINARY_EVENT||n.type===J.BINARY_ACK){const s=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);const o=e.substring(s,r);if(o!=Number(o)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(r+1)==="/"){const s=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(s,r)}else n.nsp="/";const i=e.charAt(r+1);if(i!==""&&Number(i)==i){const s=r+1;for(;++r;){const o=e.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===e.length)break}n.id=Number(e.substring(s,r+1))}if(e.charAt(++r)){const s=this.tryParse(e.substr(r));if(Zd.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case J.CONNECT:return vh(r);case J.DISCONNECT:return r===void 0;case J.CONNECT_ERROR:return typeof r=="string"||vh(r);case J.EVENT:case J.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&lC.indexOf(r[0])===-1);case J.ACK:case J.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class pC{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const r=cC(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const fC=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Zd,Encoder:dC,get PacketType(){return J},protocol:uC},Symbol.toStringTag,{value:"Module"}));function It(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const hC=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ey extends Oe{constructor(e,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[It(e,"open",this.onopen.bind(this)),It(e,"packet",this.onpacket.bind(this)),It(e,"error",this.onerror.bind(this)),It(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(hC.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const n={type:J.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const o=this.ids++,a=r.pop();this._registerAckCallback(o,a),n.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,r){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=r;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);r.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),r.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...r){return new Promise((n,i)=>{const s=(o,a)=>o?i(o):n(a);s.withError=!0,r.push(s),this.emit(e,...r)})}_addToQueue(e){let r;typeof e[e.length-1]=="function"&&(r=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...s)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!e||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:J.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case J.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case J.EVENT:case J.BINARY_EVENT:this.onevent(e);break;case J.ACK:case J.BINARY_ACK:this.onack(e);break;case J.DISCONNECT:this.ondisconnect();break;case J.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:J.ACK,id:e,data:i}))}}onack(e){const r=this.acks[e.id];typeof r=="function"&&(delete this.acks[e.id],r.withError&&e.data.unshift(null),r.apply(this,e.data))}onconnect(e,r){this.id=e,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:J.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,e.data)}}}function xi(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}xi.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+r:t-r}return Math.min(t,this.max)|0};xi.prototype.reset=function(){this.attempts=0};xi.prototype.setMin=function(t){this.ms=t};xi.prototype.setMax=function(t){this.max=t};xi.prototype.setJitter=function(t){this.jitter=t};class $u extends Oe{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,pc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new xi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;const i=r.parser||fC;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new by(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=It(r,"open",function(){n.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=It(r,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),r.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(It(e,"ping",this.onping.bind(this)),It(e,"data",this.ondata.bind(this)),It(e,"error",this.onerror.bind(this)),It(e,"close",this.onclose.bind(this)),It(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){Yd(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ey(this,e,r),this.nsps[e]=n),n}_destroy(e){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(e){const r=this.encoder.encode(e);for(let n=0;n<r.length;n++)this.engine.write(r[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Hi={};function aa(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const r=rC(t,e.path||"/socket.io"),n=r.source,i=r.id,s=r.path,o=Hi[i]&&s in Hi[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new $u(n,e):(Hi[i]||(Hi[i]=new $u(n,e)),c=Hi[i]),r.query&&!e.query&&(e.query=r.queryKey),c.socket(r.path,e)}Object.assign(aa,{Manager:$u,Socket:Ey,io:aa,connect:aa});const mC="wss://localhost:3000/mediasoup",Fe=aa(mC,{autoConnect:!1});var Ty={},Bu={exports:{}},hl,yh;function gC(){if(yh)return hl;yh=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;hl=function(u,d){d=d||{};var p=typeof u;if(p==="string"&&u.length>0)return o(u);if(p==="number"&&isFinite(u))return d.long?c(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var p=parseFloat(d[1]),h=(d[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return p*s;case"weeks":case"week":case"w":return p*i;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(u){var d=Math.abs(u);return d>=n?Math.round(u/n)+"d":d>=r?Math.round(u/r)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=n?l(u,d,n,"day"):d>=r?l(u,d,r,"hour"):d>=e?l(u,d,e,"minute"):d>=t?l(u,d,t,"second"):u+" ms"}function l(u,d,p,h){var f=d>=p*1.5;return Math.round(u/p)+" "+h+(f?"s":"")}return hl}function vC(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=gC(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,p=null,h,f;function m(...g){if(!m.enabled)return;const v=m,y=Number(new Date),_=y-(d||y);v.diff=_,v.prev=d,v.curr=y,d=y,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let w=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(C,D)=>{if(C==="%%")return"%";w++;const x=r.formatters[D];if(typeof x=="function"){const H=g[w];C=x.call(v,H),g.splice(w,1),w--}return C}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return m.namespace=u,m.useColors=r.useColors(),m.color=r.selectColor(u),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(h!==r.namespaces&&(h=r.namespaces,f=r.enabled(u)),f),set:g=>{p=g}}),typeof r.init=="function"&&r.init(m),m}function n(u,d){const p=r(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d;const p=(typeof u=="string"?u:"").split(/[\s,]+/),h=p.length;for(d=0;d<h;d++)p[d]&&(u=p[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let d,p;for(d=0,p=r.skips.length;d<p;d++)if(r.skips[d].test(u))return!1;for(d=0,p=r.names.length;d<p;d++)if(r.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var yC=vC;(function(t,e){var r={};e.formatArgs=i,e.save=s,e.load=o,e.useColors=n,e.storage=a(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let d=0,p=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(d++,h==="%c"&&(p=d))}),l.splice(p,0,u)}e.log=console.debug||console.log||(()=>{});function s(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function o(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=r.DEBUG),l}function a(){try{return localStorage}catch{}}t.exports=yC(e);const{formatters:c}=t.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Bu,Bu.exports);var fc=Bu.exports,Rn={},Uu={exports:{}};(function(t,e){(function(r,n){var i="1.0.37",s="",o="?",a="function",c="undefined",l="object",u="string",d="major",p="model",h="name",f="type",m="vendor",g="version",v="architecture",y="console",_="mobile",w="tablet",b="smarttv",C="wearable",D="embedded",x=500,H="Amazon",O="Apple",ue="ASUS",ge="BlackBerry",Pe="Browser",Ke="Chrome",Bt="Edge",je="Firefox",st="Google",P="Huawei",L="LG",$="Microsoft",ae="Motorola",fe="Opera",lr="Samsung",Ut="Sharp",Tr="Sony",Dt="Xiaomi",Pr="Zebra",yp="Facebook",_p="Chromium OS",wp="Mac OS",Xy=function(W,se){var z={};for(var de in W)se[de]&&se[de].length%2===0?z[de]=se[de].concat(W[de]):z[de]=W[de];return z},to=function(W){for(var se={},z=0;z<W.length;z++)se[W[z].toUpperCase()]=W[z];return se},Sp=function(W,se){return typeof W===u?Ii(se).indexOf(Ii(W))!==-1:!1},Ii=function(W){return W.toLowerCase()},Zy=function(W){return typeof W===u?W.replace(/[^\d\.]/g,s).split(".")[0]:n},Lc=function(W,se){if(typeof W===u)return W=W.replace(/^\s\s*/,s),typeof se===c?W:W.substring(0,x)},Ni=function(W,se){for(var z=0,de,Dr,zt,ne,B,qt;z<se.length&&!B;){var Ic=se[z],Cp=se[z+1];for(de=Dr=0;de<Ic.length&&!B&&Ic[de];)if(B=Ic[de++].exec(W),B)for(zt=0;zt<Cp.length;zt++)qt=B[++Dr],ne=Cp[zt],typeof ne===l&&ne.length>0?ne.length===2?typeof ne[1]==a?this[ne[0]]=ne[1].call(this,qt):this[ne[0]]=ne[1]:ne.length===3?typeof ne[1]===a&&!(ne[1].exec&&ne[1].test)?this[ne[0]]=qt?ne[1].call(this,qt,ne[2]):n:this[ne[0]]=qt?qt.replace(ne[1],ne[2]):n:ne.length===4&&(this[ne[0]]=qt?ne[3].call(this,qt.replace(ne[1],ne[2])):n):this[ne]=qt||n;z+=2}},Mc=function(W,se){for(var z in se)if(typeof se[z]===l&&se[z].length>0){for(var de=0;de<se[z].length;de++)if(Sp(se[z][de],W))return z===o?n:z}else if(Sp(se[z],W))return z===o?n:z;return W},e_={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Rp={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},bp={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,g],[/opios[\/ ]+([\w\.]+)/i],[g,[h,fe+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[h,fe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[g,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[h,"UC"+Pe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[g,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[g,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[g,[h,"Smart Lenovo "+Pe]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+Pe],g],[/\bfocus\/([\w\.]+)/i],[g,[h,je+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[h,fe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[h,fe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[h,"MIUI "+Pe]],[/fxios\/([-\w\.]+)/i],[g,[h,je]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+Pe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+Pe],g],[/samsungbrowser\/([\w\.]+)/i],[g,[h,lr+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],g],[/metasr[\/ ]?([\d\.]+)/i],[g,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,g],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,yp],g],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[g,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[h,Ke+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,Ke+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[h,"Android "+Pe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[g,Mc,e_]],[/(webkit|khtml)\/([\w\.]+)/i],[h,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[h,je+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,g],[/(cobalt)\/([\w\.]+)/i],[h,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,Ii]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,s,Ii]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,Ii]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[m,lr],[f,w]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[m,lr],[f,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[p,[m,O],[f,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[m,O],[f,w]],[/(macintosh);/i],[p,[m,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[m,Ut],[f,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[m,P],[f,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[m,P],[f,_]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[m,Dt],[f,_]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[m,Dt],[f,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[m,"OPPO"],[f,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[m,"Vivo"],[f,_]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[p,[m,"Realme"],[f,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[m,ae],[f,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[m,ae],[f,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[m,L],[f,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[m,L],[f,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[m,"Lenovo"],[f,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[m,"Nokia"],[f,_]],[/(pixel c)\b/i],[p,[m,st],[f,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[m,st],[f,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[m,Tr],[f,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[m,Tr],[f,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[m,"OnePlus"],[f,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[m,H],[f,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[m,H],[f,_]],[/(playbook);[-\w\),; ]+(rim)/i],[p,m,[f,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[m,ge],[f,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[m,ue],[f,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[m,ue],[f,_]],[/(nexus 9)/i],[p,[m,"HTC"],[f,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[p,/_/g," "],[f,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[m,"Acer"],[f,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[m,"Meizu"],[f,_]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[p,[m,"Ulefone"],[f,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,p,[f,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,p,[f,w]],[/(surface duo)/i],[p,[m,$],[f,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[m,"Fairphone"],[f,_]],[/(u304aa)/i],[p,[m,"AT&T"],[f,_]],[/\bsie-(\w*)/i],[p,[m,"Siemens"],[f,_]],[/\b(rct\w+) b/i],[p,[m,"RCA"],[f,w]],[/\b(venue[\d ]{2,7}) b/i],[p,[m,"Dell"],[f,w]],[/\b(q(?:mv|ta)\w+) b/i],[p,[m,"Verizon"],[f,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[m,"Barnes & Noble"],[f,w]],[/\b(tm\d{3}\w+) b/i],[p,[m,"NuVision"],[f,w]],[/\b(k88) b/i],[p,[m,"ZTE"],[f,w]],[/\b(nx\d{3}j) b/i],[p,[m,"ZTE"],[f,_]],[/\b(gen\d{3}) b.+49h/i],[p,[m,"Swiss"],[f,_]],[/\b(zur\d{3}) b/i],[p,[m,"Swiss"],[f,w]],[/\b((zeki)?tb.*\b) b/i],[p,[m,"Zeki"],[f,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],p,[f,w]],[/\b(ns-?\w{0,9}) b/i],[p,[m,"Insignia"],[f,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[m,"NextBook"],[f,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],p,[f,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],p,[f,_]],[/\b(ph-1) /i],[p,[m,"Essential"],[f,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[m,"Envizen"],[f,w]],[/\b(trio[-\w\. ]+) b/i],[p,[m,"MachSpeed"],[f,w]],[/\btu_(1491) b/i],[p,[m,"Rotor"],[f,w]],[/(shield[\w ]+) b/i],[p,[m,"Nvidia"],[f,w]],[/(sprint) (\w+)/i],[m,p,[f,_]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[m,$],[f,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[m,Pr],[f,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[m,Pr],[f,_]],[/smart-tv.+(samsung)/i],[m,[f,b]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[m,lr],[f,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,L],[f,b]],[/(apple) ?tv/i],[m,[p,O+" TV"],[f,b]],[/crkey/i],[[p,Ke+"cast"],[m,st],[f,b]],[/droid.+aft(\w+)( bui|\))/i],[p,[m,H],[f,b]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[m,Ut],[f,b]],[/(bravia[\w ]+)( bui|\))/i],[p,[m,Tr],[f,b]],[/(mitv-\w{5}) bui/i],[p,[m,Dt],[f,b]],[/Hbbtv.*(technisat) (.*);/i],[m,p,[f,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,Lc],[p,Lc],[f,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,p,[f,y]],[/droid.+; (shield) bui/i],[p,[m,"Nvidia"],[f,y]],[/(playstation [345portablevi]+)/i],[p,[m,Tr],[f,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[m,$],[f,y]],[/((pebble))app/i],[m,p,[f,C]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[m,O],[f,C]],[/droid.+; (glass) \d/i],[p,[m,st],[f,C]],[/droid.+; (wt63?0{2,3})\)/i],[p,[m,Pr],[f,C]],[/(quest( 2| pro)?)/i],[p,[m,yp],[f,C]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[f,D]],[/(aeobc)\b/i],[p,[m,H],[f,D]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[p,[f,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[f,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,_]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[h,Bt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,g],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[g,Mc,Rp]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,Mc,Rp],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,wp],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,g],[/\(bb(10);/i],[g,[h,ge]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[h,je+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[g,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[g,[h,Ke+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,_p],g],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,g],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,g]]},xt=function(W,se){if(typeof W===l&&(se=W,W=n),!(this instanceof xt))return new xt(W,se).getResult();var z=typeof r!==c&&r.navigator?r.navigator:n,de=W||(z&&z.userAgent?z.userAgent:s),Dr=z&&z.userAgentData?z.userAgentData:n,zt=se?Xy(bp,se):bp,ne=z&&z.userAgent==de;return this.getBrowser=function(){var B={};return B[h]=n,B[g]=n,Ni.call(B,de,zt.browser),B[d]=Zy(B[g]),ne&&z&&z.brave&&typeof z.brave.isBrave==a&&(B[h]="Brave"),B},this.getCPU=function(){var B={};return B[v]=n,Ni.call(B,de,zt.cpu),B},this.getDevice=function(){var B={};return B[m]=n,B[p]=n,B[f]=n,Ni.call(B,de,zt.device),ne&&!B[f]&&Dr&&Dr.mobile&&(B[f]=_),ne&&B[p]=="Macintosh"&&z&&typeof z.standalone!==c&&z.maxTouchPoints&&z.maxTouchPoints>2&&(B[p]="iPad",B[f]=w),B},this.getEngine=function(){var B={};return B[h]=n,B[g]=n,Ni.call(B,de,zt.engine),B},this.getOS=function(){var B={};return B[h]=n,B[g]=n,Ni.call(B,de,zt.os),ne&&!B[h]&&Dr&&Dr.platform!="Unknown"&&(B[h]=Dr.platform.replace(/chrome os/i,_p).replace(/macos/i,wp)),B},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return de},this.setUA=function(B){return de=typeof B===u&&B.length>x?Lc(B,x):B,this},this.setUA(de),this};xt.VERSION=i,xt.BROWSER=to([h,g,d]),xt.CPU=to([v]),xt.DEVICE=to([p,m,f,y,_,b,w,C,D]),xt.ENGINE=xt.OS=to([h,g]),t.exports&&(e=t.exports=xt),e.UAParser=xt;var Dn=typeof r!==c&&(r.jQuery||r.Zepto);if(Dn&&!Dn.ua){var ro=new xt;Dn.ua=ro.getResult(),Dn.ua.get=function(){return ro.getUA()},Dn.ua.set=function(W){ro.setUA(W);var se=ro.getResult();for(var z in se)Dn.ua[z]=se[z]}}})(typeof window=="object"?window:S)})(Uu,Uu.exports);var _C=Uu.exports,Se={},wC=S&&S.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Se,"__esModule",{value:!0});Se.Logger=void 0;const kn=wC(fc),On="mediasoup-client";let SC=class{constructor(e){e?(this._debug=(0,kn.default)(`${On}:${e}`),this._warn=(0,kn.default)(`${On}:WARN:${e}`),this._error=(0,kn.default)(`${On}:ERROR:${e}`)):(this._debug=(0,kn.default)(On),this._warn=(0,kn.default)(`${On}:WARN`),this._error=(0,kn.default)(`${On}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};Se.Logger=SC;var cr={},ep={exports:{}},hi=typeof Reflect=="object"?Reflect:null,_h=hi&&typeof hi.apply=="function"?hi.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ca;hi&&typeof hi.ownKeys=="function"?ca=hi.ownKeys:Object.getOwnPropertySymbols?ca=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ca=function(e){return Object.getOwnPropertyNames(e)};function RC(t){console&&console.warn&&console.warn(t)}var Py=Number.isNaN||function(e){return e!==e};function ce(){ce.init.call(this)}ep.exports=ce;ep.exports.once=TC;ce.EventEmitter=ce;ce.prototype._events=void 0;ce.prototype._eventsCount=0;ce.prototype._maxListeners=void 0;var wh=10;function hc(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ce,"defaultMaxListeners",{enumerable:!0,get:function(){return wh},set:function(t){if(typeof t!="number"||t<0||Py(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");wh=t}});ce.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ce.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Py(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Dy(t){return t._maxListeners===void 0?ce.defaultMaxListeners:t._maxListeners}ce.prototype.getMaxListeners=function(){return Dy(this)};ce.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")_h(c,this,r);else for(var l=c.length,u=My(c,l),n=0;n<l;++n)_h(u[n],this,r);return!0};function xy(t,e,r,n){var i,s,o;if(hc(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Dy(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,RC(a)}return t}ce.prototype.addListener=function(e,r){return xy(this,e,r,!1)};ce.prototype.on=ce.prototype.addListener;ce.prototype.prependListener=function(e,r){return xy(this,e,r,!0)};function bC(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ky(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=bC.bind(n);return i.listener=r,n.wrapFn=i,i}ce.prototype.once=function(e,r){return hc(r),this.on(e,ky(this,e,r)),this};ce.prototype.prependOnceListener=function(e,r){return hc(r),this.prependListener(e,ky(this,e,r)),this};ce.prototype.removeListener=function(e,r){var n,i,s,o,a;if(hc(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():CC(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};ce.prototype.off=ce.prototype.removeListener;ce.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Oy(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?EC(i):My(i,i.length)}ce.prototype.listeners=function(e){return Oy(this,e,!0)};ce.prototype.rawListeners=function(e){return Oy(this,e,!1)};ce.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Ly.call(t,e)};ce.prototype.listenerCount=Ly;function Ly(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ce.prototype.eventNames=function(){return this._eventsCount>0?ca(this._events):[]};function My(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function CC(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function EC(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function TC(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Iy(t,e,s,{once:!0}),e!=="error"&&PC(t,i,{once:!0})})}function PC(t,e,r){typeof t.on=="function"&&Iy(t,"error",e,r)}function Iy(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var DC=ep.exports;Object.defineProperty(cr,"__esModule",{value:!0});cr.EnhancedEventEmitter=void 0;const xC=DC,kC=Se,OC=new kC.Logger("EnhancedEventEmitter");class LC extends xC.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(e,...r){return super.emit(e,...r)}safeEmit(e,...r){const n=super.listenerCount(e);try{return super.emit(e,...r)}catch(i){return OC.error("safeEmit() | event listener threw an error [eventName:%s]:%o",e,i),!!n}}on(e,r){return super.on(e,r),this}off(e,r){return super.off(e,r),this}addListener(e,r){return super.on(e,r),this}prependListener(e,r){return super.prependListener(e,r),this}once(e,r){return super.once(e,r),this}prependOnceListener(e,r){return super.prependOnceListener(e,r),this}removeListener(e,r){return super.off(e,r),this}removeAllListeners(e){return super.removeAllListeners(e),this}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}rawListeners(e){return super.rawListeners(e)}}cr.EnhancedEventEmitter=LC;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.InvalidStateError=Ne.UnsupportedError=void 0;class tp extends Error{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,tp):this.stack=new Error(e).stack}}Ne.UnsupportedError=tp;class rp extends Error{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,rp):this.stack=new Error(e).stack}}Ne.InvalidStateError=rp;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.generateRandomNumber=Ee.clone=void 0;function MC(t){if(t!==void 0)return Number.isNaN(t)?NaN:typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}Ee.clone=MC;function IC(){return Math.round(Math.random()*1e7)}Ee.generateRandomNumber=IC;var Q={},Re={},mc={},NC=S&&S.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mc,"__esModule",{value:!0});mc.Logger=void 0;const Ln=NC(fc),Mn="h264-profile-level-id";let jC=class{constructor(e){e?(this._debug=(0,Ln.default)(`${Mn}:${e}`),this._warn=(0,Ln.default)(`${Mn}:WARN:${e}`),this._error=(0,Ln.default)(`${Mn}:ERROR:${e}`)):(this._debug=(0,Ln.default)(Mn),this._warn=(0,Ln.default)(`${Mn}:WARN`),this._error=(0,Ln.default)(`${Mn}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};mc.Logger=jC;Object.defineProperty(Re,"__esModule",{value:!0});Re.generateProfileLevelIdStringForAnswer=Re.isSameProfile=Re.parseSdpProfileLevelId=Re.levelToString=Re.profileToString=Re.profileLevelIdToString=Re.parseProfileLevelId=Re.ProfileLevelId=Re.Level=Re.Profile=void 0;const AC=mc,nn=new AC.Logger;var le;(function(t){t[t.ConstrainedBaseline=1]="ConstrainedBaseline",t[t.Baseline=2]="Baseline",t[t.Main=3]="Main",t[t.ConstrainedHigh=4]="ConstrainedHigh",t[t.High=5]="High",t[t.PredictiveHigh444=6]="PredictiveHigh444"})(le||(Re.Profile=le={}));var U;(function(t){t[t.L1_b=0]="L1_b",t[t.L1=10]="L1",t[t.L1_1=11]="L1_1",t[t.L1_2=12]="L1_2",t[t.L1_3=13]="L1_3",t[t.L2=20]="L2",t[t.L2_1=21]="L2_1",t[t.L2_2=22]="L2_2",t[t.L3=30]="L3",t[t.L3_1=31]="L3_1",t[t.L3_2=32]="L3_2",t[t.L4=40]="L4",t[t.L4_1=41]="L4_1",t[t.L4_2=42]="L4_2",t[t.L5=50]="L5",t[t.L5_1=51]="L5_1",t[t.L5_2=52]="L5_2"})(U||(Re.Level=U={}));class gc{constructor(e,r){this.profile=e,this.level=r}}Re.ProfileLevelId=gc;const FC=new gc(le.ConstrainedBaseline,U.L3_1);class ur{constructor(e){this.mask=~Sh("x",e),this.masked_value=Sh("1",e)}isMatch(e){return this.masked_value===(e&this.mask)}}class dr{constructor(e,r,n){this.profile_idc=e,this.profile_iop=r,this.profile=n}}const $C=[new dr(66,new ur("x1xx0000"),le.ConstrainedBaseline),new dr(77,new ur("1xxx0000"),le.ConstrainedBaseline),new dr(88,new ur("11xx0000"),le.ConstrainedBaseline),new dr(66,new ur("x0xx0000"),le.Baseline),new dr(88,new ur("10xx0000"),le.Baseline),new dr(77,new ur("0x0x0000"),le.Main),new dr(100,new ur("00000000"),le.High),new dr(100,new ur("00001100"),le.ConstrainedHigh),new dr(244,new ur("00000000"),le.PredictiveHigh444)];function Ny(t){if(typeof t!="string"||t.length!==6)return;const r=parseInt(t,16);if(r===0)return;const n=r&255,i=r>>8&255,s=r>>16&255;let o;switch(n){case U.L1_1:{o=i&16?U.L1_b:U.L1_1;break}case U.L1:case U.L1_2:case U.L1_3:case U.L2:case U.L2_1:case U.L2_2:case U.L3:case U.L3_1:case U.L3_2:case U.L4:case U.L4_1:case U.L4_2:case U.L5:case U.L5_1:case U.L5_2:{o=n;break}default:{nn.warn(`parseProfileLevelId() | unrecognized level_idc [str:${t}, level_idc:${n}]`);return}}for(const a of $C)if(s===a.profile_idc&&a.profile_iop.isMatch(i))return new gc(a.profile,o);nn.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${t}, profile_idc:${s}, profile_iop:${i}]`)}Re.parseProfileLevelId=Ny;function jy(t){if(t.level==U.L1_b)switch(t.profile){case le.ConstrainedBaseline:return"42f00b";case le.Baseline:return"42100b";case le.Main:return"4d100b";default:{nn.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${t.profile}`);return}}let e;switch(t.profile){case le.ConstrainedBaseline:{e="42e0";break}case le.Baseline:{e="4200";break}case le.Main:{e="4d00";break}case le.ConstrainedHigh:{e="640c";break}case le.High:{e="6400";break}case le.PredictiveHigh444:{e="f400";break}default:{nn.warn(`profileLevelIdToString() | unrecognized profile ${t.profile}`);return}}let r=t.level.toString(16);return r.length===1&&(r=`0${r}`),`${e}${r}`}Re.profileLevelIdToString=jy;function BC(t){switch(t){case le.ConstrainedBaseline:return"ConstrainedBaseline";case le.Baseline:return"Baseline";case le.Main:return"Main";case le.ConstrainedHigh:return"ConstrainedHigh";case le.High:return"High";case le.PredictiveHigh444:return"PredictiveHigh444";default:{nn.warn(`profileToString() | unrecognized profile ${t}`);return}}}Re.profileToString=BC;function UC(t){switch(t){case U.L1_b:return"1b";case U.L1:return"1";case U.L1_1:return"1.1";case U.L1_2:return"1.2";case U.L1_3:return"1.3";case U.L2:return"2";case U.L2_1:return"2.1";case U.L2_2:return"2.2";case U.L3:return"3";case U.L3_1:return"3.1";case U.L3_2:return"3.2";case U.L4:return"4";case U.L4_1:return"4.1";case U.L4_2:return"4.2";case U.L5:return"5";case U.L5_1:return"5.1";case U.L5_2:return"5.2";default:{nn.warn(`levelToString() | unrecognized level ${t}`);return}}}Re.levelToString=UC;function Ls(t={}){const e=t["profile-level-id"];return e?Ny(e):FC}Re.parseSdpProfileLevelId=Ls;function zC(t={},e={}){const r=Ls(t),n=Ls(e);return!!(r&&n&&r.profile===n.profile)}Re.isSameProfile=zC;function qC(t={},e={}){if(!t["profile-level-id"]&&!e["profile-level-id"]){nn.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");return}const r=Ls(t),n=Ls(e);if(!r)throw new TypeError("invalid local_profile_level_id");if(!n)throw new TypeError("invalid remote_profile_level_id");if(r.profile!==n.profile)throw new TypeError("H264 Profile mismatch");const i=Rh(t)&&Rh(e),s=r.level,o=n.level,a=HC(s,o),c=i?s:a;return nn.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${r.profile}, level:${c}]`),jy(new gc(r.profile,c))}Re.generateProfileLevelIdStringForAnswer=qC;function Sh(t,e){return+(e[0]===t)<<7|+(e[1]===t)<<6|+(e[2]===t)<<5|+(e[3]===t)<<4|+(e[4]===t)<<3|+(e[5]===t)<<2|+(e[6]===t)<<1|+(e[7]===t)<<0}function QC(t,e){return t===U.L1_b?e!==U.L1&&e!==U.L1_b:e===U.L1_b?t!==U.L1:t<e}function HC(t,e){return QC(t,e)?t:e}function Rh(t={}){const e=t["level-asymmetry-allowed"];return e===!0||e===1||e==="1"}var VC=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),KC=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ay=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&VC(e,t,r);return KC(e,t),e};Object.defineProperty(Q,"__esModule",{value:!0});Q.canReceive=Q.canSend=Q.generateProbatorRtpParameters=Q.reduceCodecs=Q.getSendingRemoteRtpParameters=Q.getSendingRtpParameters=Q.getRecvRtpCapabilities=Q.getExtendedRtpCapabilities=Q.validateSctpCapabilities=Q.validateSctpStreamParameters=Q.validateRtpParameters=Q.validateRtpCapabilities=void 0;const bh=Ay(Re),WC=Ay(Ee),GC="probator",JC=1234,YC=127;function XC(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(t.codecs&&!Array.isArray(t.codecs))throw new TypeError("caps.codecs is not an array");t.codecs||(t.codecs=[]);for(const e of t.codecs)l1(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)u1(e)}Q.validateRtpCapabilities=XC;function np(t){if(typeof t!="object")throw new TypeError("params is not an object");if(t.mid&&typeof t.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(t.codecs))throw new TypeError("missing params.codecs");for(const e of t.codecs)d1(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("params.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)p1(e);if(t.encodings&&!Array.isArray(t.encodings))throw new TypeError("params.encodings is not an array");t.encodings||(t.encodings=[]);for(const e of t.encodings)f1(e);if(t.rtcp&&typeof t.rtcp!="object")throw new TypeError("params.rtcp is not an object");t.rtcp||(t.rtcp={}),h1(t.rtcp)}Q.validateRtpParameters=np;function ZC(t){if(typeof t!="object")throw new TypeError("params is not an object");if(typeof t.streamId!="number")throw new TypeError("missing params.streamId");let e=!1;if(typeof t.ordered=="boolean"?e=!0:t.ordered=!0,t.maxPacketLifeTime&&typeof t.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(t.maxRetransmits&&typeof t.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(t.maxPacketLifeTime&&t.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(e&&t.ordered&&(t.maxPacketLifeTime||t.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!e&&(t.maxPacketLifeTime||t.maxRetransmits)&&(t.ordered=!1),t.label&&typeof t.label!="string")throw new TypeError("invalid params.label");if(t.protocol&&typeof t.protocol!="string")throw new TypeError("invalid params.protocol")}Q.validateSctpStreamParameters=ZC;function e1(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(!t.numStreams||typeof t.numStreams!="object")throw new TypeError("missing caps.numStreams");m1(t.numStreams)}Q.validateSctpCapabilities=e1;function t1(t,e){const r={codecs:[],headerExtensions:[]};for(const n of e.codecs||[]){if(ds(n))continue;const i=(t.codecs||[]).find(o=>$y(o,n,{strict:!0,modify:!0}));if(!i)continue;const s={mimeType:i.mimeType,kind:i.kind,clockRate:i.clockRate,channels:i.channels,localPayloadType:i.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:n.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:i.parameters,remoteParameters:n.parameters,rtcpFeedback:v1(i,n)};r.codecs.push(s)}for(const n of r.codecs){const i=t.codecs.find(o=>ds(o)&&o.parameters.apt===n.localPayloadType),s=e.codecs.find(o=>ds(o)&&o.parameters.apt===n.remotePayloadType);i&&s&&(n.localRtxPayloadType=i.preferredPayloadType,n.remoteRtxPayloadType=s.preferredPayloadType)}for(const n of e.headerExtensions){const i=t.headerExtensions.find(o=>g1(o,n));if(!i)continue;const s={kind:n.kind,uri:n.uri,sendId:i.preferredId,recvId:n.preferredId,encrypt:i.preferredEncrypt,direction:"sendrecv"};switch(n.direction){case"sendrecv":{s.direction="sendrecv";break}case"recvonly":{s.direction="sendonly";break}case"sendonly":{s.direction="recvonly";break}case"inactive":{s.direction="inactive";break}}r.headerExtensions.push(s)}return r}Q.getExtendedRtpCapabilities=t1;function r1(t){const e={codecs:[],headerExtensions:[]};for(const r of t.codecs){const n={mimeType:r.mimeType,kind:r.kind,preferredPayloadType:r.remotePayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(e.codecs.push(n),!r.remoteRtxPayloadType)continue;const i={mimeType:`${r.kind}/rtx`,kind:r.kind,preferredPayloadType:r.remoteRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.remotePayloadType},rtcpFeedback:[]};e.codecs.push(i)}for(const r of t.headerExtensions){if(r.direction!=="sendrecv"&&r.direction!=="recvonly")continue;const n={kind:r.kind,uri:r.uri,preferredId:r.recvId,preferredEncrypt:r.encrypt,direction:r.direction};e.headerExtensions.push(n)}return e}Q.getRecvRtpCapabilities=r1;function n1(t,e){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of e.codecs){if(n.kind!==t)continue;const i={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.localParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(i),n.localRtxPayloadType){const s={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(s)}}for(const n of e.headerExtensions){if(n.kind&&n.kind!==t||n.direction!=="sendrecv"&&n.direction!=="sendonly")continue;const i={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(i)}return r}Q.getSendingRtpParameters=n1;function i1(t,e){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of e.codecs){if(n.kind!==t)continue;const i={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.remoteParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(i),n.localRtxPayloadType){const s={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(s)}}for(const n of e.headerExtensions){if(n.kind&&n.kind!==t||n.direction!=="sendrecv"&&n.direction!=="sendonly")continue;const i={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(i)}if(r.headerExtensions.some(n=>n.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(i=>i.type!=="goog-remb");else if(r.headerExtensions.some(n=>n.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(i=>i.type!=="transport-cc");else for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(i=>i.type!=="transport-cc"&&i.type!=="goog-remb");return r}Q.getSendingRemoteRtpParameters=i1;function s1(t,e){const r=[];if(!e)r.push(t[0]),ds(t[1])&&r.push(t[1]);else{for(let n=0;n<t.length;++n)if($y(t[n],e)){r.push(t[n]),ds(t[n+1])&&r.push(t[n+1]);break}if(r.length===0)throw new TypeError("no matching codec found")}return r}Q.reduceCodecs=s1;function o1(t){t=WC.clone(t),np(t);const e={mid:GC,codecs:[],headerExtensions:[],encodings:[{ssrc:JC}],rtcp:{cname:"probator"}};return e.codecs.push(t.codecs[0]),e.codecs[0].payloadType=YC,e.headerExtensions=t.headerExtensions,e}Q.generateProbatorRtpParameters=o1;function a1(t,e){return e.codecs.some(r=>r.kind===t)}Q.canSend=a1;function c1(t,e){if(np(t),t.codecs.length===0)return!1;const r=t.codecs[0];return e.codecs.some(n=>n.remotePayloadType===r.payloadType)}Q.canReceive=c1;function l1(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const r=e.exec(t.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if(t.kind=r[1].toLowerCase(),t.preferredPayloadType&&typeof t.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");t.kind==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const n of Object.keys(t.parameters)){let i=t.parameters[n];if(i===void 0&&(t.parameters[n]="",i=""),typeof i!="string"&&typeof i!="number")throw new TypeError(`invalid codec parameter [key:${n}s, value:${i}]`);if(n==="apt"&&typeof i!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const n of t.rtcpFeedback)Fy(n)}function Fy(t){if(typeof t!="object")throw new TypeError("fb is not an object");if(!t.type||typeof t.type!="string")throw new TypeError("missing fb.type");(!t.parameter||typeof t.parameter!="string")&&(t.parameter="")}function u1(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(t.kind!=="audio"&&t.kind!=="video")throw new TypeError("invalid ext.kind");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.preferredId!="number")throw new TypeError("missing ext.preferredId");if(t.preferredEncrypt&&typeof t.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(t.preferredEncrypt||(t.preferredEncrypt=!1),t.direction&&typeof t.direction!="string")throw new TypeError("invalid ext.direction");t.direction||(t.direction="sendrecv")}function d1(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const r=e.exec(t.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if(typeof t.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");r[1].toLowerCase()==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const i of Object.keys(t.parameters)){let s=t.parameters[i];if(s===void 0&&(t.parameters[i]="",s=""),typeof s!="string"&&typeof s!="number")throw new TypeError(`invalid codec parameter [key:${i}s, value:${s}]`);if(i==="apt"&&typeof s!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const i of t.rtcpFeedback)Fy(i)}function p1(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.id!="number")throw new TypeError("missing ext.id");if(t.encrypt&&typeof t.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");t.encrypt||(t.encrypt=!1),(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const e of Object.keys(t.parameters)){let r=t.parameters[e];if(r===void 0&&(t.parameters[e]="",r=""),typeof r!="string"&&typeof r!="number")throw new TypeError("invalid header extension parameter")}}function f1(t){if(typeof t!="object")throw new TypeError("encoding is not an object");if(t.ssrc&&typeof t.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(t.rid&&typeof t.rid!="string")throw new TypeError("invalid encoding.rid");if(t.rtx&&typeof t.rtx!="object")throw new TypeError("invalid encoding.rtx");if(t.rtx&&typeof t.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!t.dtx||typeof t.dtx!="boolean")&&(t.dtx=!1),t.scalabilityMode&&typeof t.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function h1(t){if(typeof t!="object")throw new TypeError("rtcp is not an object");if(t.cname&&typeof t.cname!="string")throw new TypeError("invalid rtcp.cname");(!t.reducedSize||typeof t.reducedSize!="boolean")&&(t.reducedSize=!0)}function m1(t){if(typeof t!="object")throw new TypeError("numStreams is not an object");if(typeof t.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof t.MIS!="number")throw new TypeError("missing numStreams.MIS")}function ds(t){return t?/.+\/rtx$/i.test(t.mimeType):!1}function $y(t,e,{strict:r=!1,modify:n=!1}={}){const i=t.mimeType.toLowerCase(),s=e.mimeType.toLowerCase();if(i!==s||t.clockRate!==e.clockRate||t.channels!==e.channels)return!1;switch(i){case"video/h264":{if(r){const o=t.parameters["packetization-mode"]||0,a=e.parameters["packetization-mode"]||0;if(o!==a||!bh.isSameProfile(t.parameters,e.parameters))return!1;let c;try{c=bh.generateProfileLevelIdStringForAnswer(t.parameters,e.parameters)}catch{return!1}n&&(c?(t.parameters["profile-level-id"]=c,e.parameters["profile-level-id"]=c):(delete t.parameters["profile-level-id"],delete e.parameters["profile-level-id"]))}break}case"video/vp9":{if(r){const o=t.parameters["profile-id"]||0,a=e.parameters["profile-id"]||0;if(o!==a)return!1}break}}return!0}function g1(t,e){return!(t.kind&&e.kind&&t.kind!==e.kind||t.uri!==e.uri)}function v1(t,e){const r=[];for(const n of t.rtcpFeedback||[]){const i=(e.rtcpFeedback||[]).find(s=>s.type===n.type&&(s.parameter===n.parameter||!s.parameter&&!n.parameter));i&&r.push(i)}return r}var qs={},Zr={},vc={};Object.defineProperty(vc,"__esModule",{value:!0});vc.Logger=void 0;const In=fc,Nn="awaitqueue";class y1{constructor(e){e?(this._debug=(0,In.default)(`${Nn}:${e}`),this._warn=(0,In.default)(`${Nn}:WARN:${e}`),this._error=(0,In.default)(`${Nn}:ERROR:${e}`)):(this._debug=(0,In.default)(Nn),this._warn=(0,In.default)(`${Nn}:WARN`),this._error=(0,In.default)(`${Nn}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}vc.Logger=y1;Object.defineProperty(Zr,"__esModule",{value:!0});Zr.AwaitQueue=Zr.AwaitQueueRemovedTaskError=Zr.AwaitQueueStoppedError=void 0;const _1=vc,Or=new _1.Logger;class yc extends Error{constructor(e){super(e??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,yc)}}Zr.AwaitQueueStoppedError=yc;class _c extends Error{constructor(e){super(e??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_c)}}Zr.AwaitQueueRemovedTaskError=_c;class w1{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,r){if(r=r??e.name,Or.debug(`push() [name:${r}]`),typeof e!="function")throw new TypeError("given task is not a function");if(r)try{Object.defineProperty(e,"name",{value:r})}catch{}return new Promise((n,i)=>{const s={id:this.nextTaskId++,task:e,name:r,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:o=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),Or.debug(`resolving task [name:${s.name}]`),n(o);const[a]=this.pendingTasks.values();a&&!a.executedAt&&this.execute(a)},reject:o=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),Or.debug(`rejecting task [name:${s.name}]: %s`,String(o)),i(o),!this.stopping)){const[a]=this.pendingTasks.values();a&&!a.executedAt&&this.execute(a)}}};this.pendingTasks.set(s.id,s),this.pendingTasks.size===1&&this.execute(s)})}stop(){Or.debug("stop()"),this.stopping=!0;for(const e of this.pendingTasks.values())Or.debug(`stop() | stopping task [name:${e.name}]`),e.reject(new yc);this.stopping=!1}remove(e){Or.debug(`remove() [taskIdx:${e}]`);const r=Array.from(this.pendingTasks.values())[e];if(!r){Or.debug(`stop() | no task with given idx [taskIdx:${e}]`);return}r.reject(new _c)}dump(){const e=Date.now();let r=0;return Array.from(this.pendingTasks.values()).map(n=>({idx:r++,task:n.task,name:n.name,enqueuedTime:n.executedAt?n.executedAt-n.enqueuedAt:e-n.enqueuedAt,executionTime:n.executedAt?e-n.executedAt:0}))}async execute(e){if(Or.debug(`execute() [name:${e.name}]`),e.executedAt)throw new Error("task already being executed");e.executedAt=Date.now();try{const r=await e.task();e.resolve(r)}catch(r){e.reject(r)}}}Zr.AwaitQueue=w1;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Ch;var S1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:S):t=>(Ch||(Ch=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.Producer=void 0;const R1=Se,Eh=cr,jn=Ne,Ht=new R1.Logger("Producer");class b1 extends Eh.EnhancedEventEmitter{constructor({id:e,localId:r,rtpSender:n,track:i,rtpParameters:s,stopTracks:o,disableTrackOnPause:a,zeroRtpOnPause:c,appData:l}){super(),this._closed=!1,this._observer=new Eh.EnhancedEventEmitter,Ht.debug("constructor()"),this._id=e,this._localId=r,this._rtpSender=n,this._track=i,this._kind=i.kind,this._rtpParameters=s,this._paused=a?!i.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=o,this._disableTrackOnPause=a,this._zeroRtpOnPause=c,this._appData=l||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(Ht.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Ht.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new jn.InvalidStateError("closed");return new Promise((e,r)=>{this.safeEmit("@getstats",e,r)})}pause(){if(Ht.debug("pause()"),this._closed){Ht.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((e,r)=>{this.safeEmit("@pause",e,r)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(Ht.debug("resume()"),this._closed){Ht.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((e,r)=>{this.safeEmit("@resume",e,r)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:e}){if(Ht.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch{}throw new jn.InvalidStateError("closed")}else if(e&&e.readyState==="ended")throw new jn.InvalidStateError("track ended");if(e===this._track){Ht.debug("replaceTrack() | same track, ignored");return}await new Promise((r,n)=>{this.safeEmit("@replacetrack",e,r,n)}),this.destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(e){if(this._closed)throw new jn.InvalidStateError("closed");if(this._kind!=="video")throw new jn.UnsupportedError("not a video Producer");if(typeof e!="number")throw new TypeError("invalid spatialLayer");e!==this._maxSpatialLayer&&(await new Promise((r,n)=>{this.safeEmit("@setmaxspatiallayer",e,r,n)}).catch(()=>{}),this._maxSpatialLayer=e)}async setRtpEncodingParameters(e){if(this._closed)throw new jn.InvalidStateError("closed");if(typeof e!="object")throw new TypeError("invalid params");await new Promise((r,n)=>{this.safeEmit("@setrtpencodingparameters",e,r,n)})}onTrackEnded(){Ht.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}Qs.Producer=b1;var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Consumer=void 0;const C1=Se,Th=cr,E1=Ne,Vt=new C1.Logger("Consumer");class T1 extends Th.EnhancedEventEmitter{constructor({id:e,localId:r,producerId:n,rtpReceiver:i,track:s,rtpParameters:o,appData:a}){super(),this._closed=!1,this._observer=new Th.EnhancedEventEmitter,Vt.debug("constructor()"),this._id=e,this._localId=r,this._producerId=n,this._rtpReceiver=i,this._track=s,this._rtpParameters=o,this._paused=!s.enabled,this._appData=a||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(Vt.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Vt.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new E1.InvalidStateError("closed");return new Promise((e,r)=>{this.safeEmit("@getstats",e,r)})}pause(){if(Vt.debug("pause()"),this._closed){Vt.error("pause() | Consumer closed");return}if(this._paused){Vt.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(Vt.debug("resume()"),this._closed){Vt.error("resume() | Consumer closed");return}if(!this._paused){Vt.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){Vt.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}Hs.Consumer=T1;var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.DataProducer=void 0;const P1=Se,Ph=cr,D1=Ne,pr=new P1.Logger("DataProducer");class x1 extends Ph.EnhancedEventEmitter{constructor({id:e,dataChannel:r,sctpStreamParameters:n,appData:i}){super(),this._closed=!1,this._observer=new Ph.EnhancedEventEmitter,pr.debug("constructor()"),this._id=e,this._dataChannel=r,this._sctpStreamParameters=n,this._appData=i||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){this._dataChannel.bufferedAmountLowThreshold=e}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(pr.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(pr.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(e){if(pr.debug("send()"),this._closed)throw new D1.InvalidStateError("closed");this._dataChannel.send(e)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(pr.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:r}=e;r||(r=new Error("unknown DataChannel error")),r.errorDetail==="sctp-failure"?pr.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",r.sctpCauseCode,r.message):pr.error('DataChannel "error" event: %o',r),this.safeEmit("error",r)}),this._dataChannel.addEventListener("close",()=>{this._closed||(pr.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||pr.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}Vs.DataProducer=x1;var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.DataConsumer=void 0;const k1=Se,Dh=cr,cn=new k1.Logger("DataConsumer");class O1 extends Dh.EnhancedEventEmitter{constructor({id:e,dataProducerId:r,dataChannel:n,sctpStreamParameters:i,appData:s}){super(),this._closed=!1,this._observer=new Dh.EnhancedEventEmitter,cn.debug("constructor()"),this._id=e,this._dataProducerId=r,this._dataChannel=n,this._sctpStreamParameters=i,this._appData=s||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(e){this._dataChannel.binaryType=e}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(cn.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(cn.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(cn.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:r}=e;r||(r=new Error("unknown DataChannel error")),r.errorDetail==="sctp-failure"?cn.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",r.sctpCauseCode,r.message):cn.error('DataChannel "error" event: %o',r),this.safeEmit("error",r)}),this._dataChannel.addEventListener("close",()=>{this._closed||(cn.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",e=>{this._closed||this.safeEmit("message",e.data)})}}Ks.DataConsumer=O1;var L1=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),M1=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),By=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&L1(e,t,r);return M1(e,t),e},I1=S&&S.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qs,"__esModule",{value:!0});qs.Transport=void 0;const N1=Zr,ml=I1(S1),j1=Se,xh=cr,Ae=Ne,gl=By(Ee),Vi=By(Q),A1=Qs,F1=Hs,$1=Vs,B1=Ks,xe=new j1.Logger("Transport");class U1{constructor(e){this.consumerOptions=e,this.promise=new Promise((r,n)=>{this.resolve=r,this.reject=n})}}class z1 extends xh.EnhancedEventEmitter{constructor({direction:e,id:r,iceParameters:n,iceCandidates:i,dtlsParameters:s,sctpParameters:o,iceServers:a,iceTransportPolicy:c,additionalSettings:l,proprietaryConstraints:u,appData:d,handlerFactory:p,extendedRtpCapabilities:h,canProduceByKind:f}){super(),this._closed=!1,this._iceGatheringState="new",this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new N1.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new xh.EnhancedEventEmitter,xe.debug("constructor() [id:%s, direction:%s]",r,e),this._id=r,this._direction=e,this._extendedRtpCapabilities=h,this._canProduceByKind=f,this._maxSctpMessageSize=o?o.maxMessageSize:null,l=gl.clone(l)||{},delete l.iceServers,delete l.iceTransportPolicy,delete l.bundlePolicy,delete l.rtcpMuxPolicy,delete l.sdpSemantics,this._handler=p(),this._handler.run({direction:e,iceParameters:n,iceCandidates:i,dtlsParameters:s,sctpParameters:o,iceServers:a,iceTransportPolicy:c,additionalSettings:l,proprietaryConstraints:u,extendedRtpCapabilities:h}),this._appData=d||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){if(!this._closed){xe.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const e of this._producers.values())e.transportClosed();this._producers.clear();for(const e of this._consumers.values())e.transportClosed();this._consumers.clear();for(const e of this._dataProducers.values())e.transportClosed();this._dataProducers.clear();for(const e of this._dataConsumers.values())e.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new Ae.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:e}){if(xe.debug("restartIce()"),this._closed)throw new Ae.InvalidStateError("closed");if(!e)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(e),"transport.restartIce()")}async updateIceServers({iceServers:e}={}){if(xe.debug("updateIceServers()"),this._closed)throw new Ae.InvalidStateError("closed");if(!Array.isArray(e))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(e),"transport.updateIceServers()")}async produce({track:e,encodings:r,codecOptions:n,codec:i,stopTracks:s=!0,disableTrackOnPause:o=!0,zeroRtpOnPause:a=!1,appData:c={}}={}){if(xe.debug("produce() [track:%o]",e),this._closed)throw new Ae.InvalidStateError("closed");if(e){if(this._direction!=="send")throw new Ae.UnsupportedError("not a sending Transport");if(this._canProduceByKind[e.kind]){if(e.readyState==="ended")throw new Ae.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(c&&typeof c!="object")throw new TypeError("if given, appData must be an object")}else throw new Ae.UnsupportedError(`cannot produce ${e.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let l;if(r&&!Array.isArray(r))throw TypeError("encodings must be an array");r&&r.length===0?l=void 0:r&&(l=r.map(h=>{const f={active:!0};return h.active===!1&&(f.active=!1),typeof h.dtx=="boolean"&&(f.dtx=h.dtx),typeof h.scalabilityMode=="string"&&(f.scalabilityMode=h.scalabilityMode),typeof h.scaleResolutionDownBy=="number"&&(f.scaleResolutionDownBy=h.scaleResolutionDownBy),typeof h.maxBitrate=="number"&&(f.maxBitrate=h.maxBitrate),typeof h.maxFramerate=="number"&&(f.maxFramerate=h.maxFramerate),typeof h.adaptivePtime=="boolean"&&(f.adaptivePtime=h.adaptivePtime),typeof h.priority=="string"&&(f.priority=h.priority),typeof h.networkPriority=="string"&&(f.networkPriority=h.networkPriority),f}));const{localId:u,rtpParameters:d,rtpSender:p}=await this._handler.send({track:e,encodings:l,codecOptions:n,codec:i});try{Vi.validateRtpParameters(d);const{id:h}=await new Promise((m,g)=>{this.safeEmit("produce",{kind:e.kind,rtpParameters:d,appData:c},m,g)}),f=new A1.Producer({id:h,localId:u,rtpSender:p,track:e,rtpParameters:d,stopTracks:s,disableTrackOnPause:o,zeroRtpOnPause:a,appData:c});return this._producers.set(f.id,f),this.handleProducer(f),this._observer.safeEmit("newproducer",f),f}catch(h){throw this._handler.stopSending(u).catch(()=>{}),h}},"transport.produce()").catch(l=>{if(s)try{e.stop()}catch{}throw l})}async consume({id:e,producerId:r,kind:n,rtpParameters:i,streamId:s,appData:o={}}){if(xe.debug("consume()"),i=gl.clone(i),this._closed)throw new Ae.InvalidStateError("closed");if(this._direction!=="recv")throw new Ae.UnsupportedError("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing id");if(typeof r!="string")throw new TypeError("missing producerId");if(n!=="audio"&&n!=="video")throw new TypeError(`invalid kind '${n}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object");if(!Vi.canReceive(i,this._extendedRtpCapabilities))throw new Ae.UnsupportedError("cannot consume this Producer");const c=new U1({id:e,producerId:r,kind:n,rtpParameters:i,streamId:s,appData:o});return this._pendingConsumerTasks.push(c),(0,ml.default)(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),c.promise}async produceData({ordered:e=!0,maxPacketLifeTime:r,maxRetransmits:n,label:i="",protocol:s="",appData:o={}}={}){if(xe.debug("produceData()"),this._closed)throw new Ae.InvalidStateError("closed");if(this._direction!=="send")throw new Ae.UnsupportedError("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new Ae.UnsupportedError("SCTP not enabled by remote Transport");return(r||n)&&(e=!1),this._awaitQueue.push(async()=>{const{dataChannel:a,sctpStreamParameters:c}=await this._handler.sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s});Vi.validateSctpStreamParameters(c);const{id:l}=await new Promise((d,p)=>{this.safeEmit("producedata",{sctpStreamParameters:c,label:i,protocol:s,appData:o},d,p)}),u=new $1.DataProducer({id:l,dataChannel:a,sctpStreamParameters:c,appData:o});return this._dataProducers.set(u.id,u),this.handleDataProducer(u),this._observer.safeEmit("newdataproducer",u),u},"transport.produceData()")}async consumeData({id:e,dataProducerId:r,sctpStreamParameters:n,label:i="",protocol:s="",appData:o={}}){if(xe.debug("consumeData()"),n=gl.clone(n),this._closed)throw new Ae.InvalidStateError("closed");if(this._direction!=="recv")throw new Ae.UnsupportedError("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof e!="string")throw new TypeError("missing id");if(typeof r!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new Ae.UnsupportedError("SCTP not enabled by remote Transport");return Vi.validateSctpStreamParameters(n),this._awaitQueue.push(async()=>{const{dataChannel:a}=await this._handler.receiveDataChannel({sctpStreamParameters:n,label:i,protocol:s}),c=new B1.DataConsumer({id:e,dataProducerId:r,dataChannel:a,sctpStreamParameters:n,appData:o});return this._dataConsumers.set(c.id,c),this.handleDataConsumer(c),this._observer.safeEmit("newdataconsumer",c),c},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){xe.debug("createPendingConsumers() | there is no Consumer to be created");return}const e=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let r;const n=[];for(const i of e){const{id:s,kind:o,rtpParameters:a,streamId:c}=i.consumerOptions;n.push({trackId:s,kind:o,rtpParameters:a,streamId:c})}try{const i=await this._handler.receive(n);for(let s=0;s<i.length;++s){const o=e[s],a=i[s],{id:c,producerId:l,kind:u,rtpParameters:d,appData:p}=o.consumerOptions,{localId:h,rtpReceiver:f,track:m}=a,g=new F1.Consumer({id:c,localId:h,producerId:l,rtpReceiver:f,track:m,rtpParameters:d,appData:p});this._consumers.set(g.id,g),this.handleConsumer(g),!this._probatorConsumerCreated&&!r&&u==="video"&&(r=g),this._observer.safeEmit("newconsumer",g),o.resolve(g)}}catch(i){for(const s of e)s.reject(i)}if(r)try{const i=Vi.generateProbatorRtpParameters(r.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:i}]),xe.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(i){xe.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",i)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){xe.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const e=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const r=e.map(n=>n.localId);await this._handler.pauseReceiving(r)}catch(r){xe.error("pausePendingConsumers() | failed to pause Consumers:",r)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){xe.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const e=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const r=e.map(n=>n.localId);await this._handler.resumeReceiving(r)}catch(r){xe.error("resumePendingConsumers() | failed to resume Consumers:",r)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){xe.debug("closePendingConsumers() | there is no Consumer to be closed");return}const e=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(e.map(r=>r.localId))}catch(r){xe.error("closePendingConsumers() | failed to close Consumers:",r)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const e=this._handler;e.on("@connect",({dtlsParameters:r},n,i)=>{if(this._closed){i(new Ae.InvalidStateError("closed"));return}this.safeEmit("connect",{dtlsParameters:r},n,i)}),e.on("@icegatheringstatechange",r=>{r!==this._iceGatheringState&&(xe.debug("ICE gathering state changed to %s",r),this._iceGatheringState=r,this._closed||this.safeEmit("icegatheringstatechange",r))}),e.on("@connectionstatechange",r=>{r!==this._connectionState&&(xe.debug("connection state changed to %s",r),this._connectionState=r,this._closed||this.safeEmit("connectionstatechange",r))})}handleProducer(e){e.on("@close",()=>{this._producers.delete(e.id),!this._closed&&this._awaitQueue.push(async()=>await this._handler.stopSending(e.localId),"producer @close event").catch(r=>xe.warn("producer.close() failed:%o",r))}),e.on("@pause",(r,n)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(e.localId),"producer @pause event").then(r).catch(n)}),e.on("@resume",(r,n)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(e.localId),"producer @resume event").then(r).catch(n)}),e.on("@replacetrack",(r,n,i)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(e.localId,r),"producer @replacetrack event").then(n).catch(i)}),e.on("@setmaxspatiallayer",(r,n,i)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(e.localId,r),"producer @setmaxspatiallayer event").then(n).catch(i)}),e.on("@setrtpencodingparameters",(r,n,i)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(e.localId,r),"producer @setrtpencodingparameters event").then(n).catch(i)}),e.on("@getstats",(r,n)=>{if(this._closed)return n(new Ae.InvalidStateError("closed"));this._handler.getSenderStats(e.localId).then(r).catch(n)})}handleConsumer(e){e.on("@close",()=>{this._consumers.delete(e.id),this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.delete(e.id),!this._closed&&(this._pendingCloseConsumers.set(e.id,e),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),e.on("@pause",()=>{this._pendingResumeConsumers.has(e.id)&&this._pendingResumeConsumers.delete(e.id),this._pendingPauseConsumers.set(e.id,e),(0,ml.default)(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),e.on("@resume",()=>{this._pendingPauseConsumers.has(e.id)&&this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.set(e.id,e),(0,ml.default)(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),e.on("@getstats",(r,n)=>{if(this._closed)return n(new Ae.InvalidStateError("closed"));this._handler.getReceiverStats(e.localId).then(r).catch(n)})}handleDataProducer(e){e.on("@close",()=>{this._dataProducers.delete(e.id)})}handleDataConsumer(e){e.on("@close",()=>{this._dataConsumers.delete(e.id)})}}qs.Transport=z1;var wc={},Te={},Uy={},zy={exports:{}},kh=zy.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(kh).forEach(function(t){var e=kh[t];e.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})});var qy=zy.exports;(function(t){var e=function(a){return String(Number(a))===a?Number(a):a},r=function(a,c,l,u){if(u&&!l)c[u]=e(a[1]);else for(var d=0;d<l.length;d+=1)a[d+1]!=null&&(c[l[d]]=e(a[d+1]))},n=function(a,c,l){var u=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:u&&!c[a.name]&&(c[a.name]={});var d=a.push?{}:u?c[a.name]:c;r(l.match(a.reg),d,a.names,a.name),a.push&&c[a.push].push(d)},i=qy,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var c={},l=[],u=c;return a.split(/(\r\n|\r|\n)/).filter(s).forEach(function(d){var p=d[0],h=d.slice(2);p==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var f=0;f<(i[p]||[]).length;f+=1){var m=i[p][f];if(m.reg.test(h))return n(m,u,h)}}),c.media=l,c};var o=function(a,c){var l=c.split(/=(.+)/,2);return l.length===2?a[l[0]]=e(l[1]):l.length===1&&c.length>1&&(a[l[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var c=[],l=a.split(" ").map(e),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},t.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(o,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=e(l):(u=e(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}})(Uy);var vl=qy,q1=/%[sdv%]/g,Q1=function(t){var e=1,r=arguments,n=r.length;return t.replace(q1,function(i){if(e>=n)return i;var s=r[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},Ki=function(t,e,r){var n=e.format instanceof Function?e.format(e.push?r:r[e.name]):e.format,i=[t+"="+n];if(e.names)for(var s=0;s<e.names.length;s+=1){var o=e.names[s];e.name?i.push(r[e.name][o]):i.push(r[e.names[s]])}else i.push(r[e.name]);return Q1.apply(null,i)},H1=["v","o","s","i","u","e","p","c","b","t","r","z","a"],V1=["i","c","b","a"],K1=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var r=e.outerOrder||H1,n=e.innerOrder||V1,i=[];return r.forEach(function(s){vl[s].forEach(function(o){o.name in t&&t[o.name]!=null?i.push(Ki(s,o,t)):o.push in t&&t[o.push]!=null&&t[o.push].forEach(function(a){i.push(Ki(s,o,a))})})}),t.media.forEach(function(s){i.push(Ki("m",vl.m[0],s)),n.forEach(function(o){vl[o].forEach(function(a){a.name in s&&s[a.name]!=null?i.push(Ki(o,a,s)):a.push in s&&s[a.push]!=null&&s[a.push].forEach(function(c){i.push(Ki(o,a,c))})})})}),i.join(`\r
`)+`\r
`},Tn=Uy,W1=K1;Te.write=W1;Te.parse=Tn.parse;Te.parseParams=Tn.parseParams;Te.parseFmtpConfig=Tn.parseFmtpConfig;Te.parsePayloads=Tn.parsePayloads;Te.parseRemoteCandidates=Tn.parseRemoteCandidates;Te.parseImageAttributes=Tn.parseImageAttributes;Te.parseSimulcastStreamList=Tn.parseSimulcastStreamList;var Le={},G1=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),J1=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Y1=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&G1(e,t,r);return J1(e,t),e};Object.defineProperty(Le,"__esModule",{value:!0});Le.applyCodecParameters=Le.getCname=Le.extractDtlsParameters=Le.extractRtpCapabilities=void 0;const Qy=Y1(Te);function X1({sdpObject:t}){const e=new Map,r=[];let n=!1,i=!1;for(const o of t.media){const a=o.type;switch(a){case"audio":{if(n)continue;n=!0;break}case"video":{if(i)continue;i=!0;break}default:continue}for(const c of o.rtp){const l={kind:a,mimeType:`${a}/${c.codec}`,preferredPayloadType:c.payload,clockRate:c.rate,channels:c.encoding,parameters:{},rtcpFeedback:[]};e.set(l.preferredPayloadType,l)}for(const c of o.fmtp||[]){const l=Qy.parseParams(c.config),u=e.get(c.payload);u&&(l&&l.hasOwnProperty("profile-level-id")&&(l["profile-level-id"]=String(l["profile-level-id"])),u.parameters=l)}for(const c of o.rtcpFb||[]){const l={type:c.type,parameter:c.subtype};if(l.parameter||delete l.parameter,c.payload!=="*"){const u=e.get(c.payload);if(!u)continue;u.rtcpFeedback.push(l)}else for(const u of e.values())u.kind===a&&!/.+\/rtx$/i.test(u.mimeType)&&u.rtcpFeedback.push(l)}for(const c of o.ext||[]){if(c["encrypt-uri"])continue;const l={kind:a,uri:c.uri,preferredId:c.value};r.push(l)}}return{codecs:Array.from(e.values()),headerExtensions:r}}Le.extractRtpCapabilities=X1;function Z1({sdpObject:t}){let e=t.setup,r=t.fingerprint;if(!e||!r){const s=(t.media||[]).find(o=>o.port!==0);s&&(e??(e=s.setup),r??(r=s.fingerprint))}if(e){if(!r)throw new Error("no a=fingerprint found at SDP session or media level")}else throw new Error("no a=setup found at SDP session or media level");let n;switch(e){case"active":{n="client";break}case"passive":{n="server";break}case"actpass":{n="auto";break}}return{role:n,fingerprints:[{algorithm:r.type,value:r.hash}]}}Le.extractDtlsParameters=Z1;function eE({offerMediaObject:t}){const e=(t.ssrcs||[]).find(r=>r.attribute==="cname");return e?e.value:""}Le.getCname=eE;function tE({offerRtpParameters:t,answerMediaObject:e}){for(const r of t.codecs){const n=r.mimeType.toLowerCase();if(n!=="audio/opus"||!(e.rtp||[]).find(a=>a.payload===r.payloadType))continue;e.fmtp=e.fmtp||[];let s=e.fmtp.find(a=>a.payload===r.payloadType);s||(s={payload:r.payloadType,config:""},e.fmtp.push(s));const o=Qy.parseParams(s.config);switch(n){case"audio/opus":{const a=r.parameters["sprop-stereo"];a!==void 0&&(o.stereo=a?1:0);break}}s.config="";for(const a of Object.keys(o))s.config&&(s.config+=";"),s.config+=`${a}=${o[a]}`}}Le.applyCodecParameters=tE;var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.addLegacySimulcast=Pt.getRtpEncodings=void 0;function rE({offerMediaObject:t}){const e=new Set;for(const i of t.ssrcs||[]){const s=i.id;e.add(s)}if(e.size===0)throw new Error("no a=ssrc lines found");const r=new Map;for(const i of t.ssrcGroups||[]){if(i.semantics!=="FID")continue;let[s,o]=i.ssrcs.split(/\s+/);s=Number(s),o=Number(o),e.has(s)&&(e.delete(s),e.delete(o),r.set(s,o))}for(const i of e)r.set(i,null);const n=[];for(const[i,s]of r){const o={ssrc:i};s&&(o.rtx={ssrc:s}),n.push(o)}return n}Pt.getRtpEncodings=rE;function nE({offerMediaObject:t,numStreams:e}){if(e<=1)throw new TypeError("numStreams must be greater than 1");const r=(t.ssrcs||[]).find(d=>d.attribute==="msid");if(!r)throw new Error("a=ssrc line with msid information not found");const[n,i]=r.value.split(" "),s=r.id;let o;(t.ssrcGroups||[]).some(d=>{if(d.semantics!=="FID")return!1;const p=d.ssrcs.split(/\s+/);return Number(p[0])===s?(o=Number(p[1]),!0):!1});const a=t.ssrcs.find(d=>d.attribute==="cname");if(!a)throw new Error("a=ssrc line with cname information not found");const c=a.value,l=[],u=[];for(let d=0;d<e;++d)l.push(s+d),o&&u.push(o+d);t.ssrcGroups=[],t.ssrcs=[],t.ssrcGroups.push({semantics:"SIM",ssrcs:l.join(" ")});for(let d=0;d<l.length;++d){const p=l[d];t.ssrcs.push({id:p,attribute:"cname",value:c}),t.ssrcs.push({id:p,attribute:"msid",value:`${n} ${i}`})}for(let d=0;d<u.length;++d){const p=l[d],h=u[d];t.ssrcs.push({id:h,attribute:"cname",value:c}),t.ssrcs.push({id:h,attribute:"msid",value:`${n} ${i}`}),t.ssrcGroups.push({semantics:"FID",ssrcs:`${p} ${h}`})}}Pt.addLegacySimulcast=nE;var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.addNackSuppportForOpus=void 0;function iE(t){var e;for(const r of t.codecs||[])(r.mimeType.toLowerCase()==="audio/opus"||r.mimeType.toLowerCase()==="audio/multiopus")&&!((e=r.rtcpFeedback)!=null&&e.some(n=>n.type==="nack"&&!n.parameter))&&(r.rtcpFeedback||(r.rtcpFeedback=[]),r.rtcpFeedback.push({type:"nack"}))}Pn.addNackSuppportForOpus=iE;var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.HandlerInterface=void 0;const sE=cr;class oE extends sE.EnhancedEventEmitter{constructor(){super()}}Ze.HandlerInterface=oE;var dt={},en={},aE=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cE=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Hy=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&aE(e,t,r);return cE(e,t),e};Object.defineProperty(en,"__esModule",{value:!0});en.OfferMediaSection=en.AnswerMediaSection=en.MediaSection=void 0;const lE=Hy(Te),Oh=Hy(Ee);class ip{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,planB:i=!1}){if(this._mediaObject={},this._planB=i,e&&this.setIceParameters(e),r){this._mediaObject.candidates=[];for(const s of r){const o={};o.component=1,o.foundation=s.foundation,o.ip=s.address??s.ip,o.port=s.port,o.priority=s.priority,o.transport=s.protocol,o.type=s.type,s.tcpType&&(o.tcptype=s.tcpType),this._mediaObject.candidates.push(o)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}n&&this.setDtlsRole(n.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}en.MediaSection=ip;class uE extends ip{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,sctpParameters:i,plainRtpParameters:s,planB:o=!1,offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:l,codecOptions:u,extmapAllowMixed:d=!1}){switch(super({iceParameters:e,iceCandidates:r,dtlsParameters:n,planB:o}),this._mediaObject.mid=String(a.mid),this._mediaObject.type=a.type,this._mediaObject.protocol=a.protocol,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),a.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const p of l.codecs){const h={payload:p.payloadType,codec:zu(p),rate:p.clockRate};p.channels>1&&(h.encoding=p.channels),this._mediaObject.rtp.push(h);const f=Oh.clone(p.parameters)??{};let m=Oh.clone(p.rtcpFeedback)??[];if(u){const{opusStereo:v,opusFec:y,opusDtx:_,opusMaxPlaybackRate:w,opusMaxAverageBitrate:b,opusPtime:C,opusNack:D,videoGoogleStartBitrate:x,videoGoogleMaxBitrate:H,videoGoogleMinBitrate:O}=u,ue=c.codecs.find(ge=>ge.payloadType===p.payloadType);switch(p.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":{v!==void 0&&(ue.parameters["sprop-stereo"]=v?1:0,f.stereo=v?1:0),y!==void 0&&(ue.parameters.useinbandfec=y?1:0,f.useinbandfec=y?1:0),_!==void 0&&(ue.parameters.usedtx=_?1:0,f.usedtx=_?1:0),w!==void 0&&(f.maxplaybackrate=w),b!==void 0&&(f.maxaveragebitrate=b),C!==void 0&&(ue.parameters.ptime=C,f.ptime=C),D||(ue.rtcpFeedback=ue.rtcpFeedback.filter(ge=>ge.type!=="nack"||ge.parameter),m=m.filter(ge=>ge.type!=="nack"||ge.parameter));break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{x!==void 0&&(f["x-google-start-bitrate"]=x),H!==void 0&&(f["x-google-max-bitrate"]=H),O!==void 0&&(f["x-google-min-bitrate"]=O);break}}}const g={payload:p.payloadType,config:""};for(const v of Object.keys(f))g.config&&(g.config+=";"),g.config+=`${v}=${f[v]}`;g.config&&this._mediaObject.fmtp.push(g);for(const v of m)this._mediaObject.rtcpFb.push({payload:p.payloadType,type:v.type,subtype:v.parameter})}this._mediaObject.payloads=l.codecs.map(p=>p.payloadType).join(" "),this._mediaObject.ext=[];for(const p of l.headerExtensions)(a.ext||[]).some(f=>f.uri===p.uri)&&this._mediaObject.ext.push({uri:p.uri,value:p.id});if(d&&a.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),a.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:a.simulcast.list1},this._mediaObject.rids=[];for(const p of a.rids||[])p.direction==="send"&&this._mediaObject.rids.push({id:p.id,direction:"recv"})}else if(a.simulcast_03){this._mediaObject.simulcast_03={value:a.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const p of a.rids||[])p.direction==="send"&&this._mediaObject.rids.push({id:p.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof a.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=i.port,this._mediaObject.maxMessageSize=i.maxMessageSize):a.sctpmap&&(this._mediaObject.payloads=i.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:i.port,maxMessageSize:i.maxMessageSize});break}}}setDtlsRole(e){switch(e){case"client":{this._mediaObject.setup="active";break}case"server":{this._mediaObject.setup="passive";break}case"auto":{this._mediaObject.setup="actpass";break}}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(e){var s;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const r={};for(const o of e)o.rid&&(r[o.rid]=o);const n=this._mediaObject.simulcast.list1,i=lE.parseSimulcastStreamList(n);for(const o of i)for(const a of o)a.paused=!((s=r[a.scid])!=null&&s.active);this._mediaObject.simulcast.list1=i.map(o=>o.map(a=>`${a.paused?"~":""}${a.scid}`).join(",")).join(";")}}en.AnswerMediaSection=uE;class dE extends ip{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,sctpParameters:i,plainRtpParameters:s,planB:o=!1,mid:a,kind:c,offerRtpParameters:l,streamId:u,trackId:d,oldDataChannelSpec:p=!1}){switch(super({iceParameters:e,iceCandidates:r,dtlsParameters:n,planB:o}),this._mediaObject.mid=String(a),this._mediaObject.type=c,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},i?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),c){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${u||"-"} ${d}`);for(const g of l.codecs){const v={payload:g.payloadType,codec:zu(g),rate:g.clockRate};g.channels>1&&(v.encoding=g.channels),this._mediaObject.rtp.push(v);const y={payload:g.payloadType,config:""};for(const _ of Object.keys(g.parameters))y.config&&(y.config+=";"),y.config+=`${_}=${g.parameters[_]}`;y.config&&this._mediaObject.fmtp.push(y);for(const _ of g.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:g.payloadType,type:_.type,subtype:_.parameter})}this._mediaObject.payloads=l.codecs.map(g=>g.payloadType).join(" "),this._mediaObject.ext=[];for(const g of l.headerExtensions)this._mediaObject.ext.push({uri:g.uri,value:g.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const h=l.encodings[0],f=h.ssrc,m=h.rtx&&h.rtx.ssrc?h.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],l.rtcp.cname&&this._mediaObject.ssrcs.push({id:f,attribute:"cname",value:l.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:f,attribute:"msid",value:`${u||"-"} ${d}`}),m&&(l.rtcp.cname&&this._mediaObject.ssrcs.push({id:m,attribute:"cname",value:l.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:m,attribute:"msid",value:`${u||"-"} ${d}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${f} ${m}`}));break}case"application":{p?(this._mediaObject.payloads=i.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:i.port,maxMessageSize:i.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=i.port,this._mediaObject.maxMessageSize=i.maxMessageSize);break}}}setDtlsRole(e){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:e,streamId:r,trackId:n}){const i=e.encodings[0],s=i.ssrc,o=i.rtx&&i.rtx.ssrc?i.rtx.ssrc:void 0,a=this._mediaObject.payloads.split(" ");for(const c of e.codecs){if(a.includes(String(c.payloadType)))continue;const l={payload:c.payloadType,codec:zu(c),rate:c.clockRate};c.channels>1&&(l.encoding=c.channels),this._mediaObject.rtp.push(l);const u={payload:c.payloadType,config:""};for(const d of Object.keys(c.parameters))u.config&&(u.config+=";"),u.config+=`${d}=${c.parameters[d]}`;u.config&&this._mediaObject.fmtp.push(u);for(const d of c.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:c.payloadType,type:d.type,subtype:d.parameter})}this._mediaObject.payloads+=` ${e.codecs.filter(c=>!this._mediaObject.payloads.includes(c.payloadType)).map(c=>c.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),e.rtcp.cname&&this._mediaObject.ssrcs.push({id:s,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:s,attribute:"msid",value:`${r||"-"} ${n}`}),o&&(e.rtcp.cname&&this._mediaObject.ssrcs.push({id:o,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:o,attribute:"msid",value:`${r||"-"} ${n}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${s} ${o}`}))}planBStopReceiving({offerRtpParameters:e}){const r=e.encodings[0],n=r.ssrc,i=r.rtx&&r.rtx.ssrc?r.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(s=>s.id!==n&&s.id!==i),i&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(s=>s.ssrcs!==`${n} ${i}`))}}en.OfferMediaSection=dE;function zu(t){const r=new RegExp("^(audio|video)/(.+)","i").exec(t.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");return r[2]}var pE=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fE=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),hE=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pE(e,t,r);return fE(e,t),e};Object.defineProperty(dt,"__esModule",{value:!0});dt.RemoteSdp=void 0;const mE=hE(Te),gE=Se,Eo=en,yl=new gE.Logger("RemoteSdp");class vE{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,sctpParameters:i,plainRtpParameters:s,planB:o=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=e,this._iceCandidates=r,this._dtlsParameters=n,this._sctpParameters=i,this._plainRtpParameters=s,this._planB=o,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},e&&e.iceLite&&(this._sdpObject.icelite="ice-lite"),n){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const a=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:n.fingerprints[a-1].algorithm,hash:n.fingerprints[a-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}s&&(this._sdpObject.origin.address=s.ip,this._sdpObject.origin.ipVer=s.ipVersion)}updateIceParameters(e){yl.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0;for(const r of this._mediaSections)r.setIceParameters(e)}updateDtlsRole(e){yl.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e;for(const r of this._mediaSections)r.setDtlsRole(e)}getNextMediaSectionIdx(){for(let e=0;e<this._mediaSections.length;++e){const r=this._mediaSections[e];if(r.closed)return{idx:e,reuseMid:r.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:e,reuseMid:r,offerRtpParameters:n,answerRtpParameters:i,codecOptions:s,extmapAllowMixed:o=!1}){const a=new Eo.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:e,offerRtpParameters:n,answerRtpParameters:i,codecOptions:s,extmapAllowMixed:o});r?this._replaceMediaSection(a,r):this._midToIndex.has(a.mid)?this._replaceMediaSection(a):this._addMediaSection(a)}receive({mid:e,kind:r,offerRtpParameters:n,streamId:i,trackId:s}){const o=this._midToIndex.get(e);let a;if(o!==void 0&&(a=this._mediaSections[o]),a)a.planBReceive({offerRtpParameters:n,streamId:i,trackId:s}),this._replaceMediaSection(a);else{a=new Eo.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:e,kind:r,offerRtpParameters:n,streamId:i,trackId:s});const c=this._mediaSections.find(l=>l.closed);c?this._replaceMediaSection(a,c.mid):this._addMediaSection(a)}}pauseMediaSection(e){this._findMediaSection(e).pause()}resumeSendingMediaSection(e){this._findMediaSection(e).resume()}resumeReceivingMediaSection(e){this._findMediaSection(e).resume()}disableMediaSection(e){this._findMediaSection(e).disable()}closeMediaSection(e){const r=this._findMediaSection(e);return e===this._firstMid?(yl.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),this.disableMediaSection(e),!1):(r.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(e,r){const n=this._findMediaSection(e);n.muxSimulcastStreams(r),this._replaceMediaSection(n)}planBStopReceiving({mid:e,offerRtpParameters:r}){const n=this._findMediaSection(e);n.planBStopReceiving({offerRtpParameters:r}),this._replaceMediaSection(n)}sendSctpAssociation({offerMediaObject:e}){const r=new Eo.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:e});this._addMediaSection(r)}receiveSctpAssociation({oldDataChannelSpec:e=!1}={}){const r=new Eo.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:e});this._addMediaSection(r)}getSdp(){return this._sdpObject.origin.sessionVersion++,mE.write(this._sdpObject)}_addMediaSection(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}_replaceMediaSection(e,r){if(typeof r=="string"){const n=this._midToIndex.get(r);if(n===void 0)throw new Error(`no media section found for reuseMid '${r}'`);const i=this._mediaSections[n];this._mediaSections[n]=e,this._midToIndex.delete(i.mid),this._midToIndex.set(e.mid,n),this._sdpObject.media[n]=e.getObject(),this._regenerateBundleMids()}else{const n=this._midToIndex.get(e.mid);if(n===void 0)throw new Error(`no media section found with mid '${e.mid}'`);this._mediaSections[n]=e,this._sdpObject.media[n]=e.getObject()}}_findMediaSection(e){const r=this._midToIndex.get(e);if(r===void 0)throw new Error(`no media section found with mid '${e}'`);return this._mediaSections[r]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(e=>!e.closed).map(e=>e.mid).join(" "))}}dt.RemoteSdp=vE;var $t={};Object.defineProperty($t,"__esModule",{value:!0});$t.parse=void 0;const yE=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function _E(t){const e=yE.exec(t||"");return e?{spatialLayers:Number(e[1]),temporalLayers:Number(e[2])}:{spatialLayers:1,temporalLayers:1}}$t.parse=_E;var wE=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),SE=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ki=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&wE(e,t,r);return SE(e,t),e};Object.defineProperty(wc,"__esModule",{value:!0});wc.Chrome111=void 0;const Lr=ki(Te),RE=Se,Lh=ki(Ee),An=ki(Q),To=ki(Le),Mh=ki(Pt),bE=ki(Pn),CE=Ne,EE=Ze,TE=dt,PE=$t,j=new RE.Logger("Chrome111"),Ih={OS:1024,MIS:1024};class sp extends EE.HandlerInterface{static createFactory(){return()=>new sp}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(j.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){j.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=Lr.parse(r.sdp),i=To.extractRtpCapabilities({sdpObject:n});return bE.addNackSuppportForOpus(i),i}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return j.debug("getNativeSctpCapabilities()"),{numStreams:Ih}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){this.assertNotClosed(),j.debug("run()"),this._direction=e,this._remoteSdp=new TE.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:An.getSendingRtpParameters("audio",u),video:An.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:An.getSendingRemoteRtpParameters("audio",u),video:An.getSendingRemoteRtpParameters("video",u)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(j.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(e){this.assertNotClosed(),j.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(this.assertNotClosed(),j.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});j.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};j.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};j.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();j.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){if(this.assertNotClosed(),this.assertSendDirection(),j.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&r.length>1){let f=1;for(const m of r){const g=m.scalabilityMode?(0,PE.parse)(m.scalabilityMode).temporalLayers:3;g>f&&(f=g)}r.forEach((m,g)=>{m.rid=`r${g}`,m.scalabilityMode=`L1T${f}`})}const s=Lh.clone(this._sendingRtpParametersByKind[e.kind]);s.codecs=An.reduceCodecs(s.codecs,i);const o=Lh.clone(this._sendingRemoteRtpParametersByKind[e.kind]);o.codecs=An.reduceCodecs(o.codecs,i);const a=this._remoteSdp.getNextMediaSectionIdx(),c=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r}),l=await this._pc.createOffer();let u=Lr.parse(l.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),j.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const d=c.mid;s.mid=d,u=Lr.parse(this._pc.localDescription.sdp);const p=u.media[a.idx];if(s.rtcp.cname=To.getCname({offerMediaObject:p}),!r)s.encodings=Mh.getRtpEncodings({offerMediaObject:p});else if(r.length===1){const f=Mh.getRtpEncodings({offerMediaObject:p});Object.assign(f[0],r[0]),s.encodings=f}else s.encodings=r;this._remoteSdp.send({offerMediaObject:p,reuseMid:a.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n,extmapAllowMixed:!0});const h={type:"answer",sdp:this._remoteSdp.getSdp()};return j.debug("send() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._mapMidTransceiver.set(d,c),{localId:d,rtpParameters:s,rtpSender:c.sender}}async stopSending(e){if(this.assertSendDirection(),j.debug("stopSending() [localId:%s]",e),this._closed)return;const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();j.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};j.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),j.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();j.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};j.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),j.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly";const n=await this._pc.createOffer();j.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};j.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertNotClosed(),this.assertSendDirection(),r?j.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):j.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertNotClosed(),this.assertSendDirection(),j.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{c<=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();j.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};j.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertNotClosed(),this.assertSendDirection(),j.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();j.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};j.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertNotClosed(),this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};j.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Ih.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Lr.parse(l.sdp),d=u.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),j.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const p={type:"answer",sdp:this._remoteSdp.getSdp()};j.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:u,streamId:d}=a;j.debug("receive() [trackId:%s, kind:%s]",c,l);const p=u.mid||String(this._mapMidTransceiver.size);n.set(c,p),this._remoteSdp.receive({mid:p,kind:l,offerRtpParameters:u,streamId:d||u.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};j.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=Lr.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,u=n.get(c),d=o.media.find(p=>String(p.mid)===u);To.applyCodecParameters({offerRtpParameters:l,answerMediaObject:d})}s={type:"answer",sdp:Lr.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),j.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),u=this._pc.getTransceivers().find(d=>d.mid===l);if(u)this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const i of e){j.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};j.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();j.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){j.debug("pauseReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};j.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();j.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){j.debug("resumeReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};j.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();j.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};j.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};j.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const d=await this._pc.createAnswer();if(!this._transportReady){const p=Lr.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}j.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Lr.parse(this._pc.localDescription.sdp));const n=To.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new CE.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}wc.Chrome111=sp;var Sc={},DE=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xE=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Oi=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&DE(e,t,r);return xE(e,t),e};Object.defineProperty(Sc,"__esModule",{value:!0});Sc.Chrome74=void 0;const Kt=Oi(Te),kE=Se,Nh=Oi(Ee),Fn=Oi(Q),Po=Oi(Le),_l=Oi(Pt),OE=Oi(Pn),LE=Ne,ME=Ze,IE=dt,NE=$t,I=new kE.Logger("Chrome74"),jh={OS:1024,MIS:1024};class op extends ME.HandlerInterface{static createFactory(){return()=>new op}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(I.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){I.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=Kt.parse(r.sdp),i=Po.extractRtpCapabilities({sdpObject:n});return OE.addNackSuppportForOpus(i),i}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return I.debug("getNativeSctpCapabilities()"),{numStreams:jh}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){I.debug("run()"),this._direction=e,this._remoteSdp=new IE.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Fn.getSendingRtpParameters("audio",u),video:Fn.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:Fn.getSendingRemoteRtpParameters("audio",u),video:Fn.getSendingRemoteRtpParameters("video",u)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(I.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(e){this.assertNotClosed(),I.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(this.assertNotClosed(),I.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});I.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();I.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertNotClosed(),this.assertSendDirection(),I.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&r.length>1&&r.forEach((g,v)=>{g.rid=`r${v}`});const s=Nh.clone(this._sendingRtpParametersByKind[e.kind]);s.codecs=Fn.reduceCodecs(s.codecs,i);const o=Nh.clone(this._sendingRemoteRtpParametersByKind[e.kind]);o.codecs=Fn.reduceCodecs(o.codecs,i);const a=this._remoteSdp.getNextMediaSectionIdx(),c=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r});let l=await this._pc.createOffer(),u=Kt.parse(l.sdp),d;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u});let p=!1;const h=(0,NE.parse)((r||[{}])[0].scalabilityMode);r&&r.length===1&&h.spatialLayers>1&&s.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(I.debug("send() | enabling legacy simulcast for VP9 SVC"),p=!0,u=Kt.parse(l.sdp),d=u.media[a.idx],_l.addLegacySimulcast({offerMediaObject:d,numStreams:h.spatialLayers}),l={type:"offer",sdp:Kt.write(u)}),I.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f=c.mid;if(s.mid=f,u=Kt.parse(this._pc.localDescription.sdp),d=u.media[a.idx],s.rtcp.cname=Po.getCname({offerMediaObject:d}),!r)s.encodings=_l.getRtpEncodings({offerMediaObject:d});else if(r.length===1){let g=_l.getRtpEncodings({offerMediaObject:d});Object.assign(g[0],r[0]),p&&(g=[g[0]]),s.encodings=g}else s.encodings=r;if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const g of s.encodings)g.scalabilityMode?g.scalabilityMode=`L1T${h.temporalLayers}`:g.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:d,reuseMid:a.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n,extmapAllowMixed:!0});const m={type:"answer",sdp:this._remoteSdp.getSdp()};return I.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.set(f,c),{localId:f,rtpParameters:s,rtpSender:c.sender}}async stopSending(e){if(this.assertSendDirection(),I.debug("stopSending() [localId:%s]",e),this._closed)return;const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();I.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),I.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();I.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),I.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly";const n=await this._pc.createOffer();I.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertNotClosed(),this.assertSendDirection(),r?I.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):I.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertNotClosed(),this.assertSendDirection(),I.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{c<=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();I.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertNotClosed(),this.assertSendDirection(),I.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();I.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertNotClosed(),this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};I.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jh.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Kt.parse(l.sdp),d=u.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),I.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const p={type:"answer",sdp:this._remoteSdp.getSdp()};I.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:u,streamId:d}=a;I.debug("receive() [trackId:%s, kind:%s]",c,l);const p=u.mid||String(this._mapMidTransceiver.size);n.set(c,p),this._remoteSdp.receive({mid:p,kind:l,offerRtpParameters:u,streamId:d||u.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=Kt.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,u=n.get(c),d=o.media.find(p=>String(p.mid)===u);Po.applyCodecParameters({offerRtpParameters:l,answerMediaObject:d})}s={type:"answer",sdp:Kt.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),I.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),u=this._pc.getTransceivers().find(d=>d.mid===l);if(u)this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const i of e){I.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();I.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){I.debug("pauseReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();I.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){I.debug("resumeReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();I.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};I.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};I.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const d=await this._pc.createAnswer();if(!this._transportReady){const p=Kt.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}I.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Kt.parse(this._pc.localDescription.sdp));const n=Po.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new LE.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Sc.Chrome74=op;var Rc={},jE=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),AE=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ws=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jE(e,t,r);return AE(e,t),e};Object.defineProperty(Rc,"__esModule",{value:!0});Rc.Chrome70=void 0;const yt=Ws(Te),FE=Se,Ah=Ws(Ee),$n=Ws(Q),Do=Ws(Le),wl=Ws(Pt),$E=Ze,BE=dt,UE=$t,q=new FE.Logger("Chrome70"),Fh={OS:1024,MIS:1024};class ap extends $E.HandlerInterface{static createFactory(){return()=>new ap}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(q.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){q.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=yt.parse(r.sdp);return Do.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return q.debug("getNativeSctpCapabilities()"),{numStreams:Fh}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){q.debug("run()"),this._direction=e,this._remoteSdp=new BE.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:$n.getSendingRtpParameters("audio",u),video:$n.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:$n.getSendingRemoteRtpParameters("audio",u),video:$n.getSendingRemoteRtpParameters("video",u)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(q.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(e){q.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(q.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});q.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};q.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();q.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertSendDirection(),q.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const s=Ah.clone(this._sendingRtpParametersByKind[e.kind]);s.codecs=$n.reduceCodecs(s.codecs,i);const o=Ah.clone(this._sendingRemoteRtpParametersByKind[e.kind]);o.codecs=$n.reduceCodecs(o.codecs,i);const a=this._remoteSdp.getNextMediaSectionIdx(),c=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),u=yt.parse(l.sdp),d;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),r&&r.length>1&&(q.debug("send() | enabling legacy simulcast"),u=yt.parse(l.sdp),d=u.media[a.idx],wl.addLegacySimulcast({offerMediaObject:d,numStreams:r.length}),l={type:"offer",sdp:yt.write(u)});let p=!1;const h=(0,UE.parse)((r||[{}])[0].scalabilityMode);if(r&&r.length===1&&h.spatialLayers>1&&s.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(q.debug("send() | enabling legacy simulcast for VP9 SVC"),p=!0,u=yt.parse(l.sdp),d=u.media[a.idx],wl.addLegacySimulcast({offerMediaObject:d,numStreams:h.spatialLayers}),l={type:"offer",sdp:yt.write(u)}),q.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),r){q.debug("send() | applying given encodings");const g=c.sender.getParameters();for(let v=0;v<(g.encodings||[]).length;++v){const y=g.encodings[v],_=r[v];if(!_)break;g.encodings[v]=Object.assign(y,_)}await c.sender.setParameters(g)}const f=c.mid;if(s.mid=f,u=yt.parse(this._pc.localDescription.sdp),d=u.media[a.idx],s.rtcp.cname=Do.getCname({offerMediaObject:d}),s.encodings=wl.getRtpEncodings({offerMediaObject:d}),r)for(let g=0;g<s.encodings.length;++g)r[g]&&Object.assign(s.encodings[g],r[g]);if(p&&(s.encodings=[s.encodings[0]]),s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const g of s.encodings)g.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:d,reuseMid:a.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n});const m={type:"answer",sdp:this._remoteSdp.getSdp()};return q.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.set(f,c),{localId:f,rtpParameters:s,rtpSender:c.sender}}async stopSending(e){this.assertSendDirection(),q.debug("stopSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();q.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){this.assertSendDirection(),r?q.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):q.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),q.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{c<=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();q.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),q.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();q.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:s};q.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Fh.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=yt.parse(l.sdp),d=u.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),q.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const p={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:u,streamId:d}=a;q.debug("receive() [trackId:%s, kind:%s]",c,l);const p=u.mid||String(this._mapMidTransceiver.size);n.set(c,p),this._remoteSdp.receive({mid:p,kind:l,offerRtpParameters:u,streamId:d||u.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};q.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=yt.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,u=n.get(c),d=o.media.find(p=>String(p.mid)===u);Do.applyCodecParameters({offerRtpParameters:l,answerMediaObject:d})}s={type:"answer",sdp:yt.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),q.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),u=this._pc.getTransceivers().find(d=>d.mid===l);if(!u)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const i of e){q.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};q.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();q.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:a,protocol:n};q.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};q.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const d=await this._pc.createAnswer();if(!this._transportReady){const p=yt.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}q.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=yt.parse(this._pc.localDescription.sdp));const n=Do.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Rc.Chrome70=ap;var bc={},br={};Object.defineProperty(br,"__esModule",{value:!0});br.addLegacySimulcast=br.getRtpEncodings=void 0;function zE({offerMediaObject:t,track:e}){const r=new Set;for(const s of t.ssrcs||[]){if(s.attribute!=="msid")continue;if(s.value.split(" ")[1]===e.id){const a=s.id;r.add(a)}}if(r.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${e.id}]`);const n=new Map;for(const s of t.ssrcGroups||[]){if(s.semantics!=="FID")continue;let[o,a]=s.ssrcs.split(/\s+/);o=Number(o),a=Number(a),r.has(o)&&(r.delete(o),r.delete(a),n.set(o,a))}for(const s of r)n.set(s,null);const i=[];for(const[s,o]of n){const a={ssrc:s};o&&(a.rtx={ssrc:o}),i.push(a)}return i}br.getRtpEncodings=zE;function qE({offerMediaObject:t,track:e,numStreams:r}){if(r<=1)throw new TypeError("numStreams must be greater than 1");let n,i,s;if(!(t.ssrcs||[]).find(d=>d.attribute!=="msid"?!1:d.value.split(" ")[1]===e.id?(n=d.id,s=d.value.split(" ")[0],!0):!1))throw new Error(`a=ssrc line with msid information not found [track.id:${e.id}]`);(t.ssrcGroups||[]).some(d=>{if(d.semantics!=="FID")return!1;const p=d.ssrcs.split(/\s+/);return Number(p[0])===n?(i=Number(p[1]),!0):!1});const a=t.ssrcs.find(d=>d.attribute==="cname"&&d.id===n);if(!a)throw new Error(`a=ssrc line with cname information not found [track.id:${e.id}]`);const c=a.value,l=[],u=[];for(let d=0;d<r;++d)l.push(n+d),i&&u.push(i+d);t.ssrcGroups=t.ssrcGroups||[],t.ssrcs=t.ssrcs||[],t.ssrcGroups.push({semantics:"SIM",ssrcs:l.join(" ")});for(let d=0;d<l.length;++d){const p=l[d];t.ssrcs.push({id:p,attribute:"cname",value:c}),t.ssrcs.push({id:p,attribute:"msid",value:`${s} ${e.id}`})}for(let d=0;d<u.length;++d){const p=l[d],h=u[d];t.ssrcs.push({id:h,attribute:"cname",value:c}),t.ssrcs.push({id:h,attribute:"msid",value:`${s} ${e.id}`}),t.ssrcGroups.push({semantics:"FID",ssrcs:`${p} ${h}`})}}br.addLegacySimulcast=qE;var QE=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HE=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Gs=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&QE(e,t,r);return HE(e,t),e};Object.defineProperty(bc,"__esModule",{value:!0});bc.Chrome67=void 0;const Wt=Gs(Te),VE=Se,$h=Gs(Ee),Bn=Gs(Q),xo=Gs(Le),Bh=Gs(br),KE=Ze,WE=dt,V=new VE.Logger("Chrome67"),Uh={OS:1024,MIS:1024};class cp extends KE.HandlerInterface{static createFactory(){return()=>new cp}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome67"}close(){if(V.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){V.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=Wt.parse(r.sdp);return xo.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return V.debug("getNativeSctpCapabilities()"),{numStreams:Uh}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){V.debug("run()"),this._direction=e,this._remoteSdp=new WE.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:Bn.getSendingRtpParameters("audio",u),video:Bn.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:Bn.getSendingRemoteRtpParameters("audio",u),video:Bn.getSendingRemoteRtpParameters("video",u)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(V.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(e){V.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(V.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});V.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};V.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};V.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();V.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertSendDirection(),V.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&V.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let s=await this._pc.createOffer(),o=Wt.parse(s.sdp),a;const c=$h.clone(this._sendingRtpParametersByKind[e.kind]);c.codecs=Bn.reduceCodecs(c.codecs);const l=$h.clone(this._sendingRemoteRtpParametersByKind[e.kind]);if(l.codecs=Bn.reduceCodecs(l.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),e.kind==="video"&&r&&r.length>1&&(V.debug("send() | enabling simulcast"),o=Wt.parse(s.sdp),a=o.media.find(h=>h.type==="video"),Bh.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:r.length}),s={type:"offer",sdp:Wt.write(o)}),V.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),o=Wt.parse(this._pc.localDescription.sdp),a=o.media.find(h=>h.type===e.kind),c.rtcp.cname=xo.getCname({offerMediaObject:a}),c.encodings=Bh.getRtpEncodings({offerMediaObject:a,track:e}),r)for(let h=0;h<c.encodings.length;++h)r[h]&&Object.assign(c.encodings[h],r[h]);if(c.encodings.length>1&&c.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const h of c.encodings)h.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:l,codecOptions:n});const u={type:"answer",sdp:this._remoteSdp.getSdp()};V.debug("send() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u);const d=String(this._nextSendLocalId);this._nextSendLocalId++;const p=this._pc.getSenders().find(h=>h.track===e);return this._mapSendLocalIdRtpSender.set(d,p),{localId:d,rtpParameters:c,rtpSender:p}}async stopSending(e){this.assertSendDirection(),V.debug("stopSending() [localId:%s]",e);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(r),r.track&&this._sendStream.removeTrack(r.track),this._mapSendLocalIdRtpSender.delete(e);const n=await this._pc.createOffer();V.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(s){if(this._sendStream.getTracks().length===0){V.warn("stopSending() | ignoring expected error due no sending tracks: %s",s.toString());return}throw s}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};V.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){this.assertSendDirection(),r?V.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):V.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.track;await n.replaceTrack(r),i&&this._sendStream.removeTrack(i),r&&this._sendStream.addTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),V.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{o<=r?s.active=!0:s.active=!1}),await n.setParameters(i)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),V.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{i.encodings[o]={...s,...r}}),await n.setParameters(i)}async getSenderStats(e){this.assertSendDirection();const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");return r.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:s};V.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Uh.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Wt.parse(l.sdp),d=u.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),V.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const p={type:"answer",sdp:this._remoteSdp.getSdp()};V.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const r=[];for(const o of e){const{trackId:a,kind:c,rtpParameters:l,streamId:u}=o;V.debug("receive() [trackId:%s, kind:%s]",a,c);const d=c;this._remoteSdp.receive({mid:d,kind:c,offerRtpParameters:l,streamId:u||l.rtcp.cname,trackId:a})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};V.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();const s=Wt.parse(i.sdp);for(const o of e){const{kind:a,rtpParameters:c}=o,l=a,u=s.media.find(d=>String(d.mid)===l);xo.applyCodecParameters({offerRtpParameters:c,answerMediaObject:u})}i={type:"answer",sdp:Wt.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:s}),V.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const o of e){const{kind:a,trackId:c,rtpParameters:l}=o,u=c,d=a,p=this._pc.getReceivers().find(h=>h.track&&h.track.id===u);if(!p)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(u,{mid:d,rtpParameters:l,rtpReceiver:p}),r.push({localId:u,track:p.track,rtpReceiver:p})}return r}async stopReceiving(e){this.assertRecvDirection();for(const i of e){V.debug("stopReceiving() [localId:%s]",i);const{mid:s,rtpParameters:o}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:s,offerRtpParameters:o})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};V.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();V.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const{rtpReceiver:r}=this._mapRecvLocalIdInfo.get(e)||{};if(!r)throw new Error("associated RTCRtpReceiver not found");return r.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:a,protocol:n};V.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const u={type:"offer",sdp:this._remoteSdp.getSdp()};V.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const d=await this._pc.createAnswer();if(!this._transportReady){const p=Wt.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}V.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Wt.parse(this._pc.localDescription.sdp));const n=xo.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}bc.Chrome67=cp;var Cc={},GE=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),JE=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Js=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&GE(e,t,r);return JE(e,t),e};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.Chrome55=void 0;const Gt=Js(Te),YE=Se,Wi=Ne,zh=Js(Ee),Un=Js(Q),ko=Js(Le),qh=Js(br),XE=Ze,ZE=dt,ee=new YE.Logger("Chrome55"),Qh={OS:1024,MIS:1024};class lp extends XE.HandlerInterface{static createFactory(){return()=>new lp}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome55"}close(){if(ee.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ee.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=Gt.parse(r.sdp);return ko.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return ee.debug("getNativeSctpCapabilities()"),{numStreams:Qh}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){ee.debug("run()"),this._direction=e,this._remoteSdp=new ZE.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:Un.getSendingRtpParameters("audio",u),video:Un.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:Un.getSendingRemoteRtpParameters("audio",u),video:Un.getSendingRemoteRtpParameters("video",u)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(ee.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(e){ee.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(ee.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});ee.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ee.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};ee.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ee.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertSendDirection(),ee.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&ee.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let s=await this._pc.createOffer(),o=Gt.parse(s.sdp),a;const c=zh.clone(this._sendingRtpParametersByKind[e.kind]);c.codecs=Un.reduceCodecs(c.codecs);const l=zh.clone(this._sendingRemoteRtpParametersByKind[e.kind]);if(l.codecs=Un.reduceCodecs(l.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),e.kind==="video"&&r&&r.length>1&&(ee.debug("send() | enabling simulcast"),o=Gt.parse(s.sdp),a=o.media.find(p=>p.type==="video"),qh.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:r.length}),s={type:"offer",sdp:Gt.write(o)}),ee.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),o=Gt.parse(this._pc.localDescription.sdp),a=o.media.find(p=>p.type===e.kind),c.rtcp.cname=ko.getCname({offerMediaObject:a}),c.encodings=qh.getRtpEncodings({offerMediaObject:a,track:e}),r)for(let p=0;p<c.encodings.length;++p)r[p]&&Object.assign(c.encodings[p],r[p]);if(c.encodings.length>1&&c.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const p of c.encodings)p.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:l,codecOptions:n});const u={type:"answer",sdp:this._remoteSdp.getSdp()};ee.debug("send() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u);const d=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(d,e),{localId:d,rtpParameters:c}}async stopSending(e){this.assertSendDirection(),ee.debug("stopSending() [localId:%s]",e);const r=this._mapSendLocalIdTrack.get(e);if(!r)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(r),this._pc.addStream(this._sendStream);const n=await this._pc.createOffer();ee.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(s){if(this._sendStream.getTracks().length===0){ee.warn("stopSending() | ignoring expected error due no sending tracks: %s",s.toString());return}throw s}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};ee.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){throw new Wi.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,r){throw new Wi.UnsupportedError(" not implemented")}async setRtpEncodingParameters(e,r){throw new Wi.UnsupportedError("not supported")}async getSenderStats(e){throw new Wi.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:s};ee.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Qh.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Gt.parse(l.sdp),d=u.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),ee.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const p={type:"answer",sdp:this._remoteSdp.getSdp()};ee.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const r=[];for(const o of e){const{trackId:a,kind:c,rtpParameters:l,streamId:u}=o;ee.debug("receive() [trackId:%s, kind:%s]",a,c);const d=c;this._remoteSdp.receive({mid:d,kind:c,offerRtpParameters:l,streamId:u||l.rtcp.cname,trackId:a})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};ee.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();const s=Gt.parse(i.sdp);for(const o of e){const{kind:a,rtpParameters:c}=o,l=a,u=s.media.find(d=>String(d.mid)===l);ko.applyCodecParameters({offerRtpParameters:c,answerMediaObject:u})}i={type:"answer",sdp:Gt.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:s}),ee.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const o of e){const{kind:a,trackId:c,rtpParameters:l}=o,u=a,d=c,p=o.streamId||l.rtcp.cname,f=this._pc.getRemoteStreams().find(m=>m.id===p).getTrackById(d);if(!f)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(d,{mid:u,rtpParameters:l}),r.push({localId:d,track:f})}return r}async stopReceiving(e){this.assertRecvDirection();for(const i of e){ee.debug("stopReceiving() [localId:%s]",i);const{mid:s,rtpParameters:o}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:s,offerRtpParameters:o})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};ee.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();ee.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new Wi.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:a,protocol:n};ee.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const u={type:"offer",sdp:this._remoteSdp.getSdp()};ee.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const d=await this._pc.createAnswer();if(!this._transportReady){const p=Gt.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}ee.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Gt.parse(this._pc.localDescription.sdp));const n=ko.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Cc.Chrome55=lp;var Ec={},eT=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tT=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ys=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&eT(e,t,r);return tT(e,t),e};Object.defineProperty(Ec,"__esModule",{value:!0});Ec.Firefox120=void 0;const Mr=Ys(Te),rT=Se,Hh=Ne,Vh=Ys(Ee),zn=Ys(Q),Oo=Ys(Le),Kh=Ys(Pt),nT=Ze,iT=dt,sT=$t,A=new rT.Logger("Firefox120"),Wh={OS:16,MIS:2048};class up extends nT.HandlerInterface{static createFactory(){return()=>new up}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox120"}close(){if(A.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){A.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),r=document.createElement("canvas");r.getContext("2d");const i=r.captureStream().getVideoTracks()[0];try{e.addTransceiver("audio",{direction:"sendrecv"}),e.addTransceiver(i,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const s=await e.createOffer();try{r.remove()}catch{}try{i.stop()}catch{}try{e.close()}catch{}const o=Mr.parse(s.sdp);return Oo.extractRtpCapabilities({sdpObject:o})}catch(s){try{r.remove()}catch{}try{i.stop()}catch{}try{e.close()}catch{}throw s}}async getNativeSctpCapabilities(){return A.debug("getNativeSctpCapabilities()"),{numStreams:Wh}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){this.assertNotClosed(),A.debug("run()"),this._direction=e,this._remoteSdp=new iT.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:zn.getSendingRtpParameters("audio",u),video:zn.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:zn.getSendingRemoteRtpParameters("audio",u),video:zn.getSendingRemoteRtpParameters("video",u)},this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(A.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(e){throw this.assertNotClosed(),new Hh.UnsupportedError("not supported")}async restartIce(e){if(this.assertNotClosed(),A.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});A.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();A.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertNotClosed(),this.assertSendDirection(),A.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&r.length>1&&r.forEach((f,m)=>{f.rid=`r${m}`});const s=Vh.clone(this._sendingRtpParametersByKind[e.kind]);s.codecs=zn.reduceCodecs(s.codecs,i);const o=Vh.clone(this._sendingRemoteRtpParametersByKind[e.kind]);o.codecs=zn.reduceCodecs(o.codecs,i);const a=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r}),c=await this._pc.createOffer();let l=Mr.parse(c.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:l});const u=(0,sT.parse)((r||[{}])[0].scalabilityMode);A.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const d=a.mid;s.mid=d,l=Mr.parse(this._pc.localDescription.sdp);const p=l.media[l.media.length-1];if(s.rtcp.cname=Oo.getCname({offerMediaObject:p}),!r)s.encodings=Kh.getRtpEncodings({offerMediaObject:p});else if(r.length===1){const f=Kh.getRtpEncodings({offerMediaObject:p});Object.assign(f[0],r[0]),s.encodings=f}else s.encodings=r;if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const f of s.encodings)f.scalabilityMode?f.scalabilityMode=`L1T${u.temporalLayers}`:f.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n,extmapAllowMixed:!0});const h={type:"answer",sdp:this._remoteSdp.getSdp()};return A.debug("send() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._mapMidTransceiver.set(d,a),{localId:d,rtpParameters:s,rtpSender:a.sender}}async stopSending(e){if(this.assertSendDirection(),A.debug("stopSending() [localId:%s]",e),this._closed)return;const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated transceiver not found");r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.disableMediaSection(r.mid);const n=await this._pc.createOffer();A.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),A.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();A.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),A.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const n=await this._pc.createOffer();A.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertNotClosed(),this.assertSendDirection(),r?A.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):A.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertNotClosed(),this.assertSendDirection(),A.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated transceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{c<=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();A.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertNotClosed(),this.assertSendDirection(),A.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();A.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertNotClosed(),this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};A.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Wh.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Mr.parse(l.sdp),d=u.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:u}),A.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const p={type:"answer",sdp:this._remoteSdp.getSdp()};A.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:u,streamId:d}=a;A.debug("receive() [trackId:%s, kind:%s]",c,l);const p=u.mid||String(this._mapMidTransceiver.size);n.set(c,p),this._remoteSdp.receive({mid:p,kind:l,offerRtpParameters:u,streamId:d||u.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=Mr.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,u=n.get(c),d=o.media.find(p=>String(p.mid)===u);Oo.applyCodecParameters({offerRtpParameters:l,answerMediaObject:d}),s={type:"answer",sdp:Mr.write(o)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:o}),A.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),u=this._pc.getTransceivers().find(d=>d.mid===l);if(!u)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver})}return r}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const i of e){A.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();A.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){A.debug("pauseReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();A.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){A.debug("resumeReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();A.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};A.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};A.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const d=await this._pc.createAnswer();if(!this._transportReady){const p=Mr.parse(d.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:p})}A.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Mr.parse(this._pc.localDescription.sdp));const n=Oo.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Hh.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Ec.Firefox120=up;var Tc={},oT=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aT=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xs=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oT(e,t,r);return aT(e,t),e};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.Firefox60=void 0;const Ir=Xs(Te),cT=Se,Gh=Ne,Sl=Xs(Ee),qn=Xs(Q),Lo=Xs(Le),Jh=Xs(Pt),lT=Ze,uT=dt,dT=$t,F=new cT.Logger("Firefox60"),Yh={OS:16,MIS:2048};class dp extends lT.HandlerInterface{static createFactory(){return()=>new dp}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(F.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){F.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),r=document.createElement("canvas");r.getContext("2d");const i=r.captureStream().getVideoTracks()[0];try{e.addTransceiver("audio",{direction:"sendrecv"});const s=e.addTransceiver(i,{direction:"sendrecv"}),o=s.sender.getParameters(),a=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];o.encodings=a,await s.sender.setParameters(o);const c=await e.createOffer();try{r.remove()}catch{}try{i.stop()}catch{}try{e.close()}catch{}const l=Ir.parse(c.sdp);return Lo.extractRtpCapabilities({sdpObject:l})}catch(s){try{r.remove()}catch{}try{i.stop()}catch{}try{e.close()}catch{}throw s}}async getNativeSctpCapabilities(){return F.debug("getNativeSctpCapabilities()"),{numStreams:Yh}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){this.assertNotClosed(),F.debug("run()"),this._direction=e,this._remoteSdp=new uT.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:qn.getSendingRtpParameters("audio",u),video:qn.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:qn.getSendingRemoteRtpParameters("audio",u),video:qn.getSendingRemoteRtpParameters("video",u)},this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(F.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(e){throw this.assertNotClosed(),new Gh.UnsupportedError("not supported")}async restartIce(e){if(this.assertNotClosed(),F.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});F.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();F.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertNotClosed(),this.assertSendDirection(),F.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&(r=Sl.clone(r),r.length>1&&(r.forEach((f,m)=>{f.rid=`r${m}`}),r.reverse()));const s=Sl.clone(this._sendingRtpParametersByKind[e.kind]);s.codecs=qn.reduceCodecs(s.codecs,i);const o=Sl.clone(this._sendingRemoteRtpParametersByKind[e.kind]);o.codecs=qn.reduceCodecs(o.codecs,i);const a=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});if(r){const f=a.sender.getParameters();f.encodings=r,await a.sender.setParameters(f)}const c=await this._pc.createOffer();let l=Ir.parse(c.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:l});const u=(0,dT.parse)((r||[{}])[0].scalabilityMode);F.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const d=a.mid;s.mid=d,l=Ir.parse(this._pc.localDescription.sdp);const p=l.media[l.media.length-1];if(s.rtcp.cname=Lo.getCname({offerMediaObject:p}),!r)s.encodings=Jh.getRtpEncodings({offerMediaObject:p});else if(r.length===1){const f=Jh.getRtpEncodings({offerMediaObject:p});Object.assign(f[0],r[0]),s.encodings=f}else s.encodings=r.reverse();if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const f of s.encodings)f.scalabilityMode?f.scalabilityMode=`L1T${u.temporalLayers}`:f.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n,extmapAllowMixed:!0});const h={type:"answer",sdp:this._remoteSdp.getSdp()};return F.debug("send() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._mapMidTransceiver.set(d,a),{localId:d,rtpParameters:s,rtpSender:a.sender}}async stopSending(e){if(this.assertSendDirection(),F.debug("stopSending() [localId:%s]",e),this._closed)return;const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated transceiver not found");r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.disableMediaSection(r.mid);const n=await this._pc.createOffer();F.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),F.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();F.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),F.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const n=await this._pc.createOffer();F.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertNotClosed(),this.assertSendDirection(),r?F.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):F.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertNotClosed(),this.assertSendDirection(),F.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated transceiver not found");const i=n.sender.getParameters();r=i.encodings.length-1-r,i.encodings.forEach((a,c)=>{c>=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();F.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertNotClosed(),this.assertSendDirection(),F.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();F.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertNotClosed(),this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};F.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Yh.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Ir.parse(l.sdp),d=u.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:u}),F.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const p={type:"answer",sdp:this._remoteSdp.getSdp()};F.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:u,streamId:d}=a;F.debug("receive() [trackId:%s, kind:%s]",c,l);const p=u.mid||String(this._mapMidTransceiver.size);n.set(c,p),this._remoteSdp.receive({mid:p,kind:l,offerRtpParameters:u,streamId:d||u.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=Ir.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,u=n.get(c),d=o.media.find(p=>String(p.mid)===u);Lo.applyCodecParameters({offerRtpParameters:l,answerMediaObject:d}),s={type:"answer",sdp:Ir.write(o)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:o}),F.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),u=this._pc.getTransceivers().find(d=>d.mid===l);if(!u)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver})}return r}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const i of e){F.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();F.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){F.debug("pauseReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();F.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){F.debug("resumeReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();F.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};F.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const d=await this._pc.createAnswer();if(!this._transportReady){const p=Ir.parse(d.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:p})}F.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Ir.parse(this._pc.localDescription.sdp));const n=Lo.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new Gh.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Tc.Firefox60=dp;var Pc={},pT=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fT=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Li=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pT(e,t,r);return fT(e,t),e};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.Safari12=void 0;const Jt=Li(Te),hT=Se,Xh=Li(Ee),Qn=Li(Q),Mo=Li(Le),Zh=Li(Pt),mT=Li(Pn),gT=Ne,vT=Ze,yT=dt,_T=$t,N=new hT.Logger("Safari12"),em={OS:1024,MIS:1024};class pp extends vT.HandlerInterface{static createFactory(){return()=>new pp}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(N.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){N.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=Jt.parse(r.sdp),i=Mo.extractRtpCapabilities({sdpObject:n});return mT.addNackSuppportForOpus(i),i}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return N.debug("getNativeSctpCapabilities()"),{numStreams:em}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){this.assertNotClosed(),N.debug("run()"),this._direction=e,this._remoteSdp=new yT.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Qn.getSendingRtpParameters("audio",u),video:Qn.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:Qn.getSendingRemoteRtpParameters("audio",u),video:Qn.getSendingRemoteRtpParameters("video",u)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(N.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(e){this.assertNotClosed(),N.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(this.assertNotClosed(),N.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});N.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};N.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};N.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();N.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertNotClosed(),this.assertSendDirection(),N.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const s=Xh.clone(this._sendingRtpParametersByKind[e.kind]);s.codecs=Qn.reduceCodecs(s.codecs,i);const o=Xh.clone(this._sendingRemoteRtpParametersByKind[e.kind]);o.codecs=Qn.reduceCodecs(o.codecs,i);const a=this._remoteSdp.getNextMediaSectionIdx(),c=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),u=Jt.parse(l.sdp),d;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u});const p=(0,_T.parse)((r||[{}])[0].scalabilityMode);r&&r.length>1&&(N.debug("send() | enabling legacy simulcast"),u=Jt.parse(l.sdp),d=u.media[a.idx],Zh.addLegacySimulcast({offerMediaObject:d,numStreams:r.length}),l={type:"offer",sdp:Jt.write(u)}),N.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const h=c.mid;if(s.mid=h,u=Jt.parse(this._pc.localDescription.sdp),d=u.media[a.idx],s.rtcp.cname=Mo.getCname({offerMediaObject:d}),s.encodings=Zh.getRtpEncodings({offerMediaObject:d}),r)for(let m=0;m<s.encodings.length;++m)r[m]&&Object.assign(s.encodings[m],r[m]);if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const m of s.encodings)m.scalabilityMode?m.scalabilityMode=`L1T${p.temporalLayers}`:m.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:d,reuseMid:a.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n});const f={type:"answer",sdp:this._remoteSdp.getSdp()};return N.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f),this._mapMidTransceiver.set(h,c),{localId:h,rtpParameters:s,rtpSender:c.sender}}async stopSending(e){if(this.assertSendDirection(),this._closed)return;N.debug("stopSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();N.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};N.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),N.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();N.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};N.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),N.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const n=await this._pc.createOffer();N.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};N.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertNotClosed(),this.assertSendDirection(),r?N.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):N.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertNotClosed(),this.assertSendDirection(),N.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{c<=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();N.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};N.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertNotClosed(),this.assertSendDirection(),N.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();N.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};N.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertNotClosed(),this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};N.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%em.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Jt.parse(l.sdp),d=u.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),N.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const p={type:"answer",sdp:this._remoteSdp.getSdp()};N.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:u,streamId:d}=a;N.debug("receive() [trackId:%s, kind:%s]",c,l);const p=u.mid||String(this._mapMidTransceiver.size);n.set(c,p),this._remoteSdp.receive({mid:p,kind:l,offerRtpParameters:u,streamId:d||u.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};N.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=Jt.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,u=n.get(c),d=o.media.find(p=>String(p.mid)===u);Mo.applyCodecParameters({offerRtpParameters:l,answerMediaObject:d})}s={type:"answer",sdp:Jt.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),N.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),u=this._pc.getTransceivers().find(d=>d.mid===l);if(!u)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver})}return r}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const i of e){N.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};N.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();N.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){N.debug("pauseReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};N.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();N.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){N.debug("resumeReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};N.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();N.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};N.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};N.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const d=await this._pc.createAnswer();if(!this._transportReady){const p=Jt.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}N.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Jt.parse(this._pc.localDescription.sdp));const n=Mo.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new gT.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Pc.Safari12=pp;var Dc={},wT=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ST=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Zs=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&wT(e,t,r);return ST(e,t),e};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.Safari11=void 0;const Yt=Zs(Te),RT=Se,tm=Zs(Ee),Hn=Zs(Q),Io=Zs(Le),rm=Zs(br),bT=Ze,CT=dt,G=new RT.Logger("Safari11"),nm={OS:1024,MIS:1024};class fp extends bT.HandlerInterface{static createFactory(){return()=>new fp}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari11"}close(){if(G.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){G.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=Yt.parse(r.sdp);return Io.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return G.debug("getNativeSctpCapabilities()"),{numStreams:nm}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){G.debug("run()"),this._direction=e,this._remoteSdp=new CT.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:Hn.getSendingRtpParameters("audio",u),video:Hn.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:Hn.getSendingRemoteRtpParameters("audio",u),video:Hn.getSendingRemoteRtpParameters("video",u)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(G.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(e){G.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(G.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});G.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};G.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};G.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();G.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertSendDirection(),G.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&G.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let s=await this._pc.createOffer(),o=Yt.parse(s.sdp),a;const c=tm.clone(this._sendingRtpParametersByKind[e.kind]);c.codecs=Hn.reduceCodecs(c.codecs);const l=tm.clone(this._sendingRemoteRtpParametersByKind[e.kind]);if(l.codecs=Hn.reduceCodecs(l.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),e.kind==="video"&&r&&r.length>1&&(G.debug("send() | enabling simulcast"),o=Yt.parse(s.sdp),a=o.media.find(h=>h.type==="video"),rm.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:r.length}),s={type:"offer",sdp:Yt.write(o)}),G.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),o=Yt.parse(this._pc.localDescription.sdp),a=o.media.find(h=>h.type===e.kind),c.rtcp.cname=Io.getCname({offerMediaObject:a}),c.encodings=rm.getRtpEncodings({offerMediaObject:a,track:e}),r)for(let h=0;h<c.encodings.length;++h)r[h]&&Object.assign(c.encodings[h],r[h]);if(c.encodings.length>1&&c.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const h of c.encodings)h.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:l,codecOptions:n});const u={type:"answer",sdp:this._remoteSdp.getSdp()};G.debug("send() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u);const d=String(this._nextSendLocalId);this._nextSendLocalId++;const p=this._pc.getSenders().find(h=>h.track===e);return this._mapSendLocalIdRtpSender.set(d,p),{localId:d,rtpParameters:c,rtpSender:p}}async stopSending(e){this.assertSendDirection();const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");r.track&&this._sendStream.removeTrack(r.track),this._mapSendLocalIdRtpSender.delete(e);const n=await this._pc.createOffer();G.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(s){if(this._sendStream.getTracks().length===0){G.warn("stopSending() | ignoring expected error due no sending tracks: %s",s.toString());return}throw s}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};G.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){this.assertSendDirection(),r?G.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):G.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.track;await n.replaceTrack(r),i&&this._sendStream.removeTrack(i),r&&this._sendStream.addTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),G.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{o<=r?s.active=!0:s.active=!1}),await n.setParameters(i)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),G.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{i.encodings[o]={...s,...r}}),await n.setParameters(i)}async getSenderStats(e){this.assertSendDirection();const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");return r.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};G.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%nm.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Yt.parse(l.sdp),d=u.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),G.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const p={type:"answer",sdp:this._remoteSdp.getSdp()};G.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const r=[];for(const o of e){const{trackId:a,kind:c,rtpParameters:l,streamId:u}=o;G.debug("receive() [trackId:%s, kind:%s]",a,c);const d=c;this._remoteSdp.receive({mid:d,kind:c,offerRtpParameters:l,streamId:u||l.rtcp.cname,trackId:a})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};G.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();const s=Yt.parse(i.sdp);for(const o of e){const{kind:a,rtpParameters:c}=o,l=a,u=s.media.find(d=>String(d.mid)===l);Io.applyCodecParameters({offerRtpParameters:c,answerMediaObject:u})}i={type:"answer",sdp:Yt.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:s}),G.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const o of e){const{kind:a,trackId:c,rtpParameters:l}=o,u=a,d=c,p=this._pc.getReceivers().find(h=>h.track&&h.track.id===d);if(!p)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(d,{mid:u,rtpParameters:l,rtpReceiver:p}),r.push({localId:d,track:p.track,rtpReceiver:p})}return r}async stopReceiving(e){this.assertRecvDirection();for(const i of e){G.debug("stopReceiving() [localId:%s]",i);const{mid:s,rtpParameters:o}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:s,offerRtpParameters:o})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};G.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();G.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertRecvDirection();const{rtpReceiver:r}=this._mapRecvLocalIdInfo.get(e)||{};if(!r)throw new Error("associated RTCRtpReceiver not found");return r.getStats()}async pauseReceiving(e){}async resumeReceiving(e){}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};G.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const u={type:"offer",sdp:this._remoteSdp.getSdp()};G.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const d=await this._pc.createAnswer();if(!this._transportReady){const p=Yt.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}G.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Yt.parse(this._pc.localDescription.sdp));const n=Io.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Dc.Safari11=fp;var xc={},bi={},ET=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TT=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),PT=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ET(e,t,r);return TT(e,t),e};Object.defineProperty(bi,"__esModule",{value:!0});bi.mangleRtpParameters=bi.getCapabilities=void 0;const Vy=PT(Ee);function DT(){const t=RTCRtpReceiver.getCapabilities(),e=Vy.clone(t);for(const r of e.codecs??[]){if(r.channels=r.numChannels,delete r.numChannels,r.mimeType=r.mimeType||`${r.kind}/${r.name}`,r.parameters){const n=r.parameters;n.apt&&(n.apt=Number(n.apt)),n["packetization-mode"]&&(n["packetization-mode"]=Number(n["packetization-mode"]))}for(const n of r.rtcpFeedback||[])n.parameter||(n.parameter="")}return e}bi.getCapabilities=DT;function xT(t){const e=Vy.clone(t);e.mid&&(e.muxId=e.mid,delete e.mid);for(const r of e.codecs)r.channels&&(r.numChannels=r.channels,delete r.channels),r.mimeType&&!r.name&&(r.name=r.mimeType.split("/")[1]),delete r.mimeType;return e}bi.mangleRtpParameters=xT;var kT=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OT=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),hp=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kT(e,t,r);return OT(e,t),e};Object.defineProperty(xc,"__esModule",{value:!0});xc.Edge11=void 0;const LT=Se,Rl=Ne,No=hp(Ee),bl=hp(Q),Cl=hp(bi),MT=Ze,ie=new LT.Logger("Edge11");class mp extends MT.HandlerInterface{static createFactory(){return()=>new mp}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){ie.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const e of this._rtpSenders.values())try{e.stop()}catch{}for(const e of this._rtpReceivers.values())try{e.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return ie.debug("getNativeRtpCapabilities()"),Cl.getCapabilities()}async getNativeSctpCapabilities(){return ie.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){ie.debug("run()"),this._sendingRtpParametersByKind={audio:bl.getSendingRtpParameters("audio",u),video:bl.getSendingRtpParameters("video",u)},this._remoteIceParameters=r,this._remoteIceCandidates=n,this._remoteDtlsParameters=i,this._cname=`CNAME-${No.generateRandomNumber()}`,this.setIceGatherer({iceServers:o,iceTransportPolicy:a}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(e){throw new Rl.UnsupportedError("not supported")}async restartIce(e){if(ie.debug("restartIce()"),this._remoteIceParameters=e,!!this._transportReady){ie.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,e,"controlling");for(const r of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(r);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){ie.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),ie.debug("send() | calling new RTCRtpSender()");const s=new RTCRtpSender(e,this._dtlsTransport),o=No.clone(this._sendingRtpParametersByKind[e.kind]);o.codecs=bl.reduceCodecs(o.codecs,i);const a=o.codecs.some(u=>/.+\/rtx$/i.test(u.mimeType));r||(r=[{}]);for(const u of r)u.ssrc=No.generateRandomNumber(),a&&(u.rtx={ssrc:No.generateRandomNumber()});o.encodings=r,o.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const c=Cl.mangleRtpParameters(o);ie.debug("send() | calling rtpSender.send() [params:%o]",c),await s.send(c);const l=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(l,s),{localId:l,rtpParameters:o,rtpSender:s}}async stopSending(e){ie.debug("stopSending() [localId:%s]",e);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(e);try{ie.debug("stopSending() | calling rtpSender.stop()"),r.stop()}catch(n){throw ie.warn("stopSending() | rtpSender.stop() failed:%o",n),n}}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){r?ie.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):ie.debug("replaceTrack() [localId:%s, no track]",e);const n=this._rtpSenders.get(e);if(!n)throw new Error("RTCRtpSender not found");n.setTrack(r)}async setMaxSpatialLayer(e,r){ie.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._rtpSenders.get(e);if(!n)throw new Error("RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{o<=r?s.active=!0:s.active=!1}),await n.setParameters(i)}async setRtpEncodingParameters(e,r){ie.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._rtpSenders.get(e);if(!n)throw new Error("RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((s,o)=>{i.encodings[o]={...s,...r}}),await n.setParameters(i)}async getSenderStats(e){const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");return r.getStats()}async sendDataChannel(e){throw new Rl.UnsupportedError("not implemented")}async receive(e){const r=[];for(const n of e){const{trackId:i,kind:s}=n;ie.debug("receive() [trackId:%s, kind:%s]",i,s)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const n of e){const{trackId:i,kind:s,rtpParameters:o}=n;ie.debug("receive() | calling new RTCRtpReceiver()");const a=new RTCRtpReceiver(this._dtlsTransport,s);a.addEventListener("error",u=>{ie.error('rtpReceiver "error" event [event:%o]',u)});const c=Cl.mangleRtpParameters(o);ie.debug("receive() | calling rtpReceiver.receive() [params:%o]",c),await a.receive(c);const l=i;this._rtpReceivers.set(l,a),r.push({localId:l,track:a.track,rtpReceiver:a})}return r}async stopReceiving(e){for(const r of e){ie.debug("stopReceiving() [localId:%s]",r);const n=this._rtpReceivers.get(r);if(!n)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(r);try{ie.debug("stopReceiving() | calling rtpReceiver.stop()"),n.stop()}catch(i){ie.warn("stopReceiving() | rtpReceiver.stop() failed:%o",i)}}}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){const r=this._rtpReceivers.get(e);if(!r)throw new Error("RTCRtpReceiver not found");return r.getStats()}async receiveDataChannel(e){throw new Rl.UnsupportedError("not implemented")}setIceGatherer({iceServers:e,iceTransportPolicy:r}){const n=new RTCIceGatherer({iceServers:e||[],gatherPolicy:r||"all"});n.addEventListener("error",i=>{ie.error('iceGatherer "error" event [event:%o]',i)});try{n.gather()}catch(i){ie.debug("setIceGatherer() | iceGatherer.gather() failed: %s",i.toString())}this._iceGatherer=n}setIceTransport(){const e=new RTCIceTransport(this._iceGatherer);e.addEventListener("statechange",()=>{switch(e.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),e.addEventListener("icestatechange",()=>{switch(e.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),e.addEventListener("candidatepairchange",r=>{ie.debug('iceTransport "candidatepairchange" event [pair:%o]',r.pair)}),this._iceTransport=e}setDtlsTransport(){const e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",()=>{ie.debug('dtlsTransport "statechange" event [state:%s]',e.state)}),e.addEventListener("dtlsstatechange",()=>{ie.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state),e.state==="closed"&&this.emit("@connectionstatechange","closed")}),e.addEventListener("error",r=>{ie.error('dtlsTransport "error" event [event:%o]',r)}),this._dtlsTransport=e}async setupTransport({localDtlsRole:e}){ie.debug("setupTransport()");const r=this._dtlsTransport.getLocalParameters();r.role=e,await new Promise((n,i)=>{this.safeEmit("@connect",{dtlsParameters:r},n,i)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const n of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(n);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(n=>n.algorithm==="sha-256"||n.algorithm==="sha-384"||n.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}xc.Edge11=mp;var kc={},IT=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NT=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Mi=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&IT(e,t,r);return NT(e,t),e};Object.defineProperty(kc,"__esModule",{value:!0});kc.ReactNativeUnifiedPlan=void 0;const Xt=Mi(Te),jT=Se,im=Mi(Ee),Vn=Mi(Q),jo=Mi(Le),El=Mi(Pt),AT=Mi(Pn),FT=Ne,$T=Ze,BT=dt,UT=$t,M=new jT.Logger("ReactNativeUnifiedPlan"),sm={OS:1024,MIS:1024};class gp extends $T.HandlerInterface{static createFactory(){return()=>new gp}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNativeUnifiedPlan"}close(){if(M.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){M.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=Xt.parse(r.sdp),i=jo.extractRtpCapabilities({sdpObject:n});return AT.addNackSuppportForOpus(i),i}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return M.debug("getNativeSctpCapabilities()"),{numStreams:sm}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){this.assertNotClosed(),M.debug("run()"),this._direction=e,this._remoteSdp=new BT.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Vn.getSendingRtpParameters("audio",u),video:Vn.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:Vn.getSendingRemoteRtpParameters("audio",u),video:Vn.getSendingRemoteRtpParameters("video",u)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(M.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(e){this.assertNotClosed(),M.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(this.assertNotClosed(),M.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});M.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();M.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertNotClosed(),this.assertSendDirection(),M.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&r.length>1&&r.forEach((g,v)=>{g.rid=`r${v}`});const s=im.clone(this._sendingRtpParametersByKind[e.kind]);s.codecs=Vn.reduceCodecs(s.codecs,i);const o=im.clone(this._sendingRemoteRtpParametersByKind[e.kind]);o.codecs=Vn.reduceCodecs(o.codecs,i);const a=this._remoteSdp.getNextMediaSectionIdx(),c=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r});let l=await this._pc.createOffer(),u=Xt.parse(l.sdp),d;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u});let p=!1;const h=(0,UT.parse)((r||[{}])[0].scalabilityMode);r&&r.length===1&&h.spatialLayers>1&&s.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(M.debug("send() | enabling legacy simulcast for VP9 SVC"),p=!0,u=Xt.parse(l.sdp),d=u.media[a.idx],El.addLegacySimulcast({offerMediaObject:d,numStreams:h.spatialLayers}),l={type:"offer",sdp:Xt.write(u)}),M.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);let f=c.mid??void 0;if(f||M.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),s.mid=f,u=Xt.parse(this._pc.localDescription.sdp),d=u.media[a.idx],s.rtcp.cname=jo.getCname({offerMediaObject:d}),!r)s.encodings=El.getRtpEncodings({offerMediaObject:d});else if(r.length===1){let g=El.getRtpEncodings({offerMediaObject:d});Object.assign(g[0],r[0]),p&&(g=[g[0]]),s.encodings=g}else s.encodings=r;if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const g of s.encodings)g.scalabilityMode?g.scalabilityMode=`L1T${h.temporalLayers}`:g.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:d,reuseMid:a.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:n,extmapAllowMixed:!0});const m={type:"answer",sdp:this._remoteSdp.getSdp()};return M.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),f||(f=c.mid,s.mid=f),this._mapMidTransceiver.set(f,c),{localId:f,rtpParameters:s,rtpSender:c.sender}}async stopSending(e){if(this.assertSendDirection(),this._closed)return;M.debug("stopSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();M.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),M.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();M.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),M.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly";const n=await this._pc.createOffer();M.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertNotClosed(),this.assertSendDirection(),r?M.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):M.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertNotClosed(),this.assertSendDirection(),M.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{c<=r?a.active=!0:a.active=!1}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();M.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async setRtpEncodingParameters(e,r){this.assertNotClosed(),this.assertSendDirection(),M.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((a,c)=>{i.encodings[c]={...a,...r}}),await n.sender.setParameters(i),this._remoteSdp.muxMediaSectionSimulcast(e,i.encodings);const s=await this._pc.createOffer();M.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const o={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertNotClosed(),this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:s};M.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%sm.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Xt.parse(l.sdp),d=u.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),M.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const p={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:u,streamId:d}=a;M.debug("receive() [trackId:%s, kind:%s]",c,l);const p=u.mid||String(this._mapMidTransceiver.size);n.set(c,p),this._remoteSdp.receive({mid:p,kind:l,offerRtpParameters:u,streamId:d||u.rtcp.cname,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=Xt.parse(s.sdp);for(const a of e){const{trackId:c,rtpParameters:l}=a,u=n.get(c),d=o.media.find(p=>String(p.mid)===u);jo.applyCodecParameters({offerRtpParameters:l,answerMediaObject:d})}s={type:"answer",sdp:Xt.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),M.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{trackId:c}=a,l=n.get(c),u=this._pc.getTransceivers().find(d=>d.mid===l);if(u)this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const i of e){M.debug("stopReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();M.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){M.debug("pauseReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();M.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const i of e){M.debug("resumeReceiving() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();M.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a,protocol:n};M.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const d=await this._pc.createAnswer();if(!this._transportReady){const p=Xt.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}M.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Xt.parse(this._pc.localDescription.sdp));const n=jo.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new FT.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}kc.ReactNativeUnifiedPlan=gp;var Oc={},zT=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qT=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eo=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zT(e,t,r);return qT(e,t),e};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.ReactNative=void 0;const Zt=eo(Te),QT=Se,Gi=Ne,Tl=eo(Ee),Kn=eo(Q),Ao=eo(Le),om=eo(br),HT=Ze,VT=dt,X=new QT.Logger("ReactNative"),am={OS:1024,MIS:1024};class vp extends HT.HandlerInterface{static createFactory(){return()=>new vp}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNative"}close(){if(X.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){X.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=Zt.parse(r.sdp);return Ao.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return X.debug("getNativeSctpCapabilities()"),{numStreams:am}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,extendedRtpCapabilities:u}){X.debug("run()"),this._direction=e,this._remoteSdp=new VT.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:Kn.getSendingRtpParameters("audio",u),video:Kn.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:Kn.getSendingRemoteRtpParameters("audio",u),video:Kn.getSendingRemoteRtpParameters("video",u)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...c},l),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(X.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(e){X.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(X.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});X.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};X.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};X.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();X.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertSendDirection(),X.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&X.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let s=await this._pc.createOffer(),o=Zt.parse(s.sdp),a;const c=Tl.clone(this._sendingRtpParametersByKind[e.kind]);c.codecs=Kn.reduceCodecs(c.codecs);const l=Tl.clone(this._sendingRemoteRtpParametersByKind[e.kind]);if(l.codecs=Kn.reduceCodecs(l.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),e.kind==="video"&&r&&r.length>1&&(X.debug("send() | enabling simulcast"),o=Zt.parse(s.sdp),a=o.media.find(p=>p.type==="video"),om.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:r.length}),s={type:"offer",sdp:Zt.write(o)}),X.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),o=Zt.parse(this._pc.localDescription.sdp),a=o.media.find(p=>p.type===e.kind),c.rtcp.cname=Ao.getCname({offerMediaObject:a}),c.encodings=om.getRtpEncodings({offerMediaObject:a,track:e}),r)for(let p=0;p<c.encodings.length;++p)r[p]&&Object.assign(c.encodings[p],r[p]);if(c.encodings.length>1&&(c.codecs[0].mimeType.toLowerCase()==="video/vp8"||c.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const p of c.encodings)p.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:l,codecOptions:n});const u={type:"answer",sdp:this._remoteSdp.getSdp()};X.debug("send() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u);const d=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(d,e),{localId:d,rtpParameters:c}}async stopSending(e){this.assertSendDirection(),X.debug("stopSending() [localId:%s]",e);const r=this._mapSendLocalIdTrack.get(e);if(!r)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(r),this._pc.addStream(this._sendStream);const n=await this._pc.createOffer();X.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(s){if(this._sendStream.getTracks().length===0){X.warn("stopSending() | ignoring expected error due no sending tracks: %s",s.toString());return}throw s}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};X.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){throw new Gi.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,r){throw new Gi.UnsupportedError("not implemented")}async setRtpEncodingParameters(e,r){throw new Gi.UnsupportedError("not implemented")}async getSenderStats(e){throw new Gi.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:s}){this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:s};X.debug("sendDataChannel() [options:%o]",o);const a=this._pc.createDataChannel(i,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%am.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Zt.parse(l.sdp),d=u.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),X.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const p={type:"answer",sdp:this._remoteSdp.getSdp()};X.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._hasDataChannelMediaSection=!0}const c={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:c,kind:l,rtpParameters:u}=a;X.debug("receive() [trackId:%s, kind:%s]",c,l);const d=l;let p=a.streamId||u.rtcp.cname;X.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),p+=`-hack-${Tl.generateRandomNumber()}`,n.set(c,p),this._remoteSdp.receive({mid:d,kind:l,offerRtpParameters:u,streamId:p,trackId:c})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};X.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const o=Zt.parse(s.sdp);for(const a of e){const{kind:c,rtpParameters:l}=a,u=c,d=o.media.find(p=>String(p.mid)===u);Ao.applyCodecParameters({offerRtpParameters:l,answerMediaObject:d})}s={type:"answer",sdp:Zt.write(o)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),X.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const a of e){const{kind:c,trackId:l,rtpParameters:u}=a,d=l,p=c,h=n.get(l),m=this._pc.getRemoteStreams().find(g=>g.id===h).getTrackById(d);if(!m)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(d,{mid:p,rtpParameters:u}),r.push({localId:d,track:m})}return r}async stopReceiving(e){this.assertRecvDirection();for(const i of e){X.debug("stopReceiving() [localId:%s]",i);const{mid:s,rtpParameters:o}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:s,offerRtpParameters:o})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};X.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();X.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new Gi.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:o,maxRetransmits:a}=e,c={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:a,protocol:n};X.debug("receiveDataChannel() [options:%o]",c);const l=this._pc.createDataChannel(r,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const u={type:"offer",sdp:this._remoteSdp.getSdp()};X.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const d=await this._pc.createAnswer();if(!this._transportReady){const p=Zt.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}X.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Zt.parse(this._pc.localDescription.sdp));const n=Ao.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:n},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Oc.ReactNative=vp;var KT=S&&S.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WT=S&&S.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ky=S&&S.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&KT(e,t,r);return WT(e,t),e};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.Device=Rn.detectDevice=void 0;const GT=_C,JT=Se,YT=cr,Wn=Ne,XT=Ky(Ee),Nr=Ky(Q),ZT=qs,eP=wc,tP=Sc,rP=Rc,nP=bc,iP=Cc,sP=Ec,oP=Tc,aP=Pc,cP=Dc,lP=xc,uP=kc,dP=Oc,$e=new JT.Logger("Device");function Wy(){var t,e,r,n;if(typeof navigator=="object"&&navigator.product==="ReactNative"){if($e.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"){$e.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?($e.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):($e.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}else if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){const i=navigator.userAgent,s=new GT.UAParser(i);$e.debug("detectDevice() | browser detected [ua:%s, parsed:%o]",i,s.getResult());const o=s.getBrowser(),a=(t=o.name)==null?void 0:t.toLowerCase(),c=parseInt(o.major??"0"),u=(e=s.getEngine().name)==null?void 0:e.toLowerCase(),d=s.getOS(),p=(r=d.name)==null?void 0:r.toLowerCase(),h=parseFloat(d.version??"0"),m=(n=s.getDevice().model)==null?void 0:n.toLowerCase(),g=p==="ios"||m==="ipad",v=a&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(a),y=a&&["firefox","mobile firefox","mobile focus"].includes(a),_=a&&["safari","mobile safari"].includes(a),w=a&&["edge"].includes(a);if((v||w)&&!g&&c>=111)return"Chrome111";if(v&&!g&&c>=74||w&&!g&&c>=88)return"Chrome74";if(v&&!g&&c>=70)return"Chrome70";if(v&&!g&&c>=67)return"Chrome67";if(v&&!g&&c>=55)return"Chrome55";if(y&&!g&&c>=120)return"Firefox120";if(y&&!g&&c>=60)return"Firefox60";if(y&&g&&h>=14.3)return"Safari12";if(_&&c>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(_&&c>=11)return"Safari11";if(w&&!g&&c>=11&&c<=18)return"Edge11";if(u==="webkit"&&g&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(u==="blink"){const b=i.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(b){const C=Number(b[1]);return C>=111?"Chrome111":C>=74?"Chrome74":C>=70?"Chrome70":C>=67?"Chrome67":"Chrome55"}else return"Chrome111"}else{$e.warn("detectDevice() | browser not supported [name:%s, version:%s]",a,c);return}}else{$e.warn("detectDevice() | unknown device");return}}Rn.detectDevice=Wy;class pP{constructor({handlerName:e,handlerFactory:r,Handler:n}={}){if(this._loaded=!1,this._observer=new YT.EnhancedEventEmitter,$e.debug("constructor()"),n)if($e.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof n=="string")e=n;else throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");if(e&&r)throw new TypeError("just one of handlerName or handlerInterface can be given");if(r)this._handlerFactory=r;else{if(e)$e.debug("constructor() | handler given: %s",e);else if(e=Wy(),e)$e.debug("constructor() | detected handler: %s",e);else throw new Wn.UnsupportedError("device not supported");switch(e){case"Chrome111":{this._handlerFactory=eP.Chrome111.createFactory();break}case"Chrome74":{this._handlerFactory=tP.Chrome74.createFactory();break}case"Chrome70":{this._handlerFactory=rP.Chrome70.createFactory();break}case"Chrome67":{this._handlerFactory=nP.Chrome67.createFactory();break}case"Chrome55":{this._handlerFactory=iP.Chrome55.createFactory();break}case"Firefox120":{this._handlerFactory=sP.Firefox120.createFactory();break}case"Firefox60":{this._handlerFactory=oP.Firefox60.createFactory();break}case"Safari12":{this._handlerFactory=aP.Safari12.createFactory();break}case"Safari11":{this._handlerFactory=cP.Safari11.createFactory();break}case"Edge11":{this._handlerFactory=lP.Edge11.createFactory();break}case"ReactNativeUnifiedPlan":{this._handlerFactory=uP.ReactNativeUnifiedPlan.createFactory();break}case"ReactNative":{this._handlerFactory=dP.ReactNative.createFactory();break}default:throw new TypeError(`unknown handlerName "${e}"`)}}const i=this._handlerFactory();this._handlerName=i.name,i.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new Wn.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new Wn.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:e}){$e.debug("load() [routerRtpCapabilities:%o]",e),e=XT.clone(e);let r;try{if(this._loaded)throw new Wn.InvalidStateError("already loaded");Nr.validateRtpCapabilities(e),r=this._handlerFactory();const n=await r.getNativeRtpCapabilities();$e.debug("load() | got native RTP capabilities:%o",n),Nr.validateRtpCapabilities(n),this._extendedRtpCapabilities=Nr.getExtendedRtpCapabilities(n,e),$e.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=Nr.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=Nr.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=Nr.getRecvRtpCapabilities(this._extendedRtpCapabilities),Nr.validateRtpCapabilities(this._recvRtpCapabilities),$e.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await r.getNativeSctpCapabilities(),$e.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),Nr.validateSctpCapabilities(this._sctpCapabilities),$e.debug("load() succeeded"),this._loaded=!0,r.close()}catch(n){throw r&&r.close(),n}}canProduce(e){if(this._loaded){if(e!=="audio"&&e!=="video")throw new TypeError(`invalid kind "${e}"`)}else throw new Wn.InvalidStateError("not loaded");return this._canProduceByKind[e]}createSendTransport({id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,appData:u}){return $e.debug("createSendTransport()"),this.createTransport({direction:"send",id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,appData:u})}createRecvTransport({id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,appData:u}){return $e.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:l,appData:u})}createTransport({direction:e,id:r,iceParameters:n,iceCandidates:i,dtlsParameters:s,sctpParameters:o,iceServers:a,iceTransportPolicy:c,additionalSettings:l,proprietaryConstraints:u,appData:d}){if(this._loaded){if(typeof r!="string")throw new TypeError("missing id");if(typeof n!="object")throw new TypeError("missing iceParameters");if(Array.isArray(i)){if(typeof s!="object")throw new TypeError("missing dtlsParameters");if(o&&typeof o!="object")throw new TypeError("wrong sctpParameters");if(d&&typeof d!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new Wn.InvalidStateError("not loaded");const p=new ZT.Transport({direction:e,id:r,iceParameters:n,iceCandidates:i,dtlsParameters:s,sctpParameters:o,iceServers:a,iceTransportPolicy:c,additionalSettings:l,proprietaryConstraints:u,appData:d,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",p),p}}Rn.Device=pP;var Gy={},Jy={};Object.defineProperty(Jy,"__esModule",{value:!0});var Yy={};Object.defineProperty(Yy,"__esModule",{value:!0});(function(t){var e=S&&S.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=S&&S.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Rn,t),r(qs,t),r(Qs,t),r(Hs,t),r(Vs,t),r(Ks,t),r(Jy,t),r(Yy,t),r(Ze,t),r(Ne,t)})(Gy);(function(t){var e=S&&S.__createBinding||(Object.create?function(l,u,d,p){p===void 0&&(p=d);var h=Object.getOwnPropertyDescriptor(u,d);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(l,p,h)}:function(l,u,d,p){p===void 0&&(p=d),l[p]=u[d]}),r=S&&S.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),n=S&&S.__importStar||function(l){if(l&&l.__esModule)return l;var u={};if(l!=null)for(var d in l)d!=="default"&&Object.prototype.hasOwnProperty.call(l,d)&&e(u,l,d);return r(u,l),u},i=S&&S.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.parseScalabilityMode=t.detectDevice=t.Device=t.version=t.types=void 0;const s=i(fc);t.debug=s.default;const o=Rn;Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return o.Device}}),Object.defineProperty(t,"detectDevice",{enumerable:!0,get:function(){return o.detectDevice}});const a=n(Gy);t.types=a,t.version="3.7.6";var c=$t;Object.defineProperty(t,"parseScalabilityMode",{enumerable:!0,get:function(){return c.parse}})})(Ty);let fP={encodings:[{rid:"r0",maxBitrate:1e5,scalabilityMode:"S1T3"},{rid:"r1",maxBitrate:3e5,scalabilityMode:"S1T3"},{rid:"r2",maxBitrate:9e5,scalabilityMode:"S1T3"}],codecOptions:{videoGoogleStartBitrate:1e3}},Fo=new Ty.Device,$o,Pl,Dl,Ot=Fe.id;function hP(){const[t,e]=T.useState(!1),r=T.useRef(null),{roomId:n}=i0(),[i,s]=T.useState([]),{data:o,refetch:a}=zv({queryKey:["rooms"],queryFn:()=>dy(),refetchIntervalInBackground:2e4}),c=T.useCallback(()=>{Fe.emit("createWebRtcTransport",{sender:!0,roomId:n,myId:Ot},({params:g})=>{g.error||($o=Fo.createSendTransport(g),$o.on("connect",async({dtlsParameters:v},y,_)=>{try{Fe.emit("transport-connect",{dtlsParameters:v,roomId:n,myId:Ot}),y()}catch(w){_(w)}}),$o.on("produce",async(v,y,_)=>{try{Fe.emit("transport-produce",{kind:v.kind,rtpParameters:v.rtpParameters,appData:v.appData,roomId:n,myId:Ot},({id:w})=>{y({id:w})})}catch(w){console.log(w),_(w)}}),m())})},[n]),l=T.useCallback(async g=>{Fe.emit("consume",{rtpCapabilities:Fo.rtpCapabilities,roomId:n,producerId:g,myId:Ot},async({params:v})=>{if(v.error)return;const y=await Dl.consume({id:v.id,producerId:v.producerId,kind:v.kind,rtpParameters:v.rtpParameters});s(_=>[..._,{consumer:y,producerId:g}])})},[n]),u=T.useCallback(()=>{Fe.emit("recv-tracks",{roomId:n,socketId:Ot},async g=>{const{producers:v}=g;for(let y=0;y<v.length;y++){const _=v[y];await l(_)}})},[l,n]),d=T.useCallback(async()=>{Fe.emit("createWebRtcTransport",{sender:!1,roomId:n,myId:Ot},({params:g})=>{g.error||(Dl=Fo.createRecvTransport(g),u(),Dl.on("connect",async({dtlsParameters:v},y,_)=>{try{Fe.emit("transport-recv-connect",{dtlsParameters:v,roomId:n,myId:Ot}),y()}catch(w){_(w)}}))})},[n,u]),p=T.useCallback(()=>{Ot=Fe.id,Fe.emit("joinned-room",{roomId:n,myId:Ot},()=>{a(),Fe.emit("getRtpCapabilities",{roomId:n},async g=>{try{await Fo.load({routerRtpCapabilities:g.rtpCapabilities})}catch(v){console.log(v)}c(),d()})})},[d,a,n,c]);T.useEffect(()=>{Fe.connected?e(!0):(Fe.connect(),Fe.on("connect",()=>{e(!0)}))},[]),T.useEffect(()=>{t&&p()},[t,p]),T.useEffect(()=>{Fe.on("new-producer",({producerId:g})=>{l(g)}),Fe.on("remove-user",({producerId:g})=>{s(v=>v.filter(y=>y.producerId!==g))})},[l]);const h=g=>(g.preventDefault(),g.returnValue="Are you sure you want to close?"),f=T.useCallback(g=>{g.preventDefault(),Fe.emit("user-disconnected",{roomId:n,myId:Ot})},[n]);T.useEffect(()=>()=>{Fe.emit("user-disconnected",{roomId:n,myId:Ot})},[n]),T.useEffect(()=>(window.addEventListener("beforeunload",h),window.addEventListener("unload",f),()=>{window.removeEventListener("unload",f),window.removeEventListener("beforeunload",h)}),[n,f]);const m=async()=>{const g=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}),v=g.getVideoTracks()[0];r.current.srcObject=g,Pl=await $o.produce({...fP,track:v}),Pl.on("trackended",()=>{console.log("track ended")}),Pl.on("transportclose",()=>{console.log("transport ended")})};return te.jsxs("div",{className:"flex justify-between",children:[te.jsxs("div",{className:"w-full",children:[te.jsx("div",{className:"flex justify-around p-4",children:i.map(g=>te.jsx(mP,{consumer:g.consumer,roomId:n},g==null?void 0:g.producerId))}),te.jsx("div",{className:"absolute bottom-0 border-slate-900 border-[5px] rounded-md",children:te.jsx("video",{ref:r,muted:!0,autoPlay:!0,style:{width:"250px"}})})]}),te.jsxs("div",{className:"flex flex-col items-center gap-5 shadow-2xl p-5 min-h-screen",children:[te.jsx(k0,{to:"/",children:te.jsx("div",{className:"bg-slate-800 px-3 py-2 rounded-md self-end",children:"Go Home"})}),o==null?void 0:o.map(g=>te.jsx(qv,{room:g},g.roomId))]})]})}const mP=({consumer:t,roomId:e,socketId:r})=>{const n=T.useRef(null),{track:i}=t;return T.useEffect(()=>{n.current.srcObject=new MediaStream([i]),Fe.emit("consumer-resume",{consumerId:t==null?void 0:t.id,socketId:r,roomId:e})},[e,i,t,r]),te.jsx("video",{className:"border-black border-2 rounded-md",ref:n,autoPlay:!0,muted:!1,style:{width:"300px"}})},gP=new J0,vP=()=>te.jsx(rR,{client:gP,children:te.jsx("div",{className:"dark bg-slate-700 min-h-screen text-white",children:te.jsx(y0,{})})});xl.createRoot(document.getElementById("root")).render(te.jsx(P0,{children:te.jsx(w0,{children:te.jsxs(Xo,{path:"/",element:te.jsx(vP,{}),children:[te.jsx(Xo,{index:!0,element:te.jsx(Eb,{})}),te.jsx(Xo,{path:"room/:roomId",element:te.jsx(hP,{})})]})})}));
